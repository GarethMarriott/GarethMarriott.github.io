<!DOCTYPE html>
<html lang="en">
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <!-- code copyright (c) 2009-2016 drow <drow@bin.sh>                     -->
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<head>
  <meta charset="utf-8" />
  <title>donjon; The Undercrypt of Cesa</title>

  <link rel="shortcut icon" type="image/vnd.microsoft.icon"
    href="data:image/vnd.microsoft.icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAHAADgBwAA4AcAAP5/AAD4HwAA+98AAPvfAAD73wAA+98AAPvfAAD73wAA+B8AAP5/AADgBwAA4AcAAOAHAAA=" />

  <link rel="stylesheet" type="text/css" media="all"
    href="data:text/css;base64,LyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8KLyogY29tbW9uLmNzcwogKgogKiBjb3B5cmlnaHQgKGMpIDIwMDYtMjAxMyBkcm93IDxkcm93QGJpbi5zaD4KICogYWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KCi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCi8qIGZvbnQtZmFtaWx5ICovCgpib2R5IHsgZm9udC1mYW1pbHk6ICdBc3VsJywgc2Fucy1zZXJpZjsgfQp0ZXh0YXJlYSB7IGZvbnQtZmFtaWx5OiAnQXN1bCcsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMTRweDsgfQoKLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8KLyogY29udGVudCAqLwoKaDEgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KdGFibGUgeyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyB9CgouY2VudGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9CnRhYmxlLmNlbnRlciB7IG1hcmdpbjogMHB4IGF1dG87IH0KCm9wdGdyb3VwIHsgbWFyZ2luOiAxZXggMWVtOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgY29sb3I6ICM4MDgwODA7IH0Kb3B0Z3JvdXAgb3B0aW9uIHsgY29sb3I6ICMwMDAwMDA7IH0KCmRpdi5mb290bm90ZXMgeyBtYXJnaW4tdG9wOiA2ZXg7IHRleHQtYWxpZ246IGNlbnRlcjsgfQoKLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8K" />
  <link rel="stylesheet" type="text/css" media="all"
    href="data:application/binary;base64,QGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdBc3VsJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBzcmM6IGxvY2FsKCdBc3VsIFJlZ3VsYXInKSwgbG9jYWwoJ0FzdWwtUmVndWxhcicpLCB1cmwoaHR0cDovL2ZvbnRzLmdzdGF0aWMuY29tL3MvYXN1bC92Ny9WQXprQzJUSWhRMmU0S1FMREtmOVJ3LnR0ZikgZm9ybWF0KCd0cnVldHlwZScpOwp9CkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnQXN1bCc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgc3JjOiBsb2NhbCgnQXN1bCBCb2xkJyksIGxvY2FsKCdBc3VsLUJvbGQnKSwgdXJsKGh0dHA6Ly9mb250cy5nc3RhdGljLmNvbS9zL2FzdWwvdjcvUElQYkc5S0dvZHo1VU1fVmducU14dy50dGYpIGZvcm1hdCgndHJ1ZXR5cGUnKTsKfQo=" />
  <link rel="stylesheet" type="text/css" media="all"
    href="data:text/css;base64,LyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8KLyogc3RhdHMuY3NzCiAqCiAqIGNvcHlyaWdodCAoYykgMjAwNi0yMDExIGRyb3cgPGRyb3dAYmluLnNoPgogKiBhbGwgcmlnaHRzIHJlc2VydmVkLgoqLwoKLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8KLyogc3RhdCBibG9jayAqLwoKdGFibGUuc3RhdHMgeyBtYXJnaW46IDJleCBhdXRvOwogIGJvcmRlcjogbm9uZTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkOyBib3JkZXItY29sb3I6ICNjY2NjY2M7IH0KdGFibGUuc3RhdHMgdGFibGUgeyB3aWR0aDogMTAwJTsgbWFyZ2luOiA0cHg7CiAgYm9yZGVyOiBub25lOyBib3JkZXItdG9wOiAxcHggc29saWQ7IGJvcmRlci1jb2xvcjogI2NjY2NjYzsgfQp0YWJsZS5zdGF0cyB0cjpob3ZlciB0ZCB7IGJhY2tncm91bmQ6ICNkZWRlZGU7IH0KdGFibGUuc3RhdHMgdHIuZW1wdHk6aG92ZXIgdGQgeyBiYWNrZ3JvdW5kOiBub25lOyB9CnRhYmxlLnN0YXRzIHRyOmhvdmVyIG9sIGxpOmhvdmVyIHsgYmFja2dyb3VuZDogI2ZmZmZmZjsgfQp0YWJsZS5zdGF0cyB0cjpob3ZlciB0YWJsZSB0cjpob3ZlciB0ZCB7IGJhY2tncm91bmQ6ICNmZmZmZmY7IH0KdGFibGUuc3RhdHMgdHI6aG92ZXIgdGFibGUgdHIuZW1wdHk6aG92ZXIgdGQgeyBiYWNrZ3JvdW5kOiBub25lOyB9CnRhYmxlLnN0YXRzIHRyOmhvdmVyIHRhYmxlIHRyOmhvdmVyIG9sIGxpOmhvdmVyIHsgYmFja2dyb3VuZDogI2RlZGVkZTsgfQoKdGFibGUuc3RhdHMgdGggeyBwYWRkaW5nOiAxZXggMWVtOyBiYWNrZ3JvdW5kOiAjMDAwMDAwOyBjb2xvcjogI2ZmZmZmZjsgfQp0YWJsZS5zdGF0cyB0ZCB7IHBhZGRpbmc6IDRweCAxZW07CiAgYm9yZGVyOiBub25lOyBib3JkZXItYm90dG9tOiAxcHggc29saWQ7IGJvcmRlci1jb2xvcjogI2NjY2NjYzsKICB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB9CnRhYmxlLnN0YXRzIHRkLmljb24gaW1nIHsgYm9yZGVyOiAxcHggc29saWQ7IGJvcmRlci1jb2xvcjogI2NjY2NjYzsgfQp0YWJsZS5zdGF0cyB0ZC5zZWN0aW9uIHsgd2lkdGg6IDhlbTsgcGFkZGluZy10b3A6IDhweDsKICB0ZXh0LWFsaWduOiByaWdodDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICBmb250LXNpemU6IGxhcmdlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0KdGFibGUuc3RhdHMgdGQuZGV0YWlsIHsgd2lkdGg6IDhlbTsKICB0ZXh0LWFsaWduOiByaWdodDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgZm9udC1zdHlsZTogaXRhbGljOyB9CnRhYmxlLnN0YXRzIHRkLmtleSB7IHdpZHRoOiA4ZW07CiAgdGV4dC1hbGlnbjogcmlnaHQ7IHdoaXRlLXNwYWNlOiBub3dyYXA7IGZvbnQtd2VpZ2h0OiBib2xkOyB9Cgp0YWJsZS5zdGF0cyB0ZC52YWx1ZSB7IHZlcnRpY2FsLWFsaWduOiBib3R0b207IH0KdGFibGUuc3RhdHMgdGQudmFsdWUgcCB7IG1hcmdpbjogMHB4OyBtYXJnaW4tdG9wOiAxZXg7IH0KdGFibGUuc3RhdHMgdGQudmFsdWUgcC5pY29uIHsgcGFkZGluZy1sZWZ0OiAyZW07IHRleHQtaW5kZW50OiAtMmVtOyB9CnRhYmxlLnN0YXRzIHRkLnZhbHVlIG9sIHsgbWFyZ2luOiAwcHggMHB4IDJleCAyZW07IHBhZGRpbmc6IDBweDsgfQp0YWJsZS5zdGF0cyB0ZC52YWx1ZSBvbCBsaSB7IG1hcmdpbjogMHB4OyBwYWRkaW5nOiAycHggMC41ZW07IH0KdGFibGUuc3RhdHMgdGQudmFsdWUgaHIgeyBtYXJnaW46IDFleCAwZW07CiAgYm9yZGVyOiBub25lOyBib3JkZXItdG9wOiAxcHggc29saWQ7IGJvcmRlci1jb2xvcjogI2NjY2NjYzsgfQoKQG1lZGlhIHByaW50IHsKICBhIHsgY29sb3I6IGJsYWNrOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH0KfQoKLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8K" />
  <link rel="stylesheet" type="text/css" media="all"
    href="data:text/css;base64,LyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8KLyogZHVuZ2Vvbi9zdHlsZS5jc3MKICoKICogY29weXJpZ2h0IChjKSAyMDA2LTIwMTQgZHJvdyA8ZHJvd0BiaW4uc2g+CiAqIGFsbCByaWdodHMgcmVzZXJ2ZWQuCiovCgovKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqLwovKiBkdW5nZW9uIG1hcCAqLwoKdGFibGUubWFwIHsgbWFyZ2luOiAyZXggYXV0bzsgYm9yZGVyOiBub25lOwogIGJvcmRlci1sZWZ0OiAxcHggc29saWQ7IGJvcmRlci10b3A6IDFweCBzb2xpZDsgYm9yZGVyLWNvbG9yOiAjMzMzMzMzOyB9CnRhYmxlLm1hcCB0ZC5jZWxsIHsgbWFyZ2luOiAwcHg7IHBhZGRpbmc6IDBweDsKICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkOyBib3JkZXItY29sb3I6ICNjY2NjZmY7CiAgdGV4dC1hbGlnbjogY2VudGVyOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2EsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiA5cHg7IH0KdGFibGUubWFwIHRkLmJlZW4geyBiYWNrZ3JvdW5kOiAjZGVmZmRlOyB9CnRhYmxlLm1hcCB0ZC5jZWxsIGEgeyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH0KdGFibGUubWFwIHRkLmZpbGwgeyBib3JkZXItY29sb3I6ICMzMzMzMzM7IGJhY2tncm91bmQ6ICMwMDAwMDA7IH0KCnAubWFwIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9CmltZyB7IGJvcmRlcjogbm9uZTsgfQpwLmxlZ2VuZCB7IHRleHQtYWxpZ246IGNlbnRlcjsgfQpwLmxlZ2VuZCBzcGFuIHsgbWFyZ2luOiAwcHggMC41ZW07IHdoaXRlLXNwYWNlOiBub3dyYXA7IH0KCi8qIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtICovCi8qIHZhcmlhbnRzICovCgpkaXYudmFyaWFudHMgeyBtYXJnaW46IDJleCAxMCU7IG1hcmdpbi10b3A6IDRleDsgYm9yZGVyOiAxcHggc29saWQ7CiAgYm9yZGVyLWNvbG9yOiAjOTk5OTk5OyBiYWNrZ3JvdW5kOiAjZGVkZWRlOyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KZGl2LnZhcmlhbnRzIGRpdiB7IG1hcmdpbjogMmV4IDBweDsgfQpkaXYudmFyaWFudHMgYiB7IG1hcmdpbjogMHB4IDAuNWVtOyB9CmRpdi52YXJpYW50cyBmb3JtIHsgZGlzcGxheTogaW5saW5lOyBtYXJnaW46IDBweCAwLjVlbTsgfQpkaXYudmFyaWFudHMgaW5wdXQgeyBtYXJnaW46IDBweCAwLjVlbTsgfQpkaXYudmFyaWFudHMgc2VsZWN0IHsgbWFyZ2luOiAwcHggMC41ZW07IH0KZGl2LndvcmtpbmcgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMTUwJTsgfQoKLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8K" />

  <style type="text/css" media="print">
    img { max-width: 100%; }
    div.variants { display: none; }
  </style>

  <script type="text/javascript"
    src="data:text/javascript;base64,LyogIFByb3RvdHlwZSBKYXZhU2NyaXB0IGZyYW1ld29yaywgdmVyc2lvbiAxLjcuMgogKiAgKGMpIDIwMDUtMjAxMCBTYW0gU3RlcGhlbnNvbgogKgogKiAgUHJvdG90eXBlIGlzIGZyZWVseSBkaXN0cmlidXRhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiBhbiBNSVQtc3R5bGUgbGljZW5zZS4KICogIEZvciBkZXRhaWxzLCBzZWUgdGhlIFByb3RvdHlwZSB3ZWIgc2l0ZTogaHR0cDovL3d3dy5wcm90b3R5cGVqcy5vcmcvCiAqCiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKdmFyIFByb3RvdHlwZSA9IHsKCiAgVmVyc2lvbjogJzEuNy4yJywKCiAgQnJvd3NlcjogKGZ1bmN0aW9uKCl7CiAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50OwogICAgdmFyIGlzT3BlcmEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93Lm9wZXJhKSA9PSAnW29iamVjdCBPcGVyYV0nOwogICAgcmV0dXJuIHsKICAgICAgSUU6ICAgICAgICAgICAgICEhd2luZG93LmF0dGFjaEV2ZW50ICYmICFpc09wZXJhLAogICAgICBPcGVyYTogICAgICAgICAgaXNPcGVyYSwKICAgICAgV2ViS2l0OiAgICAgICAgIHVhLmluZGV4T2YoJ0FwcGxlV2ViS2l0LycpID4gLTEsCiAgICAgIEdlY2tvOiAgICAgICAgICB1YS5pbmRleE9mKCdHZWNrbycpID4gLTEgJiYgdWEuaW5kZXhPZignS0hUTUwnKSA9PT0gLTEsCiAgICAgIE1vYmlsZVNhZmFyaTogICAvQXBwbGUuKk1vYmlsZS8udGVzdCh1YSkKICAgIH0KICB9KSgpLAoKICBCcm93c2VyRmVhdHVyZXM6IHsKICAgIFhQYXRoOiAhIWRvY3VtZW50LmV2YWx1YXRlLAoKICAgIFNlbGVjdG9yc0FQSTogISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yLAoKICAgIEVsZW1lbnRFeHRlbnNpb25zOiAoZnVuY3Rpb24oKSB7CiAgICAgIHZhciBjb25zdHJ1Y3RvciA9IHdpbmRvdy5FbGVtZW50IHx8IHdpbmRvdy5IVE1MRWxlbWVudDsKICAgICAgcmV0dXJuICEhKGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSk7CiAgICB9KSgpLAogICAgU3BlY2lmaWNFbGVtZW50RXh0ZW5zaW9uczogKGZ1bmN0aW9uKCkgewogICAgICBpZiAodHlwZW9mIHdpbmRvdy5IVE1MRGl2RWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksCiAgICAgICAgICBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpLAogICAgICAgICAgaXNTdXBwb3J0ZWQgPSBmYWxzZTsKCiAgICAgIGlmIChkaXZbJ19fcHJvdG9fXyddICYmIChkaXZbJ19fcHJvdG9fXyddICE9PSBmb3JtWydfX3Byb3RvX18nXSkpIHsKICAgICAgICBpc1N1cHBvcnRlZCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGRpdiA9IGZvcm0gPSBudWxsOwoKICAgICAgcmV0dXJuIGlzU3VwcG9ydGVkOwogICAgfSkoKQogIH0sCgogIFNjcmlwdEZyYWdtZW50OiAnPHNjcmlwdFtePl0qPihbXFxTXFxzXSo/KTxcL3NjcmlwdFxccyo+JywKICBKU09ORmlsdGVyOiAvXlwvXCotc2VjdXJlLShbXHNcU10qKVwqXC9ccyokLywKCiAgZW1wdHlGdW5jdGlvbjogZnVuY3Rpb24oKSB7IH0sCgogIEs6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHggfQp9OwoKaWYgKFByb3RvdHlwZS5Ccm93c2VyLk1vYmlsZVNhZmFyaSkKICBQcm90b3R5cGUuQnJvd3NlckZlYXR1cmVzLlNwZWNpZmljRWxlbWVudEV4dGVuc2lvbnMgPSBmYWxzZTsKLyogQmFzZWQgb24gQWxleCBBcm5lbGwncyBpbmhlcml0YW5jZSBpbXBsZW1lbnRhdGlvbi4gKi8KCnZhciBDbGFzcyA9IChmdW5jdGlvbigpIHsKCiAgdmFyIElTX0RPTlRFTlVNX0JVR0dZID0gKGZ1bmN0aW9uKCl7CiAgICBmb3IgKHZhciBwIGluIHsgdG9TdHJpbmc6IDEgfSkgewogICAgICBpZiAocCA9PT0gJ3RvU3RyaW5nJykgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfSkoKTsKCiAgZnVuY3Rpb24gc3ViY2xhc3MoKSB7fTsKICBmdW5jdGlvbiBjcmVhdGUoKSB7CiAgICB2YXIgcGFyZW50ID0gbnVsbCwgcHJvcGVydGllcyA9ICRBKGFyZ3VtZW50cyk7CiAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24ocHJvcGVydGllc1swXSkpCiAgICAgIHBhcmVudCA9IHByb3BlcnRpZXMuc2hpZnQoKTsKCiAgICBmdW5jdGlvbiBrbGFzcygpIHsKICAgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgT2JqZWN0LmV4dGVuZChrbGFzcywgQ2xhc3MuTWV0aG9kcyk7CiAgICBrbGFzcy5zdXBlcmNsYXNzID0gcGFyZW50OwogICAga2xhc3Muc3ViY2xhc3NlcyA9IFtdOwoKICAgIGlmIChwYXJlbnQpIHsKICAgICAgc3ViY2xhc3MucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsKICAgICAga2xhc3MucHJvdG90eXBlID0gbmV3IHN1YmNsYXNzOwogICAgICBwYXJlbnQuc3ViY2xhc3Nlcy5wdXNoKGtsYXNzKTsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gcHJvcGVydGllcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykKICAgICAga2xhc3MuYWRkTWV0aG9kcyhwcm9wZXJ0aWVzW2ldKTsKCiAgICBpZiAoIWtsYXNzLnByb3RvdHlwZS5pbml0aWFsaXplKQogICAgICBrbGFzcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uOwoKICAgIGtsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGtsYXNzOwogICAgcmV0dXJuIGtsYXNzOwogIH0KCiAgZnVuY3Rpb24gYWRkTWV0aG9kcyhzb3VyY2UpIHsKICAgIHZhciBhbmNlc3RvciAgID0gdGhpcy5zdXBlcmNsYXNzICYmIHRoaXMuc3VwZXJjbGFzcy5wcm90b3R5cGUsCiAgICAgICAgcHJvcGVydGllcyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7CgogICAgaWYgKElTX0RPTlRFTlVNX0JVR0dZKSB7CiAgICAgIGlmIChzb3VyY2UudG9TdHJpbmcgIT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZykKICAgICAgICBwcm9wZXJ0aWVzLnB1c2goInRvU3RyaW5nIik7CiAgICAgIGlmIChzb3VyY2UudmFsdWVPZiAhPSBPYmplY3QucHJvdG90eXBlLnZhbHVlT2YpCiAgICAgICAgcHJvcGVydGllcy5wdXNoKCJ2YWx1ZU9mIik7CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHByb3BlcnRpZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHByb3BlcnR5ID0gcHJvcGVydGllc1tpXSwgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHldOwogICAgICBpZiAoYW5jZXN0b3IgJiYgT2JqZWN0LmlzRnVuY3Rpb24odmFsdWUpICYmCiAgICAgICAgICB2YWx1ZS5hcmd1bWVudE5hbWVzKClbMF0gPT0gIiRzdXBlciIpIHsKICAgICAgICB2YXIgbWV0aG9kID0gdmFsdWU7CiAgICAgICAgdmFsdWUgPSAoZnVuY3Rpb24obSkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gYW5jZXN0b3JbbV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfTsKICAgICAgICB9KShwcm9wZXJ0eSkud3JhcChtZXRob2QpOwoKICAgICAgICB2YWx1ZS52YWx1ZU9mID0gKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0aG9kLnZhbHVlT2YuY2FsbChtZXRob2QpOyB9OwogICAgICAgIH0pKG1ldGhvZCk7CgogICAgICAgIHZhbHVlLnRvU3RyaW5nID0gKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0aG9kLnRvU3RyaW5nLmNhbGwobWV0aG9kKTsgfTsKICAgICAgICB9KShtZXRob2QpOwogICAgICB9CiAgICAgIHRoaXMucHJvdG90eXBlW3Byb3BlcnR5XSA9IHZhbHVlOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgcmV0dXJuIHsKICAgIGNyZWF0ZTogY3JlYXRlLAogICAgTWV0aG9kczogewogICAgICBhZGRNZXRob2RzOiBhZGRNZXRob2RzCiAgICB9CiAgfTsKfSkoKTsKKGZ1bmN0aW9uKCkgewoKICB2YXIgX3RvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZywKICAgICAgX2hhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwKICAgICAgTlVMTF9UWVBFID0gJ051bGwnLAogICAgICBVTkRFRklORURfVFlQRSA9ICdVbmRlZmluZWQnLAogICAgICBCT09MRUFOX1RZUEUgPSAnQm9vbGVhbicsCiAgICAgIE5VTUJFUl9UWVBFID0gJ051bWJlcicsCiAgICAgIFNUUklOR19UWVBFID0gJ1N0cmluZycsCiAgICAgIE9CSkVDVF9UWVBFID0gJ09iamVjdCcsCiAgICAgIEZVTkNUSU9OX0NMQVNTID0gJ1tvYmplY3QgRnVuY3Rpb25dJywKICAgICAgQk9PTEVBTl9DTEFTUyA9ICdbb2JqZWN0IEJvb2xlYW5dJywKICAgICAgTlVNQkVSX0NMQVNTID0gJ1tvYmplY3QgTnVtYmVyXScsCiAgICAgIFNUUklOR19DTEFTUyA9ICdbb2JqZWN0IFN0cmluZ10nLAogICAgICBBUlJBWV9DTEFTUyA9ICdbb2JqZWN0IEFycmF5XScsCiAgICAgIERBVEVfQ0xBU1MgPSAnW29iamVjdCBEYXRlXScsCiAgICAgIE5BVElWRV9KU09OX1NUUklOR0lGWV9TVVBQT1JUID0gd2luZG93LkpTT04gJiYKICAgICAgICB0eXBlb2YgSlNPTi5zdHJpbmdpZnkgPT09ICdmdW5jdGlvbicgJiYKICAgICAgICBKU09OLnN0cmluZ2lmeSgwKSA9PT0gJzAnICYmCiAgICAgICAgdHlwZW9mIEpTT04uc3RyaW5naWZ5KFByb3RvdHlwZS5LKSA9PT0gJ3VuZGVmaW5lZCc7CgoKCiAgdmFyIERPTlRfRU5VTVMgPSBbJ3RvU3RyaW5nJywgJ3RvTG9jYWxlU3RyaW5nJywgJ3ZhbHVlT2YnLAogICAnaGFzT3duUHJvcGVydHknLCAnaXNQcm90b3R5cGVPZicsICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdjb25zdHJ1Y3RvciddOwoKICB2YXIgSVNfRE9OVEVOVU1fQlVHR1kgPSAoZnVuY3Rpb24oKXsKICAgIGZvciAodmFyIHAgaW4geyB0b1N0cmluZzogMSB9KSB7CiAgICAgIGlmIChwID09PSAndG9TdHJpbmcnKSByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9KSgpOwoKICBmdW5jdGlvbiBUeXBlKG8pIHsKICAgIHN3aXRjaChvKSB7CiAgICAgIGNhc2UgbnVsbDogcmV0dXJuIE5VTExfVFlQRTsKICAgICAgY2FzZSAodm9pZCAwKTogcmV0dXJuIFVOREVGSU5FRF9UWVBFOwogICAgfQogICAgdmFyIHR5cGUgPSB0eXBlb2YgbzsKICAgIHN3aXRjaCh0eXBlKSB7CiAgICAgIGNhc2UgJ2Jvb2xlYW4nOiByZXR1cm4gQk9PTEVBTl9UWVBFOwogICAgICBjYXNlICdudW1iZXInOiAgcmV0dXJuIE5VTUJFUl9UWVBFOwogICAgICBjYXNlICdzdHJpbmcnOiAgcmV0dXJuIFNUUklOR19UWVBFOwogICAgfQogICAgcmV0dXJuIE9CSkVDVF9UWVBFOwogIH0KCiAgZnVuY3Rpb24gZXh0ZW5kKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHsKICAgIGZvciAodmFyIHByb3BlcnR5IGluIHNvdXJjZSkKICAgICAgZGVzdGluYXRpb25bcHJvcGVydHldID0gc291cmNlW3Byb3BlcnR5XTsKICAgIHJldHVybiBkZXN0aW5hdGlvbjsKICB9CgogIGZ1bmN0aW9uIGluc3BlY3Qob2JqZWN0KSB7CiAgICB0cnkgewogICAgICBpZiAoaXNVbmRlZmluZWQob2JqZWN0KSkgcmV0dXJuICd1bmRlZmluZWQnOwogICAgICBpZiAob2JqZWN0ID09PSBudWxsKSByZXR1cm4gJ251bGwnOwogICAgICByZXR1cm4gb2JqZWN0Lmluc3BlY3QgPyBvYmplY3QuaW5zcGVjdCgpIDogU3RyaW5nKG9iamVjdCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlmIChlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcikgcmV0dXJuICcuLi4nOwogICAgICB0aHJvdyBlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdG9KU09OKHZhbHVlKSB7CiAgICByZXR1cm4gU3RyKCcnLCB7ICcnOiB2YWx1ZSB9LCBbXSk7CiAgfQoKICBmdW5jdGlvbiBTdHIoa2V5LCBob2xkZXIsIHN0YWNrKSB7CiAgICB2YXIgdmFsdWUgPSBob2xkZXJba2V5XTsKICAgIGlmIChUeXBlKHZhbHVlKSA9PT0gT0JKRUNUX1RZUEUgJiYgdHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICB2YWx1ZSA9IHZhbHVlLnRvSlNPTihrZXkpOwogICAgfQoKICAgIHZhciBfY2xhc3MgPSBfdG9TdHJpbmcuY2FsbCh2YWx1ZSk7CgogICAgc3dpdGNoIChfY2xhc3MpIHsKICAgICAgY2FzZSBOVU1CRVJfQ0xBU1M6CiAgICAgIGNhc2UgQk9PTEVBTl9DTEFTUzoKICAgICAgY2FzZSBTVFJJTkdfQ0xBU1M6CiAgICAgICAgdmFsdWUgPSB2YWx1ZS52YWx1ZU9mKCk7CiAgICB9CgogICAgc3dpdGNoICh2YWx1ZSkgewogICAgICBjYXNlIG51bGw6IHJldHVybiAnbnVsbCc7CiAgICAgIGNhc2UgdHJ1ZTogcmV0dXJuICd0cnVlJzsKICAgICAgY2FzZSBmYWxzZTogcmV0dXJuICdmYWxzZSc7CiAgICB9CgogICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICByZXR1cm4gdmFsdWUuaW5zcGVjdCh0cnVlKTsKICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICByZXR1cm4gaXNGaW5pdGUodmFsdWUpID8gU3RyaW5nKHZhbHVlKSA6ICdudWxsJzsKICAgICAgY2FzZSAnb2JqZWN0JzoKCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHN0YWNrLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoc3RhY2tbaV0gPT09IHZhbHVlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkN5Y2xpYyByZWZlcmVuY2UgdG8gJyIgKyB2YWx1ZSArICInIGluIG9iamVjdCIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzdGFjay5wdXNoKHZhbHVlKTsKCiAgICAgICAgdmFyIHBhcnRpYWwgPSBbXTsKICAgICAgICBpZiAoX2NsYXNzID09PSBBUlJBWV9DTEFTUykgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzdHIgPSBTdHIoaSwgdmFsdWUsIHN0YWNrKTsKICAgICAgICAgICAgcGFydGlhbC5wdXNoKHR5cGVvZiBzdHIgPT09ICd1bmRlZmluZWQnID8gJ251bGwnIDogc3RyKTsKICAgICAgICAgIH0KICAgICAgICAgIHBhcnRpYWwgPSAnWycgKyBwYXJ0aWFsLmpvaW4oJywnKSArICddJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXSwgc3RyID0gU3RyKGtleSwgdmFsdWUsIHN0YWNrKTsKICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHIgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgIHBhcnRpYWwucHVzaChrZXkuaW5zcGVjdCh0cnVlKSsgJzonICsgc3RyKTsKICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHBhcnRpYWwgPSAneycgKyBwYXJ0aWFsLmpvaW4oJywnKSArICd9JzsKICAgICAgICB9CiAgICAgICAgc3RhY2sucG9wKCk7CiAgICAgICAgcmV0dXJuIHBhcnRpYWw7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzdHJpbmdpZnkob2JqZWN0KSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqZWN0KTsKICB9CgogIGZ1bmN0aW9uIHRvUXVlcnlTdHJpbmcob2JqZWN0KSB7CiAgICByZXR1cm4gJEgob2JqZWN0KS50b1F1ZXJ5U3RyaW5nKCk7CiAgfQoKICBmdW5jdGlvbiB0b0hUTUwob2JqZWN0KSB7CiAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC50b0hUTUwgPyBvYmplY3QudG9IVE1MKCkgOiBTdHJpbmcuaW50ZXJwcmV0KG9iamVjdCk7CiAgfQoKICBmdW5jdGlvbiBrZXlzKG9iamVjdCkgewogICAgaWYgKFR5cGUob2JqZWN0KSAhPT0gT0JKRUNUX1RZUEUpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyB9CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7CiAgICAgIGlmIChfaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkKICAgICAgICByZXN1bHRzLnB1c2gocHJvcGVydHkpOwogICAgfQoKICAgIGlmIChJU19ET05URU5VTV9CVUdHWSkgewogICAgICBmb3IgKHZhciBpID0gMDsgcHJvcGVydHkgPSBET05UX0VOVU1TW2ldOyBpKyspIHsKICAgICAgICBpZiAoX2hhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpCiAgICAgICAgICByZXN1bHRzLnB1c2gocHJvcGVydHkpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiB2YWx1ZXMob2JqZWN0KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KQogICAgICByZXN1bHRzLnB1c2gob2JqZWN0W3Byb3BlcnR5XSk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIGNsb25lKG9iamVjdCkgewogICAgcmV0dXJuIGV4dGVuZCh7IH0sIG9iamVjdCk7CiAgfQoKICBmdW5jdGlvbiBpc0VsZW1lbnQob2JqZWN0KSB7CiAgICByZXR1cm4gISEob2JqZWN0ICYmIG9iamVjdC5ub2RlVHlwZSA9PSAxKTsKICB9CgogIGZ1bmN0aW9uIGlzQXJyYXkob2JqZWN0KSB7CiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gQVJSQVlfQ0xBU1M7CiAgfQoKICB2YXIgaGFzTmF0aXZlSXNBcnJheSA9ICh0eXBlb2YgQXJyYXkuaXNBcnJheSA9PSAnZnVuY3Rpb24nKQogICAgJiYgQXJyYXkuaXNBcnJheShbXSkgJiYgIUFycmF5LmlzQXJyYXkoe30pOwoKICBpZiAoaGFzTmF0aXZlSXNBcnJheSkgewogICAgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CiAgfQoKICBmdW5jdGlvbiBpc0hhc2gob2JqZWN0KSB7CiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgSGFzaDsKICB9CgogIGZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqZWN0KSB7CiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gRlVOQ1RJT05fQ0xBU1M7CiAgfQoKICBmdW5jdGlvbiBpc1N0cmluZyhvYmplY3QpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmplY3QpID09PSBTVFJJTkdfQ0xBU1M7CiAgfQoKICBmdW5jdGlvbiBpc051bWJlcihvYmplY3QpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmplY3QpID09PSBOVU1CRVJfQ0xBU1M7CiAgfQoKICBmdW5jdGlvbiBpc0RhdGUob2JqZWN0KSB7CiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gREFURV9DTEFTUzsKICB9CgogIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKG9iamVjdCkgewogICAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICJ1bmRlZmluZWQiOwogIH0KCiAgZXh0ZW5kKE9iamVjdCwgewogICAgZXh0ZW5kOiAgICAgICAgZXh0ZW5kLAogICAgaW5zcGVjdDogICAgICAgaW5zcGVjdCwKICAgIHRvSlNPTjogICAgICAgIE5BVElWRV9KU09OX1NUUklOR0lGWV9TVVBQT1JUID8gc3RyaW5naWZ5IDogdG9KU09OLAogICAgdG9RdWVyeVN0cmluZzogdG9RdWVyeVN0cmluZywKICAgIHRvSFRNTDogICAgICAgIHRvSFRNTCwKICAgIGtleXM6ICAgICAgICAgIE9iamVjdC5rZXlzIHx8IGtleXMsCiAgICB2YWx1ZXM6ICAgICAgICB2YWx1ZXMsCiAgICBjbG9uZTogICAgICAgICBjbG9uZSwKICAgIGlzRWxlbWVudDogICAgIGlzRWxlbWVudCwKICAgIGlzQXJyYXk6ICAgICAgIGlzQXJyYXksCiAgICBpc0hhc2g6ICAgICAgICBpc0hhc2gsCiAgICBpc0Z1bmN0aW9uOiAgICBpc0Z1bmN0aW9uLAogICAgaXNTdHJpbmc6ICAgICAgaXNTdHJpbmcsCiAgICBpc051bWJlcjogICAgICBpc051bWJlciwKICAgIGlzRGF0ZTogICAgICAgIGlzRGF0ZSwKICAgIGlzVW5kZWZpbmVkOiAgIGlzVW5kZWZpbmVkCiAgfSk7Cn0pKCk7Ck9iamVjdC5leHRlbmQoRnVuY3Rpb24ucHJvdG90eXBlLCAoZnVuY3Rpb24oKSB7CiAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKICBmdW5jdGlvbiB1cGRhdGUoYXJyYXksIGFyZ3MpIHsKICAgIHZhciBhcnJheUxlbmd0aCA9IGFycmF5Lmxlbmd0aCwgbGVuZ3RoID0gYXJncy5sZW5ndGg7CiAgICB3aGlsZSAobGVuZ3RoLS0pIGFycmF5W2FycmF5TGVuZ3RoICsgbGVuZ3RoXSA9IGFyZ3NbbGVuZ3RoXTsKICAgIHJldHVybiBhcnJheTsKICB9CgogIGZ1bmN0aW9uIG1lcmdlKGFycmF5LCBhcmdzKSB7CiAgICBhcnJheSA9IHNsaWNlLmNhbGwoYXJyYXksIDApOwogICAgcmV0dXJuIHVwZGF0ZShhcnJheSwgYXJncyk7CiAgfQoKICBmdW5jdGlvbiBhcmd1bWVudE5hbWVzKCkgewogICAgdmFyIG5hbWVzID0gdGhpcy50b1N0cmluZygpLm1hdGNoKC9eW1xzXChdKmZ1bmN0aW9uW14oXSpcKChbXildKilcKS8pWzFdCiAgICAgIC5yZXBsYWNlKC9cL1wvLio/W1xyXG5dfFwvXCooPzoufFtcclxuXSkqP1wqXC8vZywgJycpCiAgICAgIC5yZXBsYWNlKC9ccysvZywgJycpLnNwbGl0KCcsJyk7CiAgICByZXR1cm4gbmFtZXMubGVuZ3RoID09IDEgJiYgIW5hbWVzWzBdID8gW10gOiBuYW1lczsKICB9CgoKICBmdW5jdGlvbiBiaW5kKGNvbnRleHQpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMiAmJiBPYmplY3QuaXNVbmRlZmluZWQoYXJndW1lbnRzWzBdKSkKICAgICAgcmV0dXJuIHRoaXM7CgogICAgaWYgKCFPYmplY3QuaXNGdW5jdGlvbih0aGlzKSkKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIG9iamVjdCBpcyBub3QgY2FsbGFibGUuIik7CgogICAgdmFyIG5vcCA9IGZ1bmN0aW9uKCkge307CiAgICB2YXIgX19tZXRob2QgPSB0aGlzLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoKICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgYSA9IG1lcmdlKGFyZ3MsIGFyZ3VtZW50cyk7CiAgICAgIHZhciBjID0gdGhpcyBpbnN0YW5jZW9mIGJvdW5kID8gdGhpcyA6IGNvbnRleHQ7CiAgICAgIHJldHVybiBfX21ldGhvZC5hcHBseShjLCBhKTsKICAgIH07CgogICAgbm9wLnByb3RvdHlwZSAgID0gdGhpcy5wcm90b3R5cGU7CiAgICBib3VuZC5wcm90b3R5cGUgPSBuZXcgbm9wKCk7CgogICAgcmV0dXJuIGJvdW5kOwogIH0KCiAgZnVuY3Rpb24gYmluZEFzRXZlbnRMaXN0ZW5lcihjb250ZXh0KSB7CiAgICB2YXIgX19tZXRob2QgPSB0aGlzLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIHZhciBhID0gdXBkYXRlKFtldmVudCB8fCB3aW5kb3cuZXZlbnRdLCBhcmdzKTsKICAgICAgcmV0dXJuIF9fbWV0aG9kLmFwcGx5KGNvbnRleHQsIGEpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY3VycnkoKSB7CiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzOwogICAgdmFyIF9fbWV0aG9kID0gdGhpcywgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGEgPSBtZXJnZShhcmdzLCBhcmd1bWVudHMpOwogICAgICByZXR1cm4gX19tZXRob2QuYXBwbHkodGhpcywgYSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBkZWxheSh0aW1lb3V0KSB7CiAgICB2YXIgX19tZXRob2QgPSB0aGlzLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgdGltZW91dCA9IHRpbWVvdXQgKiAxMDAwOwogICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX19tZXRob2QuYXBwbHkoX19tZXRob2QsIGFyZ3MpOwogICAgfSwgdGltZW91dCk7CiAgfQoKICBmdW5jdGlvbiBkZWZlcigpIHsKICAgIHZhciBhcmdzID0gdXBkYXRlKFswLjAxXSwgYXJndW1lbnRzKTsKICAgIHJldHVybiB0aGlzLmRlbGF5LmFwcGx5KHRoaXMsIGFyZ3MpOwogIH0KCiAgZnVuY3Rpb24gd3JhcCh3cmFwcGVyKSB7CiAgICB2YXIgX19tZXRob2QgPSB0aGlzOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICB2YXIgYSA9IHVwZGF0ZShbX19tZXRob2QuYmluZCh0aGlzKV0sIGFyZ3VtZW50cyk7CiAgICAgIHJldHVybiB3cmFwcGVyLmFwcGx5KHRoaXMsIGEpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbWV0aG9kaXplKCkgewogICAgaWYgKHRoaXMuX21ldGhvZGl6ZWQpIHJldHVybiB0aGlzLl9tZXRob2RpemVkOwogICAgdmFyIF9fbWV0aG9kID0gdGhpczsKICAgIHJldHVybiB0aGlzLl9tZXRob2RpemVkID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhID0gdXBkYXRlKFt0aGlzXSwgYXJndW1lbnRzKTsKICAgICAgcmV0dXJuIF9fbWV0aG9kLmFwcGx5KG51bGwsIGEpOwogICAgfTsKICB9CgogIHZhciBleHRlbnNpb25zID0gewogICAgYXJndW1lbnROYW1lczogICAgICAgYXJndW1lbnROYW1lcywKICAgIGJpbmRBc0V2ZW50TGlzdGVuZXI6IGJpbmRBc0V2ZW50TGlzdGVuZXIsCiAgICBjdXJyeTogICAgICAgICAgICAgICBjdXJyeSwKICAgIGRlbGF5OiAgICAgICAgICAgICAgIGRlbGF5LAogICAgZGVmZXI6ICAgICAgICAgICAgICAgZGVmZXIsCiAgICB3cmFwOiAgICAgICAgICAgICAgICB3cmFwLAogICAgbWV0aG9kaXplOiAgICAgICAgICAgbWV0aG9kaXplCiAgfTsKCiAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkKICAgIGV4dGVuc2lvbnMuYmluZCA9IGJpbmQ7CgogIHJldHVybiBleHRlbnNpb25zOwp9KSgpKTsKCgoKKGZ1bmN0aW9uKHByb3RvKSB7CgoKICBmdW5jdGlvbiB0b0lTT1N0cmluZygpIHsKICAgIHJldHVybiB0aGlzLmdldFVUQ0Z1bGxZZWFyKCkgKyAnLScgKwogICAgICAodGhpcy5nZXRVVENNb250aCgpICsgMSkudG9QYWRkZWRTdHJpbmcoMikgKyAnLScgKwogICAgICB0aGlzLmdldFVUQ0RhdGUoKS50b1BhZGRlZFN0cmluZygyKSArICdUJyArCiAgICAgIHRoaXMuZ2V0VVRDSG91cnMoKS50b1BhZGRlZFN0cmluZygyKSArICc6JyArCiAgICAgIHRoaXMuZ2V0VVRDTWludXRlcygpLnRvUGFkZGVkU3RyaW5nKDIpICsgJzonICsKICAgICAgdGhpcy5nZXRVVENTZWNvbmRzKCkudG9QYWRkZWRTdHJpbmcoMikgKyAnWic7CiAgfQoKCiAgZnVuY3Rpb24gdG9KU09OKCkgewogICAgcmV0dXJuIHRoaXMudG9JU09TdHJpbmcoKTsKICB9CgogIGlmICghcHJvdG8udG9JU09TdHJpbmcpIHByb3RvLnRvSVNPU3RyaW5nID0gdG9JU09TdHJpbmc7CiAgaWYgKCFwcm90by50b0pTT04pIHByb3RvLnRvSlNPTiA9IHRvSlNPTjsKCn0pKERhdGUucHJvdG90eXBlKTsKCgpSZWdFeHAucHJvdG90eXBlLm1hdGNoID0gUmVnRXhwLnByb3RvdHlwZS50ZXN0OwoKUmVnRXhwLmVzY2FwZSA9IGZ1bmN0aW9uKHN0cikgewogIHJldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xdXC9cXF0pL2csICdcXCQxJyk7Cn07CnZhciBQZXJpb2RpY2FsRXhlY3V0ZXIgPSBDbGFzcy5jcmVhdGUoewogIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBmcmVxdWVuY3kpIHsKICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgIHRoaXMuZnJlcXVlbmN5ID0gZnJlcXVlbmN5OwogICAgdGhpcy5jdXJyZW50bHlFeGVjdXRpbmcgPSBmYWxzZTsKCiAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soKTsKICB9LAoKICByZWdpc3RlckNhbGxiYWNrOiBmdW5jdGlvbigpIHsKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCh0aGlzLm9uVGltZXJFdmVudC5iaW5kKHRoaXMpLCB0aGlzLmZyZXF1ZW5jeSAqIDEwMDApOwogIH0sCgogIGV4ZWN1dGU6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5jYWxsYmFjayh0aGlzKTsKICB9LAoKICBzdG9wOiBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy50aW1lcikgcmV0dXJuOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIHRoaXMudGltZXIgPSBudWxsOwogIH0sCgogIG9uVGltZXJFdmVudDogZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuY3VycmVudGx5RXhlY3V0aW5nKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5jdXJyZW50bHlFeGVjdXRpbmcgPSB0cnVlOwogICAgICAgIHRoaXMuZXhlY3V0ZSgpOwogICAgICAgIHRoaXMuY3VycmVudGx5RXhlY3V0aW5nID0gZmFsc2U7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIHRoaXMuY3VycmVudGx5RXhlY3V0aW5nID0gZmFsc2U7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQogICAgfQogIH0KfSk7Ck9iamVjdC5leHRlbmQoU3RyaW5nLCB7CiAgaW50ZXJwcmV0OiBmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IFN0cmluZyh2YWx1ZSk7CiAgfSwKICBzcGVjaWFsQ2hhcjogewogICAgJ1xiJzogJ1xcYicsCiAgICAnXHQnOiAnXFx0JywKICAgICdcbic6ICdcXG4nLAogICAgJ1xmJzogJ1xcZicsCiAgICAnXHInOiAnXFxyJywKICAgICdcXCc6ICdcXFxcJwogIH0KfSk7CgpPYmplY3QuZXh0ZW5kKFN0cmluZy5wcm90b3R5cGUsIChmdW5jdGlvbigpIHsKICB2YXIgTkFUSVZFX0pTT05fUEFSU0VfU1VQUE9SVCA9IHdpbmRvdy5KU09OICYmCiAgICB0eXBlb2YgSlNPTi5wYXJzZSA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgSlNPTi5wYXJzZSgneyJ0ZXN0IjogdHJ1ZX0nKS50ZXN0OwoKICBmdW5jdGlvbiBwcmVwYXJlUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQpIHsKICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihyZXBsYWNlbWVudCkpIHJldHVybiByZXBsYWNlbWVudDsKICAgIHZhciB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShyZXBsYWNlbWVudCk7CiAgICByZXR1cm4gZnVuY3Rpb24obWF0Y2gpIHsgcmV0dXJuIHRlbXBsYXRlLmV2YWx1YXRlKG1hdGNoKSB9OwogIH0KCiAgZnVuY3Rpb24gaXNOb25FbXB0eVJlZ0V4cChyZWdleHApIHsKICAgIHJldHVybiByZWdleHAuc291cmNlICYmIHJlZ2V4cC5zb3VyY2UgIT09ICcoPzopJzsKICB9CgoKICBmdW5jdGlvbiBnc3ViKHBhdHRlcm4sIHJlcGxhY2VtZW50KSB7CiAgICB2YXIgcmVzdWx0ID0gJycsIHNvdXJjZSA9IHRoaXMsIG1hdGNoOwogICAgcmVwbGFjZW1lbnQgPSBwcmVwYXJlUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQpOwoKICAgIGlmIChPYmplY3QuaXNTdHJpbmcocGF0dGVybikpCiAgICAgIHBhdHRlcm4gPSBSZWdFeHAuZXNjYXBlKHBhdHRlcm4pOwoKICAgIGlmICghKHBhdHRlcm4ubGVuZ3RoIHx8IGlzTm9uRW1wdHlSZWdFeHAocGF0dGVybikpKSB7CiAgICAgIHJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnQoJycpOwogICAgICByZXR1cm4gcmVwbGFjZW1lbnQgKyBzb3VyY2Uuc3BsaXQoJycpLmpvaW4ocmVwbGFjZW1lbnQpICsgcmVwbGFjZW1lbnQ7CiAgICB9CgogICAgd2hpbGUgKHNvdXJjZS5sZW5ndGggPiAwKSB7CiAgICAgIG1hdGNoID0gc291cmNlLm1hdGNoKHBhdHRlcm4pCiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFswXS5sZW5ndGggPiAwKSB7CiAgICAgICAgcmVzdWx0ICs9IHNvdXJjZS5zbGljZSgwLCBtYXRjaC5pbmRleCk7CiAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5pbnRlcnByZXQocmVwbGFjZW1lbnQobWF0Y2gpKTsKICAgICAgICBzb3VyY2UgID0gc291cmNlLnNsaWNlKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgKz0gc291cmNlLCBzb3VyY2UgPSAnJzsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIHN1YihwYXR0ZXJuLCByZXBsYWNlbWVudCwgY291bnQpIHsKICAgIHJlcGxhY2VtZW50ID0gcHJlcGFyZVJlcGxhY2VtZW50KHJlcGxhY2VtZW50KTsKICAgIGNvdW50ID0gT2JqZWN0LmlzVW5kZWZpbmVkKGNvdW50KSA/IDEgOiBjb3VudDsKCiAgICByZXR1cm4gdGhpcy5nc3ViKHBhdHRlcm4sIGZ1bmN0aW9uKG1hdGNoKSB7CiAgICAgIGlmICgtLWNvdW50IDwgMCkgcmV0dXJuIG1hdGNoWzBdOwogICAgICByZXR1cm4gcmVwbGFjZW1lbnQobWF0Y2gpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBzY2FuKHBhdHRlcm4sIGl0ZXJhdG9yKSB7CiAgICB0aGlzLmdzdWIocGF0dGVybiwgaXRlcmF0b3IpOwogICAgcmV0dXJuIFN0cmluZyh0aGlzKTsKICB9CgogIGZ1bmN0aW9uIHRydW5jYXRlKGxlbmd0aCwgdHJ1bmNhdGlvbikgewogICAgbGVuZ3RoID0gbGVuZ3RoIHx8IDMwOwogICAgdHJ1bmNhdGlvbiA9IE9iamVjdC5pc1VuZGVmaW5lZCh0cnVuY2F0aW9uKSA/ICcuLi4nIDogdHJ1bmNhdGlvbjsKICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IGxlbmd0aCA/CiAgICAgIHRoaXMuc2xpY2UoMCwgbGVuZ3RoIC0gdHJ1bmNhdGlvbi5sZW5ndGgpICsgdHJ1bmNhdGlvbiA6IFN0cmluZyh0aGlzKTsKICB9CgogIGZ1bmN0aW9uIHN0cmlwKCkgewogICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvXlxzKy8sICcnKS5yZXBsYWNlKC9ccyskLywgJycpOwogIH0KCiAgZnVuY3Rpb24gc3RyaXBUYWdzKCkgewogICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvPFx3KyhccysoIlteIl0qInwnW14nXSonfFtePl0pKyk/Pnw8XC9cdys+L2dpLCAnJyk7CiAgfQoKICBmdW5jdGlvbiBzdHJpcFNjcmlwdHMoKSB7CiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKG5ldyBSZWdFeHAoUHJvdG90eXBlLlNjcmlwdEZyYWdtZW50LCAnaW1nJyksICcnKTsKICB9CgogIGZ1bmN0aW9uIGV4dHJhY3RTY3JpcHRzKCkgewogICAgdmFyIG1hdGNoQWxsID0gbmV3IFJlZ0V4cChQcm90b3R5cGUuU2NyaXB0RnJhZ21lbnQsICdpbWcnKSwKICAgICAgICBtYXRjaE9uZSA9IG5ldyBSZWdFeHAoUHJvdG90eXBlLlNjcmlwdEZyYWdtZW50LCAnaW0nKTsKICAgIHJldHVybiAodGhpcy5tYXRjaChtYXRjaEFsbCkgfHwgW10pLm1hcChmdW5jdGlvbihzY3JpcHRUYWcpIHsKICAgICAgcmV0dXJuIChzY3JpcHRUYWcubWF0Y2gobWF0Y2hPbmUpIHx8IFsnJywgJyddKVsxXTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZXZhbFNjcmlwdHMoKSB7CiAgICByZXR1cm4gdGhpcy5leHRyYWN0U2NyaXB0cygpLm1hcChmdW5jdGlvbihzY3JpcHQpIHsgcmV0dXJuIGV2YWwoc2NyaXB0KTsgfSk7CiAgfQoKICBmdW5jdGlvbiBlc2NhcGVIVE1MKCkgewogICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpOwogIH0KCiAgZnVuY3Rpb24gdW5lc2NhcGVIVE1MKCkgewogICAgcmV0dXJuIHRoaXMuc3RyaXBUYWdzKCkucmVwbGFjZSgvJmx0Oy9nLCc8JykucmVwbGFjZSgvJmd0Oy9nLCc+JykucmVwbGFjZSgvJmFtcDsvZywnJicpOwogIH0KCgogIGZ1bmN0aW9uIHRvUXVlcnlQYXJhbXMoc2VwYXJhdG9yKSB7CiAgICB2YXIgbWF0Y2ggPSB0aGlzLnN0cmlwKCkubWF0Y2goLyhbXj8jXSopKCMuKik/JC8pOwogICAgaWYgKCFtYXRjaCkgcmV0dXJuIHsgfTsKCiAgICByZXR1cm4gbWF0Y2hbMV0uc3BsaXQoc2VwYXJhdG9yIHx8ICcmJykuaW5qZWN0KHsgfSwgZnVuY3Rpb24oaGFzaCwgcGFpcikgewogICAgICBpZiAoKHBhaXIgPSBwYWlyLnNwbGl0KCc9JykpWzBdKSB7CiAgICAgICAgdmFyIGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyLnNoaWZ0KCkpLAogICAgICAgICAgICB2YWx1ZSA9IHBhaXIubGVuZ3RoID4gMSA/IHBhaXIuam9pbignPScpIDogcGFpclswXTsKCiAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgdmFsdWUgPSB2YWx1ZS5nc3ViKCcrJywgJyAnKTsKICAgICAgICAgIHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTsKICAgICAgICB9CgogICAgICAgIGlmIChrZXkgaW4gaGFzaCkgewogICAgICAgICAgaWYgKCFPYmplY3QuaXNBcnJheShoYXNoW2tleV0pKSBoYXNoW2tleV0gPSBbaGFzaFtrZXldXTsKICAgICAgICAgIGhhc2hba2V5XS5wdXNoKHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBoYXNoW2tleV0gPSB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gaGFzaDsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gdG9BcnJheSgpIHsKICAgIHJldHVybiB0aGlzLnNwbGl0KCcnKTsKICB9CgogIGZ1bmN0aW9uIHN1Y2MoKSB7CiAgICByZXR1cm4gdGhpcy5zbGljZSgwLCB0aGlzLmxlbmd0aCAtIDEpICsKICAgICAgU3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLmNoYXJDb2RlQXQodGhpcy5sZW5ndGggLSAxKSArIDEpOwogIH0KCiAgZnVuY3Rpb24gdGltZXMoY291bnQpIHsKICAgIHJldHVybiBjb3VudCA8IDEgPyAnJyA6IG5ldyBBcnJheShjb3VudCArIDEpLmpvaW4odGhpcyk7CiAgfQoKICBmdW5jdGlvbiBjYW1lbGl6ZSgpIHsKICAgIHJldHVybiB0aGlzLnJlcGxhY2UoLy0rKC4pPy9nLCBmdW5jdGlvbihtYXRjaCwgY2hyKSB7CiAgICAgIHJldHVybiBjaHIgPyBjaHIudG9VcHBlckNhc2UoKSA6ICcnOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBjYXBpdGFsaXplKCkgewogICAgcmV0dXJuIHRoaXMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0aGlzLnN1YnN0cmluZygxKS50b0xvd2VyQ2FzZSgpOwogIH0KCiAgZnVuY3Rpb24gdW5kZXJzY29yZSgpIHsKICAgIHJldHVybiB0aGlzLnJlcGxhY2UoLzo6L2csICcvJykKICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhbQS1aXSspKFtBLVpdW2Etel0pL2csICckMV8kMicpCiAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oW2EtelxkXSkoW0EtWl0pL2csICckMV8kMicpCiAgICAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csICdfJykKICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCk7CiAgfQoKICBmdW5jdGlvbiBkYXNoZXJpemUoKSB7CiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9fL2csICctJyk7CiAgfQoKICBmdW5jdGlvbiBpbnNwZWN0KHVzZURvdWJsZVF1b3RlcykgewogICAgdmFyIGVzY2FwZWRTdHJpbmcgPSB0aGlzLnJlcGxhY2UoL1tceDAwLVx4MWZcXF0vZywgZnVuY3Rpb24oY2hhcmFjdGVyKSB7CiAgICAgIGlmIChjaGFyYWN0ZXIgaW4gU3RyaW5nLnNwZWNpYWxDaGFyKSB7CiAgICAgICAgcmV0dXJuIFN0cmluZy5zcGVjaWFsQ2hhcltjaGFyYWN0ZXJdOwogICAgICB9CiAgICAgIHJldHVybiAnXFx1MDAnICsgY2hhcmFjdGVyLmNoYXJDb2RlQXQoKS50b1BhZGRlZFN0cmluZygyLCAxNik7CiAgICB9KTsKICAgIGlmICh1c2VEb3VibGVRdW90ZXMpIHJldHVybiAnIicgKyBlc2NhcGVkU3RyaW5nLnJlcGxhY2UoLyIvZywgJ1xcIicpICsgJyInOwogICAgcmV0dXJuICInIiArIGVzY2FwZWRTdHJpbmcucmVwbGFjZSgvJy9nLCAnXFxcJycpICsgIiciOwogIH0KCiAgZnVuY3Rpb24gdW5maWx0ZXJKU09OKGZpbHRlcikgewogICAgcmV0dXJuIHRoaXMucmVwbGFjZShmaWx0ZXIgfHwgUHJvdG90eXBlLkpTT05GaWx0ZXIsICckMScpOwogIH0KCiAgZnVuY3Rpb24gaXNKU09OKCkgewogICAgdmFyIHN0ciA9IHRoaXM7CiAgICBpZiAoc3RyLmJsYW5rKCkpIHJldHVybiBmYWxzZTsKICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csICdAJyk7CiAgICBzdHIgPSBzdHIucmVwbGFjZSgvIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2csICddJyk7CiAgICBzdHIgPSBzdHIucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCAnJyk7CiAgICByZXR1cm4gKC9eW1xdLDp7fVxzXSokLykudGVzdChzdHIpOwogIH0KCiAgZnVuY3Rpb24gZXZhbEpTT04oc2FuaXRpemUpIHsKICAgIHZhciBqc29uID0gdGhpcy51bmZpbHRlckpTT04oKSwKICAgICAgICBjeCA9IC9bXHUwMDAwXHUwMGFkXHUwNjAwLVx1MDYwNFx1MDcwZlx1MTdiNFx1MTdiNVx1MjAwYy1cdTIwMGZcdTIwMjgtXHUyMDJmXHUyMDYwLVx1MjA2Zlx1ZmVmZlx1ZmZmMC1cdWZmZmZdL2c7CiAgICBpZiAoY3gudGVzdChqc29uKSkgewogICAgICBqc29uID0ganNvbi5yZXBsYWNlKGN4LCBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiAnXFx1JyArICgnMDAwMCcgKyBhLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7CiAgICAgIH0pOwogICAgfQogICAgdHJ5IHsKICAgICAgaWYgKCFzYW5pdGl6ZSB8fCBqc29uLmlzSlNPTigpKSByZXR1cm4gZXZhbCgnKCcgKyBqc29uICsgJyknKTsKICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdCYWRseSBmb3JtZWQgSlNPTiBzdHJpbmc6ICcgKyB0aGlzLmluc3BlY3QoKSk7CiAgfQoKICBmdW5jdGlvbiBwYXJzZUpTT04oKSB7CiAgICB2YXIganNvbiA9IHRoaXMudW5maWx0ZXJKU09OKCk7CiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTsKICB9CgogIGZ1bmN0aW9uIGluY2x1ZGUocGF0dGVybikgewogICAgcmV0dXJuIHRoaXMuaW5kZXhPZihwYXR0ZXJuKSA+IC0xOwogIH0KCiAgZnVuY3Rpb24gc3RhcnRzV2l0aChwYXR0ZXJuLCBwb3NpdGlvbikgewogICAgcG9zaXRpb24gPSBPYmplY3QuaXNOdW1iZXIocG9zaXRpb24pID8gcG9zaXRpb24gOiAwOwogICAgcmV0dXJuIHRoaXMubGFzdEluZGV4T2YocGF0dGVybiwgcG9zaXRpb24pID09PSBwb3NpdGlvbjsKICB9CgogIGZ1bmN0aW9uIGVuZHNXaXRoKHBhdHRlcm4sIHBvc2l0aW9uKSB7CiAgICBwYXR0ZXJuID0gU3RyaW5nKHBhdHRlcm4pOwogICAgcG9zaXRpb24gPSBPYmplY3QuaXNOdW1iZXIocG9zaXRpb24pID8gcG9zaXRpb24gOiB0aGlzLmxlbmd0aDsKICAgIGlmIChwb3NpdGlvbiA8IDApIHBvc2l0aW9uID0gMDsKICAgIGlmIChwb3NpdGlvbiA+IHRoaXMubGVuZ3RoKSBwb3NpdGlvbiA9IHRoaXMubGVuZ3RoOwogICAgdmFyIGQgPSBwb3NpdGlvbiAtIHBhdHRlcm4ubGVuZ3RoOwogICAgcmV0dXJuIGQgPj0gMCAmJiB0aGlzLmluZGV4T2YocGF0dGVybiwgZCkgPT09IGQ7CiAgfQoKICBmdW5jdGlvbiBlbXB0eSgpIHsKICAgIHJldHVybiB0aGlzID09ICcnOwogIH0KCiAgZnVuY3Rpb24gYmxhbmsoKSB7CiAgICByZXR1cm4gL15ccyokLy50ZXN0KHRoaXMpOwogIH0KCiAgZnVuY3Rpb24gaW50ZXJwb2xhdGUob2JqZWN0LCBwYXR0ZXJuKSB7CiAgICByZXR1cm4gbmV3IFRlbXBsYXRlKHRoaXMsIHBhdHRlcm4pLmV2YWx1YXRlKG9iamVjdCk7CiAgfQoKICByZXR1cm4gewogICAgZ3N1YjogICAgICAgICAgIGdzdWIsCiAgICBzdWI6ICAgICAgICAgICAgc3ViLAogICAgc2NhbjogICAgICAgICAgIHNjYW4sCiAgICB0cnVuY2F0ZTogICAgICAgdHJ1bmNhdGUsCiAgICBzdHJpcDogICAgICAgICAgU3RyaW5nLnByb3RvdHlwZS50cmltIHx8IHN0cmlwLAogICAgc3RyaXBUYWdzOiAgICAgIHN0cmlwVGFncywKICAgIHN0cmlwU2NyaXB0czogICBzdHJpcFNjcmlwdHMsCiAgICBleHRyYWN0U2NyaXB0czogZXh0cmFjdFNjcmlwdHMsCiAgICBldmFsU2NyaXB0czogICAgZXZhbFNjcmlwdHMsCiAgICBlc2NhcGVIVE1MOiAgICAgZXNjYXBlSFRNTCwKICAgIHVuZXNjYXBlSFRNTDogICB1bmVzY2FwZUhUTUwsCiAgICB0b1F1ZXJ5UGFyYW1zOiAgdG9RdWVyeVBhcmFtcywKICAgIHBhcnNlUXVlcnk6ICAgICB0b1F1ZXJ5UGFyYW1zLAogICAgdG9BcnJheTogICAgICAgIHRvQXJyYXksCiAgICBzdWNjOiAgICAgICAgICAgc3VjYywKICAgIHRpbWVzOiAgICAgICAgICB0aW1lcywKICAgIGNhbWVsaXplOiAgICAgICBjYW1lbGl6ZSwKICAgIGNhcGl0YWxpemU6ICAgICBjYXBpdGFsaXplLAogICAgdW5kZXJzY29yZTogICAgIHVuZGVyc2NvcmUsCiAgICBkYXNoZXJpemU6ICAgICAgZGFzaGVyaXplLAogICAgaW5zcGVjdDogICAgICAgIGluc3BlY3QsCiAgICB1bmZpbHRlckpTT046ICAgdW5maWx0ZXJKU09OLAogICAgaXNKU09OOiAgICAgICAgIGlzSlNPTiwKICAgIGV2YWxKU09OOiAgICAgICBOQVRJVkVfSlNPTl9QQVJTRV9TVVBQT1JUID8gcGFyc2VKU09OIDogZXZhbEpTT04sCiAgICBpbmNsdWRlOiAgICAgICAgaW5jbHVkZSwKICAgIHN0YXJ0c1dpdGg6ICAgICBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGggfHwgc3RhcnRzV2l0aCwKICAgIGVuZHNXaXRoOiAgICAgICBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoIHx8IGVuZHNXaXRoLAogICAgZW1wdHk6ICAgICAgICAgIGVtcHR5LAogICAgYmxhbms6ICAgICAgICAgIGJsYW5rLAogICAgaW50ZXJwb2xhdGU6ICAgIGludGVycG9sYXRlCiAgfTsKfSkoKSk7Cgp2YXIgVGVtcGxhdGUgPSBDbGFzcy5jcmVhdGUoewogIGluaXRpYWxpemU6IGZ1bmN0aW9uKHRlbXBsYXRlLCBwYXR0ZXJuKSB7CiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGUudG9TdHJpbmcoKTsKICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm4gfHwgVGVtcGxhdGUuUGF0dGVybjsKICB9LAoKICBldmFsdWF0ZTogZnVuY3Rpb24ob2JqZWN0KSB7CiAgICBpZiAob2JqZWN0ICYmIE9iamVjdC5pc0Z1bmN0aW9uKG9iamVjdC50b1RlbXBsYXRlUmVwbGFjZW1lbnRzKSkKICAgICAgb2JqZWN0ID0gb2JqZWN0LnRvVGVtcGxhdGVSZXBsYWNlbWVudHMoKTsKCiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZS5nc3ViKHRoaXMucGF0dGVybiwgZnVuY3Rpb24obWF0Y2gpIHsKICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gKG1hdGNoWzFdICsgJycpOwoKICAgICAgdmFyIGJlZm9yZSA9IG1hdGNoWzFdIHx8ICcnOwogICAgICBpZiAoYmVmb3JlID09ICdcXCcpIHJldHVybiBtYXRjaFsyXTsKCiAgICAgIHZhciBjdHggPSBvYmplY3QsIGV4cHIgPSBtYXRjaFszXSwKICAgICAgICAgIHBhdHRlcm4gPSAvXihbXi5bXSt8XFsoKD86Lio/W15cXF0pPylcXSkoXC58XFt8JCkvOwoKICAgICAgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWMoZXhwcik7CiAgICAgIGlmIChtYXRjaCA9PSBudWxsKSByZXR1cm4gYmVmb3JlOwoKICAgICAgd2hpbGUgKG1hdGNoICE9IG51bGwpIHsKICAgICAgICB2YXIgY29tcCA9IG1hdGNoWzFdLnN0YXJ0c1dpdGgoJ1snKSA/IG1hdGNoWzJdLnJlcGxhY2UoL1xcXFxdL2csICddJykgOiBtYXRjaFsxXTsKICAgICAgICBjdHggPSBjdHhbY29tcF07CiAgICAgICAgaWYgKG51bGwgPT0gY3R4IHx8ICcnID09IG1hdGNoWzNdKSBicmVhazsKICAgICAgICBleHByID0gZXhwci5zdWJzdHJpbmcoJ1snID09IG1hdGNoWzNdID8gbWF0Y2hbMV0ubGVuZ3RoIDogbWF0Y2hbMF0ubGVuZ3RoKTsKICAgICAgICBtYXRjaCA9IHBhdHRlcm4uZXhlYyhleHByKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGJlZm9yZSArIFN0cmluZy5pbnRlcnByZXQoY3R4KTsKICAgIH0pOwogIH0KfSk7ClRlbXBsYXRlLlBhdHRlcm4gPSAvKF58LnxccnxcbikoI1x7KC4qPylcfSkvOwoKdmFyICRicmVhayA9IHsgfTsKCnZhciBFbnVtZXJhYmxlID0gKGZ1bmN0aW9uKCkgewogIGZ1bmN0aW9uIGVhY2goaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIHRyeSB7CiAgICAgIHRoaXMuX2VhY2goaXRlcmF0b3IsIGNvbnRleHQpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBpZiAoZSAhPSAkYnJlYWspIHRocm93IGU7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9CgogIGZ1bmN0aW9uIGVhY2hTbGljZShudW1iZXIsIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgaW5kZXggPSAtbnVtYmVyLCBzbGljZXMgPSBbXSwgYXJyYXkgPSB0aGlzLnRvQXJyYXkoKTsKICAgIGlmIChudW1iZXIgPCAxKSByZXR1cm4gYXJyYXk7CiAgICB3aGlsZSAoKGluZGV4ICs9IG51bWJlcikgPCBhcnJheS5sZW5ndGgpCiAgICAgIHNsaWNlcy5wdXNoKGFycmF5LnNsaWNlKGluZGV4LCBpbmRleCtudW1iZXIpKTsKICAgIHJldHVybiBzbGljZXMuY29sbGVjdChpdGVyYXRvciwgY29udGV4dCk7CiAgfQoKICBmdW5jdGlvbiBhbGwoaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CiAgICB2YXIgcmVzdWx0ID0gdHJ1ZTsKICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmICEhaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIHRoaXMpOwogICAgICBpZiAoIXJlc3VsdCkgdGhyb3cgJGJyZWFrOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gYW55KGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBpdGVyYXRvciA9IGl0ZXJhdG9yIHx8IFByb3RvdHlwZS5LOwogICAgdmFyIHJlc3VsdCA9IGZhbHNlOwogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICBpZiAocmVzdWx0ID0gISFpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgdGhpcykpCiAgICAgICAgdGhyb3cgJGJyZWFrOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gY29sbGVjdChpdGVyYXRvciwgY29udGV4dCkgewogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsKICAgIHZhciByZXN1bHRzID0gW107CiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIHJlc3VsdHMucHVzaChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgdGhpcykpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIGRldGVjdChpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdDsKICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCB0aGlzKSkgewogICAgICAgIHJlc3VsdCA9IHZhbHVlOwogICAgICAgIHRocm93ICRicmVhazsKICAgICAgfQogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gZmluZEFsbChpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCB0aGlzKSkKICAgICAgICByZXN1bHRzLnB1c2godmFsdWUpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIGdyZXAoZmlsdGVyLCBpdGVyYXRvciwgY29udGV4dCkgewogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsKICAgIHZhciByZXN1bHRzID0gW107CgogICAgaWYgKE9iamVjdC5pc1N0cmluZyhmaWx0ZXIpKQogICAgICBmaWx0ZXIgPSBuZXcgUmVnRXhwKFJlZ0V4cC5lc2NhcGUoZmlsdGVyKSk7CgogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICBpZiAoZmlsdGVyLm1hdGNoKHZhbHVlKSkKICAgICAgICByZXN1bHRzLnB1c2goaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIHRoaXMpKTsKICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBpbmNsdWRlKG9iamVjdCkgewogICAgaWYgKE9iamVjdC5pc0Z1bmN0aW9uKHRoaXMuaW5kZXhPZikgJiYgdGhpcy5pbmRleE9mKG9iamVjdCkgIT0gLTEpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIHZhciBmb3VuZCA9IGZhbHNlOwogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSA9PSBvYmplY3QpIHsKICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgdGhyb3cgJGJyZWFrOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBmb3VuZDsKICB9CgogIGZ1bmN0aW9uIGluR3JvdXBzT2YobnVtYmVyLCBmaWxsV2l0aCkgewogICAgZmlsbFdpdGggPSBPYmplY3QuaXNVbmRlZmluZWQoZmlsbFdpdGgpID8gbnVsbCA6IGZpbGxXaXRoOwogICAgcmV0dXJuIHRoaXMuZWFjaFNsaWNlKG51bWJlciwgZnVuY3Rpb24oc2xpY2UpIHsKICAgICAgd2hpbGUoc2xpY2UubGVuZ3RoIDwgbnVtYmVyKSBzbGljZS5wdXNoKGZpbGxXaXRoKTsKICAgICAgcmV0dXJuIHNsaWNlOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBpbmplY3QobWVtbywgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgbWVtbyA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgbWVtbywgdmFsdWUsIGluZGV4LCB0aGlzKTsKICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIG1lbW87CiAgfQoKICBmdW5jdGlvbiBpbnZva2UobWV0aG9kKSB7CiAgICB2YXIgYXJncyA9ICRBKGFyZ3VtZW50cykuc2xpY2UoMSk7CiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24odmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlW21ldGhvZF0uYXBwbHkodmFsdWUsIGFyZ3MpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBtYXgoaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CiAgICB2YXIgcmVzdWx0OwogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICB2YWx1ZSA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCB0aGlzKTsKICAgICAgaWYgKHJlc3VsdCA9PSBudWxsIHx8IHZhbHVlID49IHJlc3VsdCkKICAgICAgICByZXN1bHQgPSB2YWx1ZTsKICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIG1pbihpdGVyYXRvciwgY29udGV4dCkgewogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsKICAgIHZhciByZXN1bHQ7CiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIHZhbHVlID0gaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIHRoaXMpOwogICAgICBpZiAocmVzdWx0ID09IG51bGwgfHwgdmFsdWUgPCByZXN1bHQpCiAgICAgICAgcmVzdWx0ID0gdmFsdWU7CiAgICB9LCB0aGlzKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICBmdW5jdGlvbiBwYXJ0aXRpb24oaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CiAgICB2YXIgdHJ1ZXMgPSBbXSwgZmFsc2VzID0gW107CiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgdGhpcykgPwogICAgICAgIHRydWVzIDogZmFsc2VzKS5wdXNoKHZhbHVlKTsKICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIFt0cnVlcywgZmFsc2VzXTsKICB9CgogIGZ1bmN0aW9uIHBsdWNrKHByb3BlcnR5KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIHJlc3VsdHMucHVzaCh2YWx1ZVtwcm9wZXJ0eV0pOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIHJlamVjdChpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgaWYgKCFpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgdGhpcykpCiAgICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlKTsKICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBzb3J0QnkoaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgY3JpdGVyaWE6IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCB0aGlzKQogICAgICB9OwogICAgfSwgdGhpcykuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkgewogICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWEsIGIgPSByaWdodC5jcml0ZXJpYTsKICAgICAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwOwogICAgfSkucGx1Y2soJ3ZhbHVlJyk7CiAgfQoKICBmdW5jdGlvbiB0b0FycmF5KCkgewogICAgcmV0dXJuIHRoaXMubWFwKCk7CiAgfQoKICBmdW5jdGlvbiB6aXAoKSB7CiAgICB2YXIgaXRlcmF0b3IgPSBQcm90b3R5cGUuSywgYXJncyA9ICRBKGFyZ3VtZW50cyk7CiAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24oYXJncy5sYXN0KCkpKQogICAgICBpdGVyYXRvciA9IGFyZ3MucG9wKCk7CgogICAgdmFyIGNvbGxlY3Rpb25zID0gW3RoaXNdLmNvbmNhdChhcmdzKS5tYXAoJEEpOwogICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICByZXR1cm4gaXRlcmF0b3IoY29sbGVjdGlvbnMucGx1Y2soaW5kZXgpKTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gc2l6ZSgpIHsKICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBpbnNwZWN0KCkgewogICAgcmV0dXJuICcjPEVudW1lcmFibGU6JyArIHRoaXMudG9BcnJheSgpLmluc3BlY3QoKSArICc+JzsKICB9CgoKCgoKCgoKCiAgcmV0dXJuIHsKICAgIGVhY2g6ICAgICAgIGVhY2gsCiAgICBlYWNoU2xpY2U6ICBlYWNoU2xpY2UsCiAgICBhbGw6ICAgICAgICBhbGwsCiAgICBldmVyeTogICAgICBhbGwsCiAgICBhbnk6ICAgICAgICBhbnksCiAgICBzb21lOiAgICAgICBhbnksCiAgICBjb2xsZWN0OiAgICBjb2xsZWN0LAogICAgbWFwOiAgICAgICAgY29sbGVjdCwKICAgIGRldGVjdDogICAgIGRldGVjdCwKICAgIGZpbmRBbGw6ICAgIGZpbmRBbGwsCiAgICBzZWxlY3Q6ICAgICBmaW5kQWxsLAogICAgZmlsdGVyOiAgICAgZmluZEFsbCwKICAgIGdyZXA6ICAgICAgIGdyZXAsCiAgICBpbmNsdWRlOiAgICBpbmNsdWRlLAogICAgbWVtYmVyOiAgICAgaW5jbHVkZSwKICAgIGluR3JvdXBzT2Y6IGluR3JvdXBzT2YsCiAgICBpbmplY3Q6ICAgICBpbmplY3QsCiAgICBpbnZva2U6ICAgICBpbnZva2UsCiAgICBtYXg6ICAgICAgICBtYXgsCiAgICBtaW46ICAgICAgICBtaW4sCiAgICBwYXJ0aXRpb246ICBwYXJ0aXRpb24sCiAgICBwbHVjazogICAgICBwbHVjaywKICAgIHJlamVjdDogICAgIHJlamVjdCwKICAgIHNvcnRCeTogICAgIHNvcnRCeSwKICAgIHRvQXJyYXk6ICAgIHRvQXJyYXksCiAgICBlbnRyaWVzOiAgICB0b0FycmF5LAogICAgemlwOiAgICAgICAgemlwLAogICAgc2l6ZTogICAgICAgc2l6ZSwKICAgIGluc3BlY3Q6ICAgIGluc3BlY3QsCiAgICBmaW5kOiAgICAgICBkZXRlY3QKICB9Owp9KSgpOwoKZnVuY3Rpb24gJEEoaXRlcmFibGUpIHsKICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gW107CiAgaWYgKCd0b0FycmF5JyBpbiBPYmplY3QoaXRlcmFibGUpKSByZXR1cm4gaXRlcmFibGUudG9BcnJheSgpOwogIHZhciBsZW5ndGggPSBpdGVyYWJsZS5sZW5ndGggfHwgMCwgcmVzdWx0cyA9IG5ldyBBcnJheShsZW5ndGgpOwogIHdoaWxlIChsZW5ndGgtLSkgcmVzdWx0c1tsZW5ndGhdID0gaXRlcmFibGVbbGVuZ3RoXTsKICByZXR1cm4gcmVzdWx0czsKfQoKCmZ1bmN0aW9uICR3KHN0cmluZykgewogIGlmICghT2JqZWN0LmlzU3RyaW5nKHN0cmluZykpIHJldHVybiBbXTsKICBzdHJpbmcgPSBzdHJpbmcuc3RyaXAoKTsKICByZXR1cm4gc3RyaW5nID8gc3RyaW5nLnNwbGl0KC9ccysvKSA6IFtdOwp9CgpBcnJheS5mcm9tID0gJEE7CgoKKGZ1bmN0aW9uKCkgewogIHZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLAogICAgICBzbGljZSA9IGFycmF5UHJvdG8uc2xpY2UsCiAgICAgIF9lYWNoID0gYXJyYXlQcm90by5mb3JFYWNoOyAvLyB1c2UgbmF0aXZlIGJyb3dzZXIgSlMgMS42IGltcGxlbWVudGF0aW9uIGlmIGF2YWlsYWJsZQoKICBmdW5jdGlvbiBlYWNoKGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gdGhpcy5sZW5ndGggPj4+IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoaSBpbiB0aGlzKSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHRoaXNbaV0sIGksIHRoaXMpOwogICAgfQogIH0KICBpZiAoIV9lYWNoKSBfZWFjaCA9IGVhY2g7CgogIGZ1bmN0aW9uIGNsZWFyKCkgewogICAgdGhpcy5sZW5ndGggPSAwOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBmdW5jdGlvbiBmaXJzdCgpIHsKICAgIHJldHVybiB0aGlzWzBdOwogIH0KCiAgZnVuY3Rpb24gbGFzdCgpIHsKICAgIHJldHVybiB0aGlzW3RoaXMubGVuZ3RoIC0gMV07CiAgfQoKICBmdW5jdGlvbiBjb21wYWN0KCkgewogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBmbGF0dGVuKCkgewogICAgcmV0dXJuIHRoaXMuaW5qZWN0KFtdLCBmdW5jdGlvbihhcnJheSwgdmFsdWUpIHsKICAgICAgaWYgKE9iamVjdC5pc0FycmF5KHZhbHVlKSkKICAgICAgICByZXR1cm4gYXJyYXkuY29uY2F0KHZhbHVlLmZsYXR0ZW4oKSk7CiAgICAgIGFycmF5LnB1c2godmFsdWUpOwogICAgICByZXR1cm4gYXJyYXk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHdpdGhvdXQoKSB7CiAgICB2YXIgdmFsdWVzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApOwogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIHJldHVybiAhdmFsdWVzLmluY2x1ZGUodmFsdWUpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiByZXZlcnNlKGlubGluZSkgewogICAgcmV0dXJuIChpbmxpbmUgPT09IGZhbHNlID8gdGhpcy50b0FycmF5KCkgOiB0aGlzKS5fcmV2ZXJzZSgpOwogIH0KCiAgZnVuY3Rpb24gdW5pcShzb3J0ZWQpIHsKICAgIHJldHVybiB0aGlzLmluamVjdChbXSwgZnVuY3Rpb24oYXJyYXksIHZhbHVlLCBpbmRleCkgewogICAgICBpZiAoMCA9PSBpbmRleCB8fCAoc29ydGVkID8gYXJyYXkubGFzdCgpICE9IHZhbHVlIDogIWFycmF5LmluY2x1ZGUodmFsdWUpKSkKICAgICAgICBhcnJheS5wdXNoKHZhbHVlKTsKICAgICAgcmV0dXJuIGFycmF5OwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBpbnRlcnNlY3QoYXJyYXkpIHsKICAgIHJldHVybiB0aGlzLnVuaXEoKS5maW5kQWxsKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgcmV0dXJuIGFycmF5LmluZGV4T2YoaXRlbSkgIT09IC0xOwogICAgfSk7CiAgfQoKCiAgZnVuY3Rpb24gY2xvbmUoKSB7CiAgICByZXR1cm4gc2xpY2UuY2FsbCh0aGlzLCAwKTsKICB9CgogIGZ1bmN0aW9uIHNpemUoKSB7CiAgICByZXR1cm4gdGhpcy5sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBpbnNwZWN0KCkgewogICAgcmV0dXJuICdbJyArIHRoaXMubWFwKE9iamVjdC5pbnNwZWN0KS5qb2luKCcsICcpICsgJ10nOwogIH0KCiAgZnVuY3Rpb24gaW5kZXhPZihpdGVtLCBpKSB7CiAgICBpZiAodGhpcyA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CgogICAgdmFyIGFycmF5ID0gT2JqZWN0KHRoaXMpLCBsZW5ndGggPSBhcnJheS5sZW5ndGggPj4+IDA7CiAgICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gLTE7CgogICAgaSA9IE51bWJlcihpKTsKICAgIGlmIChpc05hTihpKSkgewogICAgICBpID0gMDsKICAgIH0gZWxzZSBpZiAoaSAhPT0gMCAmJiBpc0Zpbml0ZShpKSkgewogICAgICBpID0gKGkgPiAwID8gMSA6IC0xKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMoaSkpOwogICAgfQoKICAgIGlmIChpID4gbGVuZ3RoKSByZXR1cm4gLTE7CgogICAgdmFyIGsgPSBpID49IDAgPyBpIDogTWF0aC5tYXgobGVuZ3RoIC0gTWF0aC5hYnMoaSksIDApOwogICAgZm9yICg7IGsgPCBsZW5ndGg7IGsrKykKICAgICAgaWYgKGsgaW4gYXJyYXkgJiYgYXJyYXlba10gPT09IGl0ZW0pIHJldHVybiBrOwogICAgcmV0dXJuIC0xOwogIH0KCgogIGZ1bmN0aW9uIGxhc3RJbmRleE9mKGl0ZW0sIGkpIHsKICAgIGlmICh0aGlzID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKCiAgICB2YXIgYXJyYXkgPSBPYmplY3QodGhpcyksIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA+Pj4gMDsKICAgIGlmIChsZW5ndGggPT09IDApIHJldHVybiAtMTsKCiAgICBpZiAoIU9iamVjdC5pc1VuZGVmaW5lZChpKSkgewogICAgICBpID0gTnVtYmVyKGkpOwogICAgICBpZiAoaXNOYU4oaSkpIHsKICAgICAgICBpID0gMDsKICAgICAgfSBlbHNlIGlmIChpICE9PSAwICYmIGlzRmluaXRlKGkpKSB7CiAgICAgICAgaSA9IChpID4gMCA/IDEgOiAtMSkgKiBNYXRoLmZsb29yKE1hdGguYWJzKGkpKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaSA9IGxlbmd0aDsKICAgIH0KCiAgICB2YXIgayA9IGkgPj0gMCA/IE1hdGgubWluKGksIGxlbmd0aCAtIDEpIDoKICAgICBsZW5ndGggLSBNYXRoLmFicyhpKTsKCiAgICBmb3IgKDsgayA+PSAwOyBrLS0pCiAgICAgIGlmIChrIGluIGFycmF5ICYmIGFycmF5W2tdID09PSBpdGVtKSByZXR1cm4gazsKICAgIHJldHVybiAtMTsKICB9CgogIGZ1bmN0aW9uIGNvbmNhdChfKSB7CiAgICB2YXIgYXJyYXkgPSBbXSwgaXRlbXMgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCksIGl0ZW0sIG4gPSAwOwogICAgaXRlbXMudW5zaGlmdCh0aGlzKTsKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpdGVtID0gaXRlbXNbaV07CiAgICAgIGlmIChPYmplY3QuaXNBcnJheShpdGVtKSAmJiAhKCdjYWxsZWUnIGluIGl0ZW0pKSB7CiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGFycmF5TGVuZ3RoID0gaXRlbS5sZW5ndGg7IGogPCBhcnJheUxlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAoaiBpbiBpdGVtKSBhcnJheVtuXSA9IGl0ZW1bal07CiAgICAgICAgICBuKys7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGFycmF5W24rK10gPSBpdGVtOwogICAgICB9CiAgICB9CiAgICBhcnJheS5sZW5ndGggPSBuOwogICAgcmV0dXJuIGFycmF5OwogIH0KCgogIGZ1bmN0aW9uIHdyYXBOYXRpdmUobWV0aG9kKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIG1ldGhvZC5jYWxsKHRoaXMsIFByb3RvdHlwZS5LKTsKICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgICAgIGFyZ3MudW5zaGlmdChQcm90b3R5cGUuSyk7CiAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH07CiAgfQoKCiAgZnVuY3Rpb24gbWFwKGl0ZXJhdG9yKSB7CiAgICBpZiAodGhpcyA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CiAgICBpdGVyYXRvciA9IGl0ZXJhdG9yIHx8IFByb3RvdHlwZS5LOwoKICAgIHZhciBvYmplY3QgPSBPYmplY3QodGhpcyk7CiAgICB2YXIgcmVzdWx0cyA9IFtdLCBjb250ZXh0ID0gYXJndW1lbnRzWzFdLCBuID0gMDsKCiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aCA+Pj4gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChpIGluIG9iamVjdCkgewogICAgICAgIHJlc3VsdHNbbl0gPSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9iamVjdFtpXSwgaSwgb2JqZWN0KTsKICAgICAgfQogICAgICBuKys7CiAgICB9CiAgICByZXN1bHRzLmxlbmd0aCA9IG47CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGlmIChhcnJheVByb3RvLm1hcCkgewogICAgbWFwID0gd3JhcE5hdGl2ZShBcnJheS5wcm90b3R5cGUubWFwKTsKICB9CgogIGZ1bmN0aW9uIGZpbHRlcihpdGVyYXRvcikgewogICAgaWYgKHRoaXMgPT0gbnVsbCB8fCAhT2JqZWN0LmlzRnVuY3Rpb24oaXRlcmF0b3IpKQogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CgogICAgdmFyIG9iamVjdCA9IE9iamVjdCh0aGlzKTsKICAgIHZhciByZXN1bHRzID0gW10sIGNvbnRleHQgPSBhcmd1bWVudHNbMV0sIHZhbHVlOwoKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoID4+PiAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGkgaW4gb2JqZWN0KSB7CiAgICAgICAgdmFsdWUgPSBvYmplY3RbaV07CiAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGksIG9iamVjdCkpIHsKICAgICAgICAgIHJlc3VsdHMucHVzaCh2YWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGlmIChhcnJheVByb3RvLmZpbHRlcikgewogICAgZmlsdGVyID0gQXJyYXkucHJvdG90eXBlLmZpbHRlcjsKICB9CgogIGZ1bmN0aW9uIHNvbWUoaXRlcmF0b3IpIHsKICAgIGlmICh0aGlzID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CiAgICB2YXIgY29udGV4dCA9IGFyZ3VtZW50c1sxXTsKCiAgICB2YXIgb2JqZWN0ID0gT2JqZWN0KHRoaXMpOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGggPj4+IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoaSBpbiBvYmplY3QgJiYgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmplY3RbaV0sIGksIG9iamVjdCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGlmIChhcnJheVByb3RvLnNvbWUpIHsKICAgIHZhciBzb21lID0gd3JhcE5hdGl2ZShBcnJheS5wcm90b3R5cGUuc29tZSk7CiAgfQoKCiAgZnVuY3Rpb24gZXZlcnkoaXRlcmF0b3IpIHsKICAgIGlmICh0aGlzID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CiAgICB2YXIgY29udGV4dCA9IGFyZ3VtZW50c1sxXTsKCiAgICB2YXIgb2JqZWN0ID0gT2JqZWN0KHRoaXMpOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGggPj4+IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoaSBpbiBvYmplY3QgJiYgIWl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqZWN0W2ldLCBpLCBvYmplY3QpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBpZiAoYXJyYXlQcm90by5ldmVyeSkgewogICAgdmFyIGV2ZXJ5ID0gd3JhcE5hdGl2ZShBcnJheS5wcm90b3R5cGUuZXZlcnkpOwogIH0KCiAgdmFyIF9yZWR1Y2UgPSBhcnJheVByb3RvLnJlZHVjZTsKICBmdW5jdGlvbiBpbmplY3QobWVtbywgaXRlcmF0b3IpIHsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CiAgICB2YXIgY29udGV4dCA9IGFyZ3VtZW50c1syXTsKICAgIHJldHVybiBfcmVkdWNlLmNhbGwodGhpcywgaXRlcmF0b3IuYmluZChjb250ZXh0KSwgbWVtbyk7CiAgfQoKICBpZiAoIWFycmF5UHJvdG8ucmVkdWNlKSB7CiAgICB2YXIgaW5qZWN0ID0gRW51bWVyYWJsZS5pbmplY3Q7CiAgfQoKICBPYmplY3QuZXh0ZW5kKGFycmF5UHJvdG8sIEVudW1lcmFibGUpOwoKICBpZiAoIWFycmF5UHJvdG8uX3JldmVyc2UpCiAgICBhcnJheVByb3RvLl9yZXZlcnNlID0gYXJyYXlQcm90by5yZXZlcnNlOwoKICBPYmplY3QuZXh0ZW5kKGFycmF5UHJvdG8sIHsKICAgIF9lYWNoOiAgICAgX2VhY2gsCgogICAgbWFwOiAgICAgICBtYXAsCiAgICBjb2xsZWN0OiAgIG1hcCwKICAgIHNlbGVjdDogICAgZmlsdGVyLAogICAgZmlsdGVyOiAgICBmaWx0ZXIsCiAgICBmaW5kQWxsOiAgIGZpbHRlciwKICAgIHNvbWU6ICAgICAgc29tZSwKICAgIGFueTogICAgICAgc29tZSwKICAgIGV2ZXJ5OiAgICAgZXZlcnksCiAgICBhbGw6ICAgICAgIGV2ZXJ5LAogICAgaW5qZWN0OiAgICBpbmplY3QsCgogICAgY2xlYXI6ICAgICBjbGVhciwKICAgIGZpcnN0OiAgICAgZmlyc3QsCiAgICBsYXN0OiAgICAgIGxhc3QsCiAgICBjb21wYWN0OiAgIGNvbXBhY3QsCiAgICBmbGF0dGVuOiAgIGZsYXR0ZW4sCiAgICB3aXRob3V0OiAgIHdpdGhvdXQsCiAgICByZXZlcnNlOiAgIHJldmVyc2UsCiAgICB1bmlxOiAgICAgIHVuaXEsCiAgICBpbnRlcnNlY3Q6IGludGVyc2VjdCwKICAgIGNsb25lOiAgICAgY2xvbmUsCiAgICB0b0FycmF5OiAgIGNsb25lLAogICAgc2l6ZTogICAgICBzaXplLAogICAgaW5zcGVjdDogICBpbnNwZWN0CiAgfSk7CgogIHZhciBDT05DQVRfQVJHVU1FTlRTX0JVR0dZID0gKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFtdLmNvbmNhdChhcmd1bWVudHMpWzBdWzBdICE9PSAxOwogIH0pKDEsMik7CgogIGlmIChDT05DQVRfQVJHVU1FTlRTX0JVR0dZKSBhcnJheVByb3RvLmNvbmNhdCA9IGNvbmNhdDsKCiAgaWYgKCFhcnJheVByb3RvLmluZGV4T2YpIGFycmF5UHJvdG8uaW5kZXhPZiA9IGluZGV4T2Y7CiAgaWYgKCFhcnJheVByb3RvLmxhc3RJbmRleE9mKSBhcnJheVByb3RvLmxhc3RJbmRleE9mID0gbGFzdEluZGV4T2Y7Cn0pKCk7CmZ1bmN0aW9uICRIKG9iamVjdCkgewogIHJldHVybiBuZXcgSGFzaChvYmplY3QpOwp9OwoKdmFyIEhhc2ggPSBDbGFzcy5jcmVhdGUoRW51bWVyYWJsZSwgKGZ1bmN0aW9uKCkgewogIGZ1bmN0aW9uIGluaXRpYWxpemUob2JqZWN0KSB7CiAgICB0aGlzLl9vYmplY3QgPSBPYmplY3QuaXNIYXNoKG9iamVjdCkgPyBvYmplY3QudG9PYmplY3QoKSA6IE9iamVjdC5jbG9uZShvYmplY3QpOwogIH0KCgogIGZ1bmN0aW9uIF9lYWNoKGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgaSA9IDA7CiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fb2JqZWN0KSB7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX29iamVjdFtrZXldLCBwYWlyID0gW2tleSwgdmFsdWVdOwogICAgICBwYWlyLmtleSA9IGtleTsKICAgICAgcGFpci52YWx1ZSA9IHZhbHVlOwogICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHBhaXIsIGkpOwogICAgICBpKys7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkgewogICAgcmV0dXJuIHRoaXMuX29iamVjdFtrZXldID0gdmFsdWU7CiAgfQoKICBmdW5jdGlvbiBnZXQoa2V5KSB7CiAgICBpZiAodGhpcy5fb2JqZWN0W2tleV0gIT09IE9iamVjdC5wcm90b3R5cGVba2V5XSkKICAgICAgcmV0dXJuIHRoaXMuX29iamVjdFtrZXldOwogIH0KCiAgZnVuY3Rpb24gdW5zZXQoa2V5KSB7CiAgICB2YXIgdmFsdWUgPSB0aGlzLl9vYmplY3Rba2V5XTsKICAgIGRlbGV0ZSB0aGlzLl9vYmplY3Rba2V5XTsKICAgIHJldHVybiB2YWx1ZTsKICB9CgogIGZ1bmN0aW9uIHRvT2JqZWN0KCkgewogICAgcmV0dXJuIE9iamVjdC5jbG9uZSh0aGlzLl9vYmplY3QpOwogIH0KCgoKICBmdW5jdGlvbiBrZXlzKCkgewogICAgcmV0dXJuIHRoaXMucGx1Y2soJ2tleScpOwogIH0KCiAgZnVuY3Rpb24gdmFsdWVzKCkgewogICAgcmV0dXJuIHRoaXMucGx1Y2soJ3ZhbHVlJyk7CiAgfQoKICBmdW5jdGlvbiBpbmRleCh2YWx1ZSkgewogICAgdmFyIG1hdGNoID0gdGhpcy5kZXRlY3QoZnVuY3Rpb24ocGFpcikgewogICAgICByZXR1cm4gcGFpci52YWx1ZSA9PT0gdmFsdWU7CiAgICB9KTsKICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaC5rZXk7CiAgfQoKICBmdW5jdGlvbiBtZXJnZShvYmplY3QpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkudXBkYXRlKG9iamVjdCk7CiAgfQoKICBmdW5jdGlvbiB1cGRhdGUob2JqZWN0KSB7CiAgICByZXR1cm4gbmV3IEhhc2gob2JqZWN0KS5pbmplY3QodGhpcywgZnVuY3Rpb24ocmVzdWx0LCBwYWlyKSB7CiAgICAgIHJlc3VsdC5zZXQocGFpci5rZXksIHBhaXIudmFsdWUpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiB0b1F1ZXJ5UGFpcihrZXksIHZhbHVlKSB7CiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuIGtleTsKCiAgICB2YWx1ZSA9IFN0cmluZy5pbnRlcnByZXQodmFsdWUpOwoKICAgIHZhbHVlID0gdmFsdWUuZ3N1YigvKFxyKT9cbi8sICdcclxuJyk7CiAgICB2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7CiAgICB2YWx1ZSA9IHZhbHVlLmdzdWIoLyUyMC8sICcrJyk7CiAgICByZXR1cm4ga2V5ICsgJz0nICsgdmFsdWU7CiAgfQoKICBmdW5jdGlvbiB0b1F1ZXJ5U3RyaW5nKCkgewogICAgcmV0dXJuIHRoaXMuaW5qZWN0KFtdLCBmdW5jdGlvbihyZXN1bHRzLCBwYWlyKSB7CiAgICAgIHZhciBrZXkgPSBlbmNvZGVVUklDb21wb25lbnQocGFpci5rZXkpLCB2YWx1ZXMgPSBwYWlyLnZhbHVlOwoKICAgICAgaWYgKHZhbHVlcyAmJiB0eXBlb2YgdmFsdWVzID09ICdvYmplY3QnKSB7CiAgICAgICAgaWYgKE9iamVjdC5pc0FycmF5KHZhbHVlcykpIHsKICAgICAgICAgIHZhciBxdWVyeVZhbHVlcyA9IFtdOwogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHZhbHVlcy5sZW5ndGgsIHZhbHVlOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZXNbaV07CiAgICAgICAgICAgIHF1ZXJ5VmFsdWVzLnB1c2godG9RdWVyeVBhaXIoa2V5LCB2YWx1ZSkpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdHMuY29uY2F0KHF1ZXJ5VmFsdWVzKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSByZXN1bHRzLnB1c2godG9RdWVyeVBhaXIoa2V5LCB2YWx1ZXMpKTsKICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9KS5qb2luKCcmJyk7CiAgfQoKICBmdW5jdGlvbiBpbnNwZWN0KCkgewogICAgcmV0dXJuICcjPEhhc2g6eycgKyB0aGlzLm1hcChmdW5jdGlvbihwYWlyKSB7CiAgICAgIHJldHVybiBwYWlyLm1hcChPYmplY3QuaW5zcGVjdCkuam9pbignOiAnKTsKICAgIH0pLmpvaW4oJywgJykgKyAnfT4nOwogIH0KCiAgZnVuY3Rpb24gY2xvbmUoKSB7CiAgICByZXR1cm4gbmV3IEhhc2godGhpcyk7CiAgfQoKICByZXR1cm4gewogICAgaW5pdGlhbGl6ZTogICAgICAgICAgICAgaW5pdGlhbGl6ZSwKICAgIF9lYWNoOiAgICAgICAgICAgICAgICAgIF9lYWNoLAogICAgc2V0OiAgICAgICAgICAgICAgICAgICAgc2V0LAogICAgZ2V0OiAgICAgICAgICAgICAgICAgICAgZ2V0LAogICAgdW5zZXQ6ICAgICAgICAgICAgICAgICAgdW5zZXQsCiAgICB0b09iamVjdDogICAgICAgICAgICAgICB0b09iamVjdCwKICAgIHRvVGVtcGxhdGVSZXBsYWNlbWVudHM6IHRvT2JqZWN0LAogICAga2V5czogICAgICAgICAgICAgICAgICAga2V5cywKICAgIHZhbHVlczogICAgICAgICAgICAgICAgIHZhbHVlcywKICAgIGluZGV4OiAgICAgICAgICAgICAgICAgIGluZGV4LAogICAgbWVyZ2U6ICAgICAgICAgICAgICAgICAgbWVyZ2UsCiAgICB1cGRhdGU6ICAgICAgICAgICAgICAgICB1cGRhdGUsCiAgICB0b1F1ZXJ5U3RyaW5nOiAgICAgICAgICB0b1F1ZXJ5U3RyaW5nLAogICAgaW5zcGVjdDogICAgICAgICAgICAgICAgaW5zcGVjdCwKICAgIHRvSlNPTjogICAgICAgICAgICAgICAgIHRvT2JqZWN0LAogICAgY2xvbmU6ICAgICAgICAgICAgICAgICAgY2xvbmUKICB9Owp9KSgpKTsKCkhhc2guZnJvbSA9ICRIOwpPYmplY3QuZXh0ZW5kKE51bWJlci5wcm90b3R5cGUsIChmdW5jdGlvbigpIHsKICBmdW5jdGlvbiB0b0NvbG9yUGFydCgpIHsKICAgIHJldHVybiB0aGlzLnRvUGFkZGVkU3RyaW5nKDIsIDE2KTsKICB9CgogIGZ1bmN0aW9uIHN1Y2MoKSB7CiAgICByZXR1cm4gdGhpcyArIDE7CiAgfQoKICBmdW5jdGlvbiB0aW1lcyhpdGVyYXRvciwgY29udGV4dCkgewogICAgJFIoMCwgdGhpcywgdHJ1ZSkuZWFjaChpdGVyYXRvciwgY29udGV4dCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIGZ1bmN0aW9uIHRvUGFkZGVkU3RyaW5nKGxlbmd0aCwgcmFkaXgpIHsKICAgIHZhciBzdHJpbmcgPSB0aGlzLnRvU3RyaW5nKHJhZGl4IHx8IDEwKTsKICAgIHJldHVybiAnMCcudGltZXMobGVuZ3RoIC0gc3RyaW5nLmxlbmd0aCkgKyBzdHJpbmc7CiAgfQoKICBmdW5jdGlvbiBhYnMoKSB7CiAgICByZXR1cm4gTWF0aC5hYnModGhpcyk7CiAgfQoKICBmdW5jdGlvbiByb3VuZCgpIHsKICAgIHJldHVybiBNYXRoLnJvdW5kKHRoaXMpOwogIH0KCiAgZnVuY3Rpb24gY2VpbCgpIHsKICAgIHJldHVybiBNYXRoLmNlaWwodGhpcyk7CiAgfQoKICBmdW5jdGlvbiBmbG9vcigpIHsKICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMpOwogIH0KCiAgcmV0dXJuIHsKICAgIHRvQ29sb3JQYXJ0OiAgICB0b0NvbG9yUGFydCwKICAgIHN1Y2M6ICAgICAgICAgICBzdWNjLAogICAgdGltZXM6ICAgICAgICAgIHRpbWVzLAogICAgdG9QYWRkZWRTdHJpbmc6IHRvUGFkZGVkU3RyaW5nLAogICAgYWJzOiAgICAgICAgICAgIGFicywKICAgIHJvdW5kOiAgICAgICAgICByb3VuZCwKICAgIGNlaWw6ICAgICAgICAgICBjZWlsLAogICAgZmxvb3I6ICAgICAgICAgIGZsb29yCiAgfTsKfSkoKSk7CgpmdW5jdGlvbiAkUihzdGFydCwgZW5kLCBleGNsdXNpdmUpIHsKICByZXR1cm4gbmV3IE9iamVjdFJhbmdlKHN0YXJ0LCBlbmQsIGV4Y2x1c2l2ZSk7Cn0KCnZhciBPYmplY3RSYW5nZSA9IENsYXNzLmNyZWF0ZShFbnVtZXJhYmxlLCAoZnVuY3Rpb24oKSB7CiAgZnVuY3Rpb24gaW5pdGlhbGl6ZShzdGFydCwgZW5kLCBleGNsdXNpdmUpIHsKICAgIHRoaXMuc3RhcnQgPSBzdGFydDsKICAgIHRoaXMuZW5kID0gZW5kOwogICAgdGhpcy5leGNsdXNpdmUgPSBleGNsdXNpdmU7CiAgfQoKICBmdW5jdGlvbiBfZWFjaChpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHZhbHVlID0gdGhpcy5zdGFydCwgaTsKICAgIGZvciAoaSA9IDA7IHRoaXMuaW5jbHVkZSh2YWx1ZSk7IGkrKykgewogICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpKTsKICAgICAgdmFsdWUgPSB2YWx1ZS5zdWNjKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbmNsdWRlKHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPCB0aGlzLnN0YXJ0KQogICAgICByZXR1cm4gZmFsc2U7CiAgICBpZiAodGhpcy5leGNsdXNpdmUpCiAgICAgIHJldHVybiB2YWx1ZSA8IHRoaXMuZW5kOwogICAgcmV0dXJuIHZhbHVlIDw9IHRoaXMuZW5kOwogIH0KCiAgcmV0dXJuIHsKICAgIGluaXRpYWxpemU6IGluaXRpYWxpemUsCiAgICBfZWFjaDogICAgICBfZWFjaCwKICAgIGluY2x1ZGU6ICAgIGluY2x1ZGUKICB9Owp9KSgpKTsKCgoKdmFyIEFic3RyYWN0ID0geyB9OwoKCnZhciBUcnkgPSB7CiAgdGhlc2U6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJldHVyblZhbHVlOwoKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGxhbWJkYSA9IGFyZ3VtZW50c1tpXTsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm5WYWx1ZSA9IGxhbWJkYSgpOwogICAgICAgIGJyZWFrOwogICAgICB9IGNhdGNoIChlKSB7IH0KICAgIH0KCiAgICByZXR1cm4gcmV0dXJuVmFsdWU7CiAgfQp9OwoKdmFyIEFqYXggPSB7CiAgZ2V0VHJhbnNwb3J0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBUcnkudGhlc2UoCiAgICAgIGZ1bmN0aW9uKCkge3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKX0sCiAgICAgIGZ1bmN0aW9uKCkge3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAnKX0sCiAgICAgIGZ1bmN0aW9uKCkge3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTEhUVFAnKX0KICAgICkgfHwgZmFsc2U7CiAgfSwKCiAgYWN0aXZlUmVxdWVzdENvdW50OiAwCn07CgpBamF4LlJlc3BvbmRlcnMgPSB7CiAgcmVzcG9uZGVyczogW10sCgogIF9lYWNoOiBmdW5jdGlvbihpdGVyYXRvciwgY29udGV4dCkgewogICAgdGhpcy5yZXNwb25kZXJzLl9lYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTsKICB9LAoKICByZWdpc3RlcjogZnVuY3Rpb24ocmVzcG9uZGVyKSB7CiAgICBpZiAoIXRoaXMuaW5jbHVkZShyZXNwb25kZXIpKQogICAgICB0aGlzLnJlc3BvbmRlcnMucHVzaChyZXNwb25kZXIpOwogIH0sCgogIHVucmVnaXN0ZXI6IGZ1bmN0aW9uKHJlc3BvbmRlcikgewogICAgdGhpcy5yZXNwb25kZXJzID0gdGhpcy5yZXNwb25kZXJzLndpdGhvdXQocmVzcG9uZGVyKTsKICB9LAoKICBkaXNwYXRjaDogZnVuY3Rpb24oY2FsbGJhY2ssIHJlcXVlc3QsIHRyYW5zcG9ydCwganNvbikgewogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHJlc3BvbmRlcikgewogICAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24ocmVzcG9uZGVyW2NhbGxiYWNrXSkpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmVzcG9uZGVyW2NhbGxiYWNrXS5hcHBseShyZXNwb25kZXIsIFtyZXF1ZXN0LCB0cmFuc3BvcnQsIGpzb25dKTsKICAgICAgICB9IGNhdGNoIChlKSB7IH0KICAgICAgfQogICAgfSk7CiAgfQp9OwoKT2JqZWN0LmV4dGVuZChBamF4LlJlc3BvbmRlcnMsIEVudW1lcmFibGUpOwoKQWpheC5SZXNwb25kZXJzLnJlZ2lzdGVyKHsKICBvbkNyZWF0ZTogICBmdW5jdGlvbigpIHsgQWpheC5hY3RpdmVSZXF1ZXN0Q291bnQrKyB9LAogIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkgeyBBamF4LmFjdGl2ZVJlcXVlc3RDb3VudC0tIH0KfSk7CkFqYXguQmFzZSA9IENsYXNzLmNyZWF0ZSh7CiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucykgewogICAgdGhpcy5vcHRpb25zID0gewogICAgICBtZXRob2Q6ICAgICAgICdwb3N0JywKICAgICAgYXN5bmNocm9ub3VzOiB0cnVlLAogICAgICBjb250ZW50VHlwZTogICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLAogICAgICBlbmNvZGluZzogICAgICdVVEYtOCcsCiAgICAgIHBhcmFtZXRlcnM6ICAgJycsCiAgICAgIGV2YWxKU09OOiAgICAgdHJ1ZSwKICAgICAgZXZhbEpTOiAgICAgICB0cnVlCiAgICB9OwogICAgT2JqZWN0LmV4dGVuZCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwgeyB9KTsKCiAgICB0aGlzLm9wdGlvbnMubWV0aG9kID0gdGhpcy5vcHRpb25zLm1ldGhvZC50b0xvd2VyQ2FzZSgpOwoKICAgIGlmIChPYmplY3QuaXNIYXNoKHRoaXMub3B0aW9ucy5wYXJhbWV0ZXJzKSkKICAgICAgdGhpcy5vcHRpb25zLnBhcmFtZXRlcnMgPSB0aGlzLm9wdGlvbnMucGFyYW1ldGVycy50b09iamVjdCgpOwogIH0KfSk7CkFqYXguUmVxdWVzdCA9IENsYXNzLmNyZWF0ZShBamF4LkJhc2UsIHsKICBfY29tcGxldGU6IGZhbHNlLAoKICBpbml0aWFsaXplOiBmdW5jdGlvbigkc3VwZXIsIHVybCwgb3B0aW9ucykgewogICAgJHN1cGVyKG9wdGlvbnMpOwogICAgdGhpcy50cmFuc3BvcnQgPSBBamF4LmdldFRyYW5zcG9ydCgpOwogICAgdGhpcy5yZXF1ZXN0KHVybCk7CiAgfSwKCiAgcmVxdWVzdDogZnVuY3Rpb24odXJsKSB7CiAgICB0aGlzLnVybCA9IHVybDsKICAgIHRoaXMubWV0aG9kID0gdGhpcy5vcHRpb25zLm1ldGhvZDsKICAgIHZhciBwYXJhbXMgPSBPYmplY3QuaXNTdHJpbmcodGhpcy5vcHRpb25zLnBhcmFtZXRlcnMpID8KICAgICAgICAgIHRoaXMub3B0aW9ucy5wYXJhbWV0ZXJzIDoKICAgICAgICAgIE9iamVjdC50b1F1ZXJ5U3RyaW5nKHRoaXMub3B0aW9ucy5wYXJhbWV0ZXJzKTsKCiAgICBpZiAoIVsnZ2V0JywgJ3Bvc3QnXS5pbmNsdWRlKHRoaXMubWV0aG9kKSkgewogICAgICBwYXJhbXMgKz0gKHBhcmFtcyA/ICcmJyA6ICcnKSArICJfbWV0aG9kPSIgKyB0aGlzLm1ldGhvZDsKICAgICAgdGhpcy5tZXRob2QgPSAncG9zdCc7CiAgICB9CgogICAgaWYgKHBhcmFtcyAmJiB0aGlzLm1ldGhvZCA9PT0gJ2dldCcpIHsKICAgICAgdGhpcy51cmwgKz0gKHRoaXMudXJsLmluY2x1ZGUoJz8nKSA/ICcmJyA6ICc/JykgKyBwYXJhbXM7CiAgICB9CgogICAgdGhpcy5wYXJhbWV0ZXJzID0gcGFyYW1zLnRvUXVlcnlQYXJhbXMoKTsKCiAgICB0cnkgewogICAgICB2YXIgcmVzcG9uc2UgPSBuZXcgQWpheC5SZXNwb25zZSh0aGlzKTsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5vbkNyZWF0ZSkgdGhpcy5vcHRpb25zLm9uQ3JlYXRlKHJlc3BvbnNlKTsKICAgICAgQWpheC5SZXNwb25kZXJzLmRpc3BhdGNoKCdvbkNyZWF0ZScsIHRoaXMsIHJlc3BvbnNlKTsKCiAgICAgIHRoaXMudHJhbnNwb3J0Lm9wZW4odGhpcy5tZXRob2QudG9VcHBlckNhc2UoKSwgdGhpcy51cmwsCiAgICAgICAgdGhpcy5vcHRpb25zLmFzeW5jaHJvbm91cyk7CgogICAgICBpZiAodGhpcy5vcHRpb25zLmFzeW5jaHJvbm91cykgdGhpcy5yZXNwb25kVG9SZWFkeVN0YXRlLmJpbmQodGhpcykuZGVmZXIoMSk7CgogICAgICB0aGlzLnRyYW5zcG9ydC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSB0aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzKTsKICAgICAgdGhpcy5zZXRSZXF1ZXN0SGVhZGVycygpOwoKICAgICAgdGhpcy5ib2R5ID0gdGhpcy5tZXRob2QgPT0gJ3Bvc3QnID8gKHRoaXMub3B0aW9ucy5wb3N0Qm9keSB8fCBwYXJhbXMpIDogbnVsbDsKICAgICAgdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLmJvZHkpOwoKICAgICAgLyogRm9yY2UgRmlyZWZveCB0byBoYW5kbGUgcmVhZHkgc3RhdGUgNCBmb3Igc3luY2hyb25vdXMgcmVxdWVzdHMgKi8KICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuYXN5bmNocm9ub3VzICYmIHRoaXMudHJhbnNwb3J0Lm92ZXJyaWRlTWltZVR5cGUpCiAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKCk7CgogICAgfQogICAgY2F0Y2ggKGUpIHsKICAgICAgdGhpcy5kaXNwYXRjaEV4Y2VwdGlvbihlKTsKICAgIH0KICB9LAoKICBvblN0YXRlQ2hhbmdlOiBmdW5jdGlvbigpIHsKICAgIHZhciByZWFkeVN0YXRlID0gdGhpcy50cmFuc3BvcnQucmVhZHlTdGF0ZTsKICAgIGlmIChyZWFkeVN0YXRlID4gMSAmJiAhKChyZWFkeVN0YXRlID09IDQpICYmIHRoaXMuX2NvbXBsZXRlKSkKICAgICAgdGhpcy5yZXNwb25kVG9SZWFkeVN0YXRlKHRoaXMudHJhbnNwb3J0LnJlYWR5U3RhdGUpOwogIH0sCgogIHNldFJlcXVlc3RIZWFkZXJzOiBmdW5jdGlvbigpIHsKICAgIHZhciBoZWFkZXJzID0gewogICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCcsCiAgICAgICdYLVByb3RvdHlwZS1WZXJzaW9uJzogUHJvdG90eXBlLlZlcnNpb24sCiAgICAgICdBY2NlcHQnOiAndGV4dC9qYXZhc2NyaXB0LCB0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKicKICAgIH07CgogICAgaWYgKHRoaXMubWV0aG9kID09ICdwb3N0JykgewogICAgICBoZWFkZXJzWydDb250ZW50LXR5cGUnXSA9IHRoaXMub3B0aW9ucy5jb250ZW50VHlwZSArCiAgICAgICAgKHRoaXMub3B0aW9ucy5lbmNvZGluZyA/ICc7IGNoYXJzZXQ9JyArIHRoaXMub3B0aW9ucy5lbmNvZGluZyA6ICcnKTsKCiAgICAgIC8qIEZvcmNlICJDb25uZWN0aW9uOiBjbG9zZSIgZm9yIG9sZGVyIE1vemlsbGEgYnJvd3NlcnMgdG8gd29yawogICAgICAgKiBhcm91bmQgYSBidWcgd2hlcmUgWE1MSHR0cFJlcXVlc3Qgc2VuZHMgYW4gaW5jb3JyZWN0CiAgICAgICAqIENvbnRlbnQtbGVuZ3RoIGhlYWRlci4gU2VlIE1vemlsbGEgQnVnemlsbGEgIzI0NjY1MS4KICAgICAgICovCiAgICAgIGlmICh0aGlzLnRyYW5zcG9ydC5vdmVycmlkZU1pbWVUeXBlICYmCiAgICAgICAgICAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvR2Vja29cLyhcZHs0fSkvKSB8fCBbMCwyMDA1XSlbMV0gPCAyMDA1KQogICAgICAgICAgICBoZWFkZXJzWydDb25uZWN0aW9uJ10gPSAnY2xvc2UnOwogICAgfQoKICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLnJlcXVlc3RIZWFkZXJzID09ICdvYmplY3QnKSB7CiAgICAgIHZhciBleHRyYXMgPSB0aGlzLm9wdGlvbnMucmVxdWVzdEhlYWRlcnM7CgogICAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24oZXh0cmFzLnB1c2gpKQogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBleHRyYXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpICs9IDIpCiAgICAgICAgICBoZWFkZXJzW2V4dHJhc1tpXV0gPSBleHRyYXNbaSsxXTsKICAgICAgZWxzZQogICAgICAgICRIKGV4dHJhcykuZWFjaChmdW5jdGlvbihwYWlyKSB7IGhlYWRlcnNbcGFpci5rZXldID0gcGFpci52YWx1ZSB9KTsKICAgIH0KCiAgICBmb3IgKHZhciBuYW1lIGluIGhlYWRlcnMpCiAgICAgIGlmIChoZWFkZXJzW25hbWVdICE9IG51bGwpCiAgICAgICAgdGhpcy50cmFuc3BvcnQuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCBoZWFkZXJzW25hbWVdKTsKICB9LAoKICBzdWNjZXNzOiBmdW5jdGlvbigpIHsKICAgIHZhciBzdGF0dXMgPSB0aGlzLmdldFN0YXR1cygpOwogICAgcmV0dXJuICFzdGF0dXMgfHwgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB8fCBzdGF0dXMgPT0gMzA0OwogIH0sCgogIGdldFN0YXR1czogZnVuY3Rpb24oKSB7CiAgICB0cnkgewogICAgICBpZiAodGhpcy50cmFuc3BvcnQuc3RhdHVzID09PSAxMjIzKSByZXR1cm4gMjA0OwogICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuc3RhdHVzIHx8IDA7CiAgICB9IGNhdGNoIChlKSB7IHJldHVybiAwIH0KICB9LAoKICByZXNwb25kVG9SZWFkeVN0YXRlOiBmdW5jdGlvbihyZWFkeVN0YXRlKSB7CiAgICB2YXIgc3RhdGUgPSBBamF4LlJlcXVlc3QuRXZlbnRzW3JlYWR5U3RhdGVdLCByZXNwb25zZSA9IG5ldyBBamF4LlJlc3BvbnNlKHRoaXMpOwoKICAgIGlmIChzdGF0ZSA9PSAnQ29tcGxldGUnKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5fY29tcGxldGUgPSB0cnVlOwogICAgICAgICh0aGlzLm9wdGlvbnNbJ29uJyArIHJlc3BvbnNlLnN0YXR1c10KICAgICAgICAgfHwgdGhpcy5vcHRpb25zWydvbicgKyAodGhpcy5zdWNjZXNzKCkgPyAnU3VjY2VzcycgOiAnRmFpbHVyZScpXQogICAgICAgICB8fCBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbikocmVzcG9uc2UsIHJlc3BvbnNlLmhlYWRlckpTT04pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV4Y2VwdGlvbihlKTsKICAgICAgfQoKICAgICAgdmFyIGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdDb250ZW50LXR5cGUnKTsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5ldmFsSlMgPT0gJ2ZvcmNlJwogICAgICAgICAgfHwgKHRoaXMub3B0aW9ucy5ldmFsSlMgJiYgdGhpcy5pc1NhbWVPcmlnaW4oKSAmJiBjb250ZW50VHlwZQogICAgICAgICAgJiYgY29udGVudFR5cGUubWF0Y2goL15ccyoodGV4dHxhcHBsaWNhdGlvbilcLyh4LSk/KGphdmF8ZWNtYSlzY3JpcHQoOy4qKT9ccyokL2kpKSkKICAgICAgICB0aGlzLmV2YWxSZXNwb25zZSgpOwogICAgfQoKICAgIHRyeSB7CiAgICAgICh0aGlzLm9wdGlvbnNbJ29uJyArIHN0YXRlXSB8fCBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbikocmVzcG9uc2UsIHJlc3BvbnNlLmhlYWRlckpTT04pOwogICAgICBBamF4LlJlc3BvbmRlcnMuZGlzcGF0Y2goJ29uJyArIHN0YXRlLCB0aGlzLCByZXNwb25zZSwgcmVzcG9uc2UuaGVhZGVySlNPTik7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRoaXMuZGlzcGF0Y2hFeGNlcHRpb24oZSk7CiAgICB9CgogICAgaWYgKHN0YXRlID09ICdDb21wbGV0ZScpIHsKICAgICAgdGhpcy50cmFuc3BvcnQub25yZWFkeXN0YXRlY2hhbmdlID0gUHJvdG90eXBlLmVtcHR5RnVuY3Rpb247CiAgICB9CiAgfSwKCiAgaXNTYW1lT3JpZ2luOiBmdW5jdGlvbigpIHsKICAgIHZhciBtID0gdGhpcy51cmwubWF0Y2goL15ccypodHRwcz86XC9cL1teXC9dKi8pOwogICAgcmV0dXJuICFtIHx8IChtWzBdID09ICcje3Byb3RvY29sfS8vI3tkb21haW59I3twb3J0fScuaW50ZXJwb2xhdGUoewogICAgICBwcm90b2NvbDogbG9jYXRpb24ucHJvdG9jb2wsCiAgICAgIGRvbWFpbjogZG9jdW1lbnQuZG9tYWluLAogICAgICBwb3J0OiBsb2NhdGlvbi5wb3J0ID8gJzonICsgbG9jYXRpb24ucG9ydCA6ICcnCiAgICB9KSk7CiAgfSwKCiAgZ2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuZ2V0UmVzcG9uc2VIZWFkZXIobmFtZSkgfHwgbnVsbDsKICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIG51bGw7IH0KICB9LAoKICBldmFsUmVzcG9uc2U6IGZ1bmN0aW9uKCkgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIGV2YWwoKHRoaXMudHJhbnNwb3J0LnJlc3BvbnNlVGV4dCB8fCAnJykudW5maWx0ZXJKU09OKCkpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aGlzLmRpc3BhdGNoRXhjZXB0aW9uKGUpOwogICAgfQogIH0sCgogIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHsKICAgICh0aGlzLm9wdGlvbnMub25FeGNlcHRpb24gfHwgUHJvdG90eXBlLmVtcHR5RnVuY3Rpb24pKHRoaXMsIGV4Y2VwdGlvbik7CiAgICBBamF4LlJlc3BvbmRlcnMuZGlzcGF0Y2goJ29uRXhjZXB0aW9uJywgdGhpcywgZXhjZXB0aW9uKTsKICB9Cn0pOwoKQWpheC5SZXF1ZXN0LkV2ZW50cyA9CiAgWydVbmluaXRpYWxpemVkJywgJ0xvYWRpbmcnLCAnTG9hZGVkJywgJ0ludGVyYWN0aXZlJywgJ0NvbXBsZXRlJ107CgoKCgoKCgoKQWpheC5SZXNwb25zZSA9IENsYXNzLmNyZWF0ZSh7CiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ocmVxdWVzdCl7CiAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwogICAgdmFyIHRyYW5zcG9ydCAgPSB0aGlzLnRyYW5zcG9ydCAgPSByZXF1ZXN0LnRyYW5zcG9ydCwKICAgICAgICByZWFkeVN0YXRlID0gdGhpcy5yZWFkeVN0YXRlID0gdHJhbnNwb3J0LnJlYWR5U3RhdGU7CgogICAgaWYgKChyZWFkeVN0YXRlID4gMiAmJiAhUHJvdG90eXBlLkJyb3dzZXIuSUUpIHx8IHJlYWR5U3RhdGUgPT0gNCkgewogICAgICB0aGlzLnN0YXR1cyAgICAgICA9IHRoaXMuZ2V0U3RhdHVzKCk7CiAgICAgIHRoaXMuc3RhdHVzVGV4dCAgID0gdGhpcy5nZXRTdGF0dXNUZXh0KCk7CiAgICAgIHRoaXMucmVzcG9uc2VUZXh0ID0gU3RyaW5nLmludGVycHJldCh0cmFuc3BvcnQucmVzcG9uc2VUZXh0KTsKICAgICAgdGhpcy5oZWFkZXJKU09OICAgPSB0aGlzLl9nZXRIZWFkZXJKU09OKCk7CiAgICB9CgogICAgaWYgKHJlYWR5U3RhdGUgPT0gNCkgewogICAgICB2YXIgeG1sID0gdHJhbnNwb3J0LnJlc3BvbnNlWE1MOwogICAgICB0aGlzLnJlc3BvbnNlWE1MICA9IE9iamVjdC5pc1VuZGVmaW5lZCh4bWwpID8gbnVsbCA6IHhtbDsKICAgICAgdGhpcy5yZXNwb25zZUpTT04gPSB0aGlzLl9nZXRSZXNwb25zZUpTT04oKTsKICAgIH0KICB9LAoKICBzdGF0dXM6ICAgICAgMCwKCiAgc3RhdHVzVGV4dDogJycsCgogIGdldFN0YXR1czogQWpheC5SZXF1ZXN0LnByb3RvdHlwZS5nZXRTdGF0dXMsCgogIGdldFN0YXR1c1RleHQ6IGZ1bmN0aW9uKCkgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIHRoaXMudHJhbnNwb3J0LnN0YXR1c1RleHQgfHwgJyc7CiAgICB9IGNhdGNoIChlKSB7IHJldHVybiAnJyB9CiAgfSwKCiAgZ2V0SGVhZGVyOiBBamF4LlJlcXVlc3QucHJvdG90eXBlLmdldEhlYWRlciwKCiAgZ2V0QWxsSGVhZGVyczogZnVuY3Rpb24oKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gdGhpcy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKTsKICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIG51bGwgfQogIH0sCgogIGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuZ2V0UmVzcG9uc2VIZWFkZXIobmFtZSk7CiAgfSwKCiAgZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKTsKICB9LAoKICBfZ2V0SGVhZGVySlNPTjogZnVuY3Rpb24oKSB7CiAgICB2YXIganNvbiA9IHRoaXMuZ2V0SGVhZGVyKCdYLUpTT04nKTsKICAgIGlmICghanNvbikgcmV0dXJuIG51bGw7CgogICAgdHJ5IHsKICAgICAganNvbiA9IGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoanNvbikpOwogICAgfSBjYXRjaChlKSB7CiAgICB9CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGpzb24uZXZhbEpTT04odGhpcy5yZXF1ZXN0Lm9wdGlvbnMuc2FuaXRpemVKU09OIHx8CiAgICAgICAgIXRoaXMucmVxdWVzdC5pc1NhbWVPcmlnaW4oKSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRoaXMucmVxdWVzdC5kaXNwYXRjaEV4Y2VwdGlvbihlKTsKICAgIH0KICB9LAoKICBfZ2V0UmVzcG9uc2VKU09OOiBmdW5jdGlvbigpIHsKICAgIHZhciBvcHRpb25zID0gdGhpcy5yZXF1ZXN0Lm9wdGlvbnM7CiAgICBpZiAoIW9wdGlvbnMuZXZhbEpTT04gfHwgKG9wdGlvbnMuZXZhbEpTT04gIT0gJ2ZvcmNlJyAmJgogICAgICAhKHRoaXMuZ2V0SGVhZGVyKCdDb250ZW50LXR5cGUnKSB8fCAnJykuaW5jbHVkZSgnYXBwbGljYXRpb24vanNvbicpKSB8fAogICAgICAgIHRoaXMucmVzcG9uc2VUZXh0LmJsYW5rKCkpCiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgIHRyeSB7CiAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlVGV4dC5ldmFsSlNPTihvcHRpb25zLnNhbml0aXplSlNPTiB8fAogICAgICAgICF0aGlzLnJlcXVlc3QuaXNTYW1lT3JpZ2luKCkpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aGlzLnJlcXVlc3QuZGlzcGF0Y2hFeGNlcHRpb24oZSk7CiAgICB9CiAgfQp9KTsKCkFqYXguVXBkYXRlciA9IENsYXNzLmNyZWF0ZShBamF4LlJlcXVlc3QsIHsKICBpbml0aWFsaXplOiBmdW5jdGlvbigkc3VwZXIsIGNvbnRhaW5lciwgdXJsLCBvcHRpb25zKSB7CiAgICB0aGlzLmNvbnRhaW5lciA9IHsKICAgICAgc3VjY2VzczogKGNvbnRhaW5lci5zdWNjZXNzIHx8IGNvbnRhaW5lciksCiAgICAgIGZhaWx1cmU6IChjb250YWluZXIuZmFpbHVyZSB8fCAoY29udGFpbmVyLnN1Y2Nlc3MgPyBudWxsIDogY29udGFpbmVyKSkKICAgIH07CgogICAgb3B0aW9ucyA9IE9iamVjdC5jbG9uZShvcHRpb25zKTsKICAgIHZhciBvbkNvbXBsZXRlID0gb3B0aW9ucy5vbkNvbXBsZXRlOwogICAgb3B0aW9ucy5vbkNvbXBsZXRlID0gKGZ1bmN0aW9uKHJlc3BvbnNlLCBqc29uKSB7CiAgICAgIHRoaXMudXBkYXRlQ29udGVudChyZXNwb25zZS5yZXNwb25zZVRleHQpOwogICAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24ob25Db21wbGV0ZSkpIG9uQ29tcGxldGUocmVzcG9uc2UsIGpzb24pOwogICAgfSkuYmluZCh0aGlzKTsKCiAgICAkc3VwZXIodXJsLCBvcHRpb25zKTsKICB9LAoKICB1cGRhdGVDb250ZW50OiBmdW5jdGlvbihyZXNwb25zZVRleHQpIHsKICAgIHZhciByZWNlaXZlciA9IHRoaXMuY29udGFpbmVyW3RoaXMuc3VjY2VzcygpID8gJ3N1Y2Nlc3MnIDogJ2ZhaWx1cmUnXSwKICAgICAgICBvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKICAgIGlmICghb3B0aW9ucy5ldmFsU2NyaXB0cykgcmVzcG9uc2VUZXh0ID0gcmVzcG9uc2VUZXh0LnN0cmlwU2NyaXB0cygpOwoKICAgIGlmIChyZWNlaXZlciA9ICQocmVjZWl2ZXIpKSB7CiAgICAgIGlmIChvcHRpb25zLmluc2VydGlvbikgewogICAgICAgIGlmIChPYmplY3QuaXNTdHJpbmcob3B0aW9ucy5pbnNlcnRpb24pKSB7CiAgICAgICAgICB2YXIgaW5zZXJ0aW9uID0geyB9OyBpbnNlcnRpb25bb3B0aW9ucy5pbnNlcnRpb25dID0gcmVzcG9uc2VUZXh0OwogICAgICAgICAgcmVjZWl2ZXIuaW5zZXJ0KGluc2VydGlvbik7CiAgICAgICAgfQogICAgICAgIGVsc2Ugb3B0aW9ucy5pbnNlcnRpb24ocmVjZWl2ZXIsIHJlc3BvbnNlVGV4dCk7CiAgICAgIH0KICAgICAgZWxzZSByZWNlaXZlci51cGRhdGUocmVzcG9uc2VUZXh0KTsKICAgIH0KICB9Cn0pOwoKQWpheC5QZXJpb2RpY2FsVXBkYXRlciA9IENsYXNzLmNyZWF0ZShBamF4LkJhc2UsIHsKICBpbml0aWFsaXplOiBmdW5jdGlvbigkc3VwZXIsIGNvbnRhaW5lciwgdXJsLCBvcHRpb25zKSB7CiAgICAkc3VwZXIob3B0aW9ucyk7CiAgICB0aGlzLm9uQ29tcGxldGUgPSB0aGlzLm9wdGlvbnMub25Db21wbGV0ZTsKCiAgICB0aGlzLmZyZXF1ZW5jeSA9ICh0aGlzLm9wdGlvbnMuZnJlcXVlbmN5IHx8IDIpOwogICAgdGhpcy5kZWNheSA9ICh0aGlzLm9wdGlvbnMuZGVjYXkgfHwgMSk7CgogICAgdGhpcy51cGRhdGVyID0geyB9OwogICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7CiAgICB0aGlzLnVybCA9IHVybDsKCiAgICB0aGlzLnN0YXJ0KCk7CiAgfSwKCiAgc3RhcnQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5vcHRpb25zLm9uQ29tcGxldGUgPSB0aGlzLnVwZGF0ZUNvbXBsZXRlLmJpbmQodGhpcyk7CiAgICB0aGlzLm9uVGltZXJFdmVudCgpOwogIH0sCgogIHN0b3A6IGZ1bmN0aW9uKCkgewogICAgdGhpcy51cGRhdGVyLm9wdGlvbnMub25Db21wbGV0ZSA9IHVuZGVmaW5lZDsKICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICh0aGlzLm9uQ29tcGxldGUgfHwgUHJvdG90eXBlLmVtcHR5RnVuY3Rpb24pLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSwKCiAgdXBkYXRlQ29tcGxldGU6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICBpZiAodGhpcy5vcHRpb25zLmRlY2F5KSB7CiAgICAgIHRoaXMuZGVjYXkgPSAocmVzcG9uc2UucmVzcG9uc2VUZXh0ID09IHRoaXMubGFzdFRleHQgPwogICAgICAgIHRoaXMuZGVjYXkgKiB0aGlzLm9wdGlvbnMuZGVjYXkgOiAxKTsKCiAgICAgIHRoaXMubGFzdFRleHQgPSByZXNwb25zZS5yZXNwb25zZVRleHQ7CiAgICB9CiAgICB0aGlzLnRpbWVyID0gdGhpcy5vblRpbWVyRXZlbnQuYmluZCh0aGlzKS5kZWxheSh0aGlzLmRlY2F5ICogdGhpcy5mcmVxdWVuY3kpOwogIH0sCgogIG9uVGltZXJFdmVudDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnVwZGF0ZXIgPSBuZXcgQWpheC5VcGRhdGVyKHRoaXMuY29udGFpbmVyLCB0aGlzLnVybCwgdGhpcy5vcHRpb25zKTsKICB9Cn0pOwoKKGZ1bmN0aW9uKEdMT0JBTCkgewoKICB2YXIgVU5ERUZJTkVEOwogIHZhciBTTElDRSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsKCiAgdmFyIERJViA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoKCiAgZnVuY3Rpb24gJChlbGVtZW50KSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGVsZW1lbnRzID0gW10sIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykKICAgICAgICBlbGVtZW50cy5wdXNoKCQoYXJndW1lbnRzW2ldKSk7CiAgICAgIHJldHVybiBlbGVtZW50czsKICAgIH0KCiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKGVsZW1lbnQpKQogICAgICBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudCk7CiAgICByZXR1cm4gRWxlbWVudC5leHRlbmQoZWxlbWVudCk7CiAgfQoKICBHTE9CQUwuJCA9ICQ7CgoKICBpZiAoIUdMT0JBTC5Ob2RlKSBHTE9CQUwuTm9kZSA9IHt9OwoKICBpZiAoIUdMT0JBTC5Ob2RlLkVMRU1FTlRfTk9ERSkgewogICAgT2JqZWN0LmV4dGVuZChHTE9CQUwuTm9kZSwgewogICAgICBFTEVNRU5UX05PREU6ICAgICAgICAgICAgICAgIDEsCiAgICAgIEFUVFJJQlVURV9OT0RFOiAgICAgICAgICAgICAgMiwKICAgICAgVEVYVF9OT0RFOiAgICAgICAgICAgICAgICAgICAzLAogICAgICBDREFUQV9TRUNUSU9OX05PREU6ICAgICAgICAgIDQsCiAgICAgIEVOVElUWV9SRUZFUkVOQ0VfTk9ERTogICAgICAgNSwKICAgICAgRU5USVRZX05PREU6ICAgICAgICAgICAgICAgICA2LAogICAgICBQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREU6IDcsCiAgICAgIENPTU1FTlRfTk9ERTogICAgICAgICAgICAgICAgOCwKICAgICAgRE9DVU1FTlRfTk9ERTogICAgICAgICAgICAgICA5LAogICAgICBET0NVTUVOVF9UWVBFX05PREU6ICAgICAgICAgMTAsCiAgICAgIERPQ1VNRU5UX0ZSQUdNRU5UX05PREU6ICAgICAxMSwKICAgICAgTk9UQVRJT05fTk9ERTogICAgICAgICAgICAgIDEyCiAgICB9KTsKICB9CgogIHZhciBFTEVNRU5UX0NBQ0hFID0ge307CgogIGZ1bmN0aW9uIHNob3VsZFVzZUNyZWF0aW9uQ2FjaGUodGFnTmFtZSwgYXR0cmlidXRlcykgewogICAgaWYgKHRhZ05hbWUgPT09ICdzZWxlY3QnKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoJ3R5cGUnIGluIGF0dHJpYnV0ZXMpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgdmFyIEhBU19FWFRFTkRFRF9DUkVBVEVfRUxFTUVOVF9TWU5UQVggPSAoZnVuY3Rpb24oKXsKICAgIHRyeSB7CiAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJzxpbnB1dCBuYW1lPSJ4Ij4nKTsKICAgICAgcmV0dXJuIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JyAmJiBlbC5uYW1lID09PSAneCc7CiAgICB9CiAgICBjYXRjaChlcnIpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0pKCk7CgoKICB2YXIgb2xkRWxlbWVudCA9IEdMT0JBTC5FbGVtZW50OwogIGZ1bmN0aW9uIEVsZW1lbnQodGFnTmFtZSwgYXR0cmlidXRlcykgewogICAgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMgfHwge307CiAgICB0YWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpOwoKICAgIGlmIChIQVNfRVhURU5ERURfQ1JFQVRFX0VMRU1FTlRfU1lOVEFYICYmIGF0dHJpYnV0ZXMubmFtZSkgewogICAgICB0YWdOYW1lID0gJzwnICsgdGFnTmFtZSArICcgbmFtZT0iJyArIGF0dHJpYnV0ZXMubmFtZSArICciPic7CiAgICAgIGRlbGV0ZSBhdHRyaWJ1dGVzLm5hbWU7CiAgICAgIHJldHVybiBFbGVtZW50LndyaXRlQXR0cmlidXRlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSksIGF0dHJpYnV0ZXMpOwogICAgfQoKICAgIGlmICghRUxFTUVOVF9DQUNIRVt0YWdOYW1lXSkKICAgICAgRUxFTUVOVF9DQUNIRVt0YWdOYW1lXSA9IEVsZW1lbnQuZXh0ZW5kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSkpOwoKICAgIHZhciBub2RlID0gc2hvdWxkVXNlQ3JlYXRpb25DYWNoZSh0YWdOYW1lLCBhdHRyaWJ1dGVzKSA/CiAgICAgRUxFTUVOVF9DQUNIRVt0YWdOYW1lXS5jbG9uZU5vZGUoZmFsc2UpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKCiAgICByZXR1cm4gRWxlbWVudC53cml0ZUF0dHJpYnV0ZShub2RlLCBhdHRyaWJ1dGVzKTsKICB9CgogIEdMT0JBTC5FbGVtZW50ID0gRWxlbWVudDsKCiAgT2JqZWN0LmV4dGVuZChHTE9CQUwuRWxlbWVudCwgb2xkRWxlbWVudCB8fCB7fSk7CiAgaWYgKG9sZEVsZW1lbnQpIEdMT0JBTC5FbGVtZW50LnByb3RvdHlwZSA9IG9sZEVsZW1lbnQucHJvdG90eXBlOwoKICBFbGVtZW50Lk1ldGhvZHMgPSB7IEJ5VGFnOiB7fSwgU2ltdWxhdGVkOiB7fSB9OwoKICB2YXIgbWV0aG9kcyA9IHt9OwoKICB2YXIgSU5TUEVDVF9BVFRSSUJVVEVTID0geyBpZDogJ2lkJywgY2xhc3NOYW1lOiAnY2xhc3MnIH07CiAgZnVuY3Rpb24gaW5zcGVjdChlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciByZXN1bHQgPSAnPCcgKyBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKCiAgICB2YXIgYXR0cmlidXRlLCB2YWx1ZTsKICAgIGZvciAodmFyIHByb3BlcnR5IGluIElOU1BFQ1RfQVRUUklCVVRFUykgewogICAgICBhdHRyaWJ1dGUgPSBJTlNQRUNUX0FUVFJJQlVURVNbcHJvcGVydHldOwogICAgICB2YWx1ZSA9IChlbGVtZW50W3Byb3BlcnR5XSB8fCAnJykudG9TdHJpbmcoKTsKICAgICAgaWYgKHZhbHVlKSByZXN1bHQgKz0gJyAnICsgYXR0cmlidXRlICsgJz0nICsgdmFsdWUuaW5zcGVjdCh0cnVlKTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0ICsgJz4nOwogIH0KCiAgbWV0aG9kcy5pbnNwZWN0ID0gaW5zcGVjdDsKCgogIGZ1bmN0aW9uIHZpc2libGUoZWxlbWVudCkgewogICAgcmV0dXJuICQoZWxlbWVudCkuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnOwogIH0KCiAgZnVuY3Rpb24gdG9nZ2xlKGVsZW1lbnQsIGJvb2wpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChib29sKSkKICAgICAgYm9vbCA9ICFFbGVtZW50LnZpc2libGUoZWxlbWVudCk7CiAgICBFbGVtZW50W2Jvb2wgPyAnc2hvdycgOiAnaGlkZSddKGVsZW1lbnQpOwoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gaGlkZShlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gc2hvdyhlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKCiAgT2JqZWN0LmV4dGVuZChtZXRob2RzLCB7CiAgICB2aXNpYmxlOiB2aXNpYmxlLAogICAgdG9nZ2xlOiAgdG9nZ2xlLAogICAgaGlkZTogICAgaGlkZSwKICAgIHNob3c6ICAgIHNob3cKICB9KTsKCgogIGZ1bmN0aW9uIHJlbW92ZShlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgdmFyIFNFTEVDVF9FTEVNRU5UX0lOTkVSSFRNTF9CVUdHWSA9IChmdW5jdGlvbigpewogICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksCiAgICAgICAgaXNCdWdneSA9IHRydWU7CiAgICBlbC5pbm5lckhUTUwgPSAiPG9wdGlvbiB2YWx1ZT1cInRlc3RcIj50ZXN0PC9vcHRpb24+IjsKICAgIGlmIChlbC5vcHRpb25zICYmIGVsLm9wdGlvbnNbMF0pIHsKICAgICAgaXNCdWdneSA9IGVsLm9wdGlvbnNbMF0ubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gIk9QVElPTiI7CiAgICB9CiAgICBlbCA9IG51bGw7CiAgICByZXR1cm4gaXNCdWdneTsKICB9KSgpOwoKICB2YXIgVEFCTEVfRUxFTUVOVF9JTk5FUkhUTUxfQlVHR1kgPSAoZnVuY3Rpb24oKXsKICAgIHRyeSB7CiAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgIGlmIChlbCAmJiBlbC50Qm9kaWVzKSB7CiAgICAgICAgZWwuaW5uZXJIVE1MID0gIjx0Ym9keT48dHI+PHRkPnRlc3Q8L3RkPjwvdHI+PC90Ym9keT4iOwogICAgICAgIHZhciBpc0J1Z2d5ID0gdHlwZW9mIGVsLnRCb2RpZXNbMF0gPT0gInVuZGVmaW5lZCI7CiAgICAgICAgZWwgPSBudWxsOwogICAgICAgIHJldHVybiBpc0J1Z2d5OwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0pKCk7CgogIHZhciBMSU5LX0VMRU1FTlRfSU5ORVJIVE1MX0JVR0dZID0gKGZ1bmN0aW9uKCkgewogICAgdHJ5IHsKICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGVsLmlubmVySFRNTCA9ICI8bGluayAvPiI7CiAgICAgIHZhciBpc0J1Z2d5ID0gKGVsLmNoaWxkTm9kZXMubGVuZ3RoID09PSAwKTsKICAgICAgZWwgPSBudWxsOwogICAgICByZXR1cm4gaXNCdWdneTsKICAgIH0gY2F0Y2goZSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9KSgpOwoKICB2YXIgQU5ZX0lOTkVSSFRNTF9CVUdHWSA9IFNFTEVDVF9FTEVNRU5UX0lOTkVSSFRNTF9CVUdHWSB8fAogICBUQUJMRV9FTEVNRU5UX0lOTkVSSFRNTF9CVUdHWSB8fCBMSU5LX0VMRU1FTlRfSU5ORVJIVE1MX0JVR0dZOwoKICB2YXIgU0NSSVBUX0VMRU1FTlRfUkVKRUNUU19URVhUTk9ERV9BUFBFTkRJTkcgPSAoZnVuY3Rpb24gKCkgewogICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSwKICAgICAgICBpc0J1Z2d5ID0gZmFsc2U7CiAgICB0cnkgewogICAgICBzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSk7CiAgICAgIGlzQnVnZ3kgPSAhcy5maXJzdENoaWxkIHx8CiAgICAgICAgcy5maXJzdENoaWxkICYmIHMuZmlyc3RDaGlsZC5ub2RlVHlwZSAhPT0gMzsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaXNCdWdneSA9IHRydWU7CiAgICB9CiAgICBzID0gbnVsbDsKICAgIHJldHVybiBpc0J1Z2d5OwogIH0pKCk7CgogIGZ1bmN0aW9uIHVwZGF0ZShlbGVtZW50LCBjb250ZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICB2YXIgZGVzY2VuZGFudHMgPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJyksCiAgICAgaSA9IGRlc2NlbmRhbnRzLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHB1cmdlRWxlbWVudChkZXNjZW5kYW50c1tpXSk7CgogICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC50b0VsZW1lbnQpCiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnRvRWxlbWVudCgpOwoKICAgIGlmIChPYmplY3QuaXNFbGVtZW50KGNvbnRlbnQpKQogICAgICByZXR1cm4gZWxlbWVudC51cGRhdGUoKS5pbnNlcnQoY29udGVudCk7CgoKICAgIGNvbnRlbnQgPSBPYmplY3QudG9IVE1MKGNvbnRlbnQpOwogICAgdmFyIHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKTsKCiAgICBpZiAodGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgU0NSSVBUX0VMRU1FTlRfUkVKRUNUU19URVhUTk9ERV9BUFBFTkRJTkcpIHsKICAgICAgZWxlbWVudC50ZXh0ID0gY29udGVudDsKICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICB9CgogICAgaWYgKEFOWV9JTk5FUkhUTUxfQlVHR1kpIHsKICAgICAgaWYgKHRhZ05hbWUgaW4gSU5TRVJUSU9OX1RSQU5TTEFUSU9OUy50YWdzKSB7CiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkKICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTsKCiAgICAgICAgdmFyIG5vZGVzID0gZ2V0Q29udGVudEZyb21Bbm9ueW1vdXNFbGVtZW50KHRhZ05hbWUsIGNvbnRlbnQuc3RyaXBTY3JpcHRzKCkpOwogICAgICAgIGZvciAodmFyIGkgPSAwLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykKICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobm9kZSk7CgogICAgICB9IGVsc2UgaWYgKExJTktfRUxFTUVOVF9JTk5FUkhUTUxfQlVHR1kgJiYgT2JqZWN0LmlzU3RyaW5nKGNvbnRlbnQpICYmIGNvbnRlbnQuaW5kZXhPZignPGxpbmsnKSA+IC0xKSB7CiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkKICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTsKCiAgICAgICAgdmFyIG5vZGVzID0gZ2V0Q29udGVudEZyb21Bbm9ueW1vdXNFbGVtZW50KHRhZ05hbWUsCiAgICAgICAgIGNvbnRlbnQuc3RyaXBTY3JpcHRzKCksIHRydWUpOwoKICAgICAgICBmb3IgKHZhciBpID0gMCwgbm9kZTsgbm9kZSA9IG5vZGVzW2ldOyBpKyspCiAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG5vZGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudC5zdHJpcFNjcmlwdHMoKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBjb250ZW50LnN0cmlwU2NyaXB0cygpOwogICAgfQoKICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiByZXBsYWNlKGVsZW1lbnQsIGNvbnRlbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwoKICAgIGlmIChjb250ZW50ICYmIGNvbnRlbnQudG9FbGVtZW50KSB7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnRvRWxlbWVudCgpOwogICAgfSBlbHNlIGlmICghT2JqZWN0LmlzRWxlbWVudChjb250ZW50KSkgewogICAgICBjb250ZW50ID0gT2JqZWN0LnRvSFRNTChjb250ZW50KTsKICAgICAgdmFyIHJhbmdlID0gZWxlbWVudC5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgIHJhbmdlLnNlbGVjdE5vZGUoZWxlbWVudCk7CiAgICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOwogICAgICBjb250ZW50ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGNvbnRlbnQuc3RyaXBTY3JpcHRzKCkpOwogICAgfQoKICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY29udGVudCwgZWxlbWVudCk7CiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIHZhciBJTlNFUlRJT05fVFJBTlNMQVRJT05TID0gewogICAgYmVmb3JlOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7CiAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgZWxlbWVudCk7CiAgICB9LAogICAgdG9wOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7CiAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIGVsZW1lbnQuZmlyc3RDaGlsZCk7CiAgICB9LAogICAgYm90dG9tOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7CiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICB9LAogICAgYWZ0ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHsKICAgICAgZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBlbGVtZW50Lm5leHRTaWJsaW5nKTsKICAgIH0sCgogICAgdGFnczogewogICAgICBUQUJMRTogIFsnPHRhYmxlPicsICAgICAgICAgICAgICAgICc8L3RhYmxlPicsICAgICAgICAgICAgICAgICAgIDFdLAogICAgICBUQk9EWTogIFsnPHRhYmxlPjx0Ym9keT4nLCAgICAgICAgICc8L3Rib2R5PjwvdGFibGU+JywgICAgICAgICAgIDJdLAogICAgICBUUjogICAgIFsnPHRhYmxlPjx0Ym9keT48dHI+JywgICAgICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nLCAgICAgIDNdLAogICAgICBURDogICAgIFsnPHRhYmxlPjx0Ym9keT48dHI+PHRkPicsICc8L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPicsIDRdLAogICAgICBTRUxFQ1Q6IFsnPHNlbGVjdD4nLCAgICAgICAgICAgICAgICc8L3NlbGVjdD4nLCAgICAgICAgICAgICAgICAgIDFdCiAgICB9CiAgfTsKCiAgdmFyIHRhZ3MgPSBJTlNFUlRJT05fVFJBTlNMQVRJT05TLnRhZ3M7CgogIE9iamVjdC5leHRlbmQodGFncywgewogICAgVEhFQUQ6IHRhZ3MuVEJPRFksCiAgICBURk9PVDogdGFncy5UQk9EWSwKICAgIFRIOiAgICB0YWdzLlRECiAgfSk7CgogIGZ1bmN0aW9uIHJlcGxhY2VfSUUoZWxlbWVudCwgY29udGVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBpZiAoY29udGVudCAmJiBjb250ZW50LnRvRWxlbWVudCkKICAgICAgY29udGVudCA9IGNvbnRlbnQudG9FbGVtZW50KCk7CiAgICBpZiAoT2JqZWN0LmlzRWxlbWVudChjb250ZW50KSkgewogICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNvbnRlbnQsIGVsZW1lbnQpOwogICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICBjb250ZW50ID0gT2JqZWN0LnRvSFRNTChjb250ZW50KTsKICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGUsIHRhZ05hbWUgPSBwYXJlbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpOwoKICAgIGlmICh0YWdOYW1lIGluIElOU0VSVElPTl9UUkFOU0xBVElPTlMudGFncykgewogICAgICB2YXIgbmV4dFNpYmxpbmcgPSBFbGVtZW50Lm5leHQoZWxlbWVudCk7CiAgICAgIHZhciBmcmFnbWVudHMgPSBnZXRDb250ZW50RnJvbUFub255bW91c0VsZW1lbnQoCiAgICAgICB0YWdOYW1lLCBjb250ZW50LnN0cmlwU2NyaXB0cygpKTsKCiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChlbGVtZW50KTsKCiAgICAgIHZhciBpdGVyYXRvcjsKICAgICAgaWYgKG5leHRTaWJsaW5nKQogICAgICAgIGl0ZXJhdG9yID0gZnVuY3Rpb24obm9kZSkgeyBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIG5leHRTaWJsaW5nKSB9OwogICAgICBlbHNlCiAgICAgICAgaXRlcmF0b3IgPSBmdW5jdGlvbihub2RlKSB7IHBhcmVudC5hcHBlbmRDaGlsZChub2RlKTsgfQoKICAgICAgZnJhZ21lbnRzLmVhY2goaXRlcmF0b3IpOwogICAgfSBlbHNlIHsKICAgICAgZWxlbWVudC5vdXRlckhUTUwgPSBjb250ZW50LnN0cmlwU2NyaXB0cygpOwogICAgfQoKICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBpZiAoJ291dGVySFRNTCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KQogICAgcmVwbGFjZSA9IHJlcGxhY2VfSUU7CgogIGZ1bmN0aW9uIGlzQ29udGVudChjb250ZW50KSB7CiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKGNvbnRlbnQpIHx8IGNvbnRlbnQgPT09IG51bGwpIHJldHVybiBmYWxzZTsKCiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKGNvbnRlbnQpIHx8IE9iamVjdC5pc051bWJlcihjb250ZW50KSkgcmV0dXJuIHRydWU7CiAgICBpZiAoT2JqZWN0LmlzRWxlbWVudChjb250ZW50KSkgcmV0dXJuIHRydWU7CiAgICBpZiAoY29udGVudC50b0VsZW1lbnQgfHwgY29udGVudC50b0hUTUwpIHJldHVybiB0cnVlOwoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGluc2VydENvbnRlbnRBdChlbGVtZW50LCBjb250ZW50LCBwb3NpdGlvbikgewogICAgcG9zaXRpb24gICA9IHBvc2l0aW9uLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgbWV0aG9kID0gSU5TRVJUSU9OX1RSQU5TTEFUSU9OU1twb3NpdGlvbl07CgogICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC50b0VsZW1lbnQpIGNvbnRlbnQgPSBjb250ZW50LnRvRWxlbWVudCgpOwogICAgaWYgKE9iamVjdC5pc0VsZW1lbnQoY29udGVudCkpIHsKICAgICAgbWV0aG9kKGVsZW1lbnQsIGNvbnRlbnQpOwogICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICBjb250ZW50ID0gT2JqZWN0LnRvSFRNTChjb250ZW50KTsKICAgIHZhciB0YWdOYW1lID0gKChwb3NpdGlvbiA9PT0gJ2JlZm9yZScgfHwgcG9zaXRpb24gPT09ICdhZnRlcicpID8KICAgICBlbGVtZW50LnBhcmVudE5vZGUgOiBlbGVtZW50KS50YWdOYW1lLnRvVXBwZXJDYXNlKCk7CgogICAgdmFyIGNoaWxkTm9kZXMgPSBnZXRDb250ZW50RnJvbUFub255bW91c0VsZW1lbnQodGFnTmFtZSwgY29udGVudC5zdHJpcFNjcmlwdHMoKSk7CgogICAgaWYgKHBvc2l0aW9uID09PSAndG9wJyB8fCBwb3NpdGlvbiA9PT0gJ2FmdGVyJykgY2hpbGROb2Rlcy5yZXZlcnNlKCk7CgogICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBjaGlsZE5vZGVzW2ldOyBpKyspCiAgICAgIG1ldGhvZChlbGVtZW50LCBub2RlKTsKCiAgICBjb250ZW50LmV2YWxTY3JpcHRzLmJpbmQoY29udGVudCkuZGVmZXIoKTsKICB9CgogIGZ1bmN0aW9uIGluc2VydChlbGVtZW50LCBpbnNlcnRpb25zKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICBpZiAoaXNDb250ZW50KGluc2VydGlvbnMpKQogICAgICBpbnNlcnRpb25zID0geyBib3R0b206IGluc2VydGlvbnMgfTsKCiAgICBmb3IgKHZhciBwb3NpdGlvbiBpbiBpbnNlcnRpb25zKQogICAgICBpbnNlcnRDb250ZW50QXQoZWxlbWVudCwgaW5zZXJ0aW9uc1twb3NpdGlvbl0sIHBvc2l0aW9uKTsKCiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIHdyYXAoZWxlbWVudCwgd3JhcHBlciwgYXR0cmlidXRlcykgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CgogICAgaWYgKE9iamVjdC5pc0VsZW1lbnQod3JhcHBlcikpIHsKICAgICAgJCh3cmFwcGVyKS53cml0ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzIHx8IHt9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzU3RyaW5nKHdyYXBwZXIpKSB7CiAgICAgIHdyYXBwZXIgPSBuZXcgRWxlbWVudCh3cmFwcGVyLCBhdHRyaWJ1dGVzKTsKICAgIH0gZWxzZSB7CiAgICAgIHdyYXBwZXIgPSBuZXcgRWxlbWVudCgnZGl2Jywgd3JhcHBlcik7CiAgICB9CgogICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSkKICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBlbGVtZW50KTsKCiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsZW1lbnQpOwoKICAgIHJldHVybiB3cmFwcGVyOwogIH0KCiAgZnVuY3Rpb24gY2xlYW5XaGl0ZXNwYWNlKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIG5vZGUgPSBlbGVtZW50LmZpcnN0Q2hpbGQ7CgogICAgd2hpbGUgKG5vZGUpIHsKICAgICAgdmFyIG5leHROb2RlID0gbm9kZS5uZXh0U2libGluZzsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmICEvXFMvLnRlc3Qobm9kZS5ub2RlVmFsdWUpKQogICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAgIG5vZGUgPSBuZXh0Tm9kZTsKICAgIH0KICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gZW1wdHkoZWxlbWVudCkgewogICAgcmV0dXJuICQoZWxlbWVudCkuaW5uZXJIVE1MLmJsYW5rKCk7CiAgfQoKICBmdW5jdGlvbiBnZXRDb250ZW50RnJvbUFub255bW91c0VsZW1lbnQodGFnTmFtZSwgaHRtbCwgZm9yY2UpIHsKICAgIHZhciB0ID0gSU5TRVJUSU9OX1RSQU5TTEFUSU9OUy50YWdzW3RhZ05hbWVdLCBkaXYgPSBESVY7CgogICAgdmFyIHdvcmthcm91bmQgPSAhIXQ7CiAgICBpZiAoIXdvcmthcm91bmQgJiYgZm9yY2UpIHsKICAgICAgd29ya2Fyb3VuZCA9IHRydWU7CiAgICAgIHQgPSBbJycsICcnLCAwXTsKICAgIH0KCiAgICBpZiAod29ya2Fyb3VuZCkgewogICAgICBkaXYuaW5uZXJIVE1MID0gJyYjMTYwOycgKyB0WzBdICsgaHRtbCArIHRbMV07CiAgICAgIGRpdi5yZW1vdmVDaGlsZChkaXYuZmlyc3RDaGlsZCk7CiAgICAgIGZvciAodmFyIGkgPSB0WzJdOyBpLS07ICkKICAgICAgICBkaXYgPSBkaXYuZmlyc3RDaGlsZDsKICAgIH0gZWxzZSB7CiAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sOwogICAgfQoKICAgIHJldHVybiAkQShkaXYuY2hpbGROb2Rlcyk7CiAgfQoKICBmdW5jdGlvbiBjbG9uZShlbGVtZW50LCBkZWVwKSB7CiAgICBpZiAoIShlbGVtZW50ID0gJChlbGVtZW50KSkpIHJldHVybjsKICAgIHZhciBjbG9uZSA9IGVsZW1lbnQuY2xvbmVOb2RlKGRlZXApOwogICAgaWYgKCFIQVNfVU5JUVVFX0lEX1BST1BFUlRZKSB7CiAgICAgIGNsb25lLl9wcm90b3R5cGVVSUQgPSBVTkRFRklORUQ7CiAgICAgIGlmIChkZWVwKSB7CiAgICAgICAgdmFyIGRlc2NlbmRhbnRzID0gRWxlbWVudC5zZWxlY3QoY2xvbmUsICcqJyksCiAgICAgICAgIGkgPSBkZXNjZW5kYW50cy5sZW5ndGg7CiAgICAgICAgd2hpbGUgKGktLSkKICAgICAgICAgIGRlc2NlbmRhbnRzW2ldLl9wcm90b3R5cGVVSUQgPSBVTkRFRklORUQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBFbGVtZW50LmV4dGVuZChjbG9uZSk7CiAgfQoKICBmdW5jdGlvbiBwdXJnZUVsZW1lbnQoZWxlbWVudCkgewogICAgdmFyIHVpZCA9IGdldFVuaXF1ZUVsZW1lbnRJRChlbGVtZW50KTsKICAgIGlmICh1aWQpIHsKICAgICAgRWxlbWVudC5zdG9wT2JzZXJ2aW5nKGVsZW1lbnQpOwogICAgICBpZiAoIUhBU19VTklRVUVfSURfUFJPUEVSVFkpCiAgICAgICAgZWxlbWVudC5fcHJvdG90eXBlVUlEID0gVU5ERUZJTkVEOwogICAgICBkZWxldGUgRWxlbWVudC5TdG9yYWdlW3VpZF07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwdXJnZUNvbGxlY3Rpb24oZWxlbWVudHMpIHsKICAgIHZhciBpID0gZWxlbWVudHMubGVuZ3RoOwogICAgd2hpbGUgKGktLSkKICAgICAgcHVyZ2VFbGVtZW50KGVsZW1lbnRzW2ldKTsKICB9CgogIGZ1bmN0aW9uIHB1cmdlQ29sbGVjdGlvbl9JRShlbGVtZW50cykgewogICAgdmFyIGkgPSBlbGVtZW50cy5sZW5ndGgsIGVsZW1lbnQsIHVpZDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgZWxlbWVudCA9IGVsZW1lbnRzW2ldOwogICAgICB1aWQgPSBnZXRVbmlxdWVFbGVtZW50SUQoZWxlbWVudCk7CiAgICAgIGRlbGV0ZSBFbGVtZW50LlN0b3JhZ2VbdWlkXTsKICAgICAgZGVsZXRlIEV2ZW50LmNhY2hlW3VpZF07CiAgICB9CiAgfQoKICBpZiAoSEFTX1VOSVFVRV9JRF9QUk9QRVJUWSkgewogICAgcHVyZ2VDb2xsZWN0aW9uID0gcHVyZ2VDb2xsZWN0aW9uX0lFOwogIH0KCgogIGZ1bmN0aW9uIHB1cmdlKGVsZW1lbnQpIHsKICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOwogICAgcHVyZ2VFbGVtZW50KGVsZW1lbnQpOwoKICAgIHZhciBkZXNjZW5kYW50cyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKSwKICAgICBpID0gZGVzY2VuZGFudHMubGVuZ3RoOwoKICAgIHdoaWxlIChpLS0pIHB1cmdlRWxlbWVudChkZXNjZW5kYW50c1tpXSk7CgogICAgcmV0dXJuIG51bGw7CiAgfQoKICBPYmplY3QuZXh0ZW5kKG1ldGhvZHMsIHsKICAgIHJlbW92ZTogIHJlbW92ZSwKICAgIHVwZGF0ZTogIHVwZGF0ZSwKICAgIHJlcGxhY2U6IHJlcGxhY2UsCiAgICBpbnNlcnQ6ICBpbnNlcnQsCiAgICB3cmFwOiAgICB3cmFwLAogICAgY2xlYW5XaGl0ZXNwYWNlOiBjbGVhbldoaXRlc3BhY2UsCiAgICBlbXB0eTogICBlbXB0eSwKICAgIGNsb25lOiAgIGNsb25lLAogICAgcHVyZ2U6ICAgcHVyZ2UKICB9KTsKCgoKICBmdW5jdGlvbiByZWN1cnNpdmVseUNvbGxlY3QoZWxlbWVudCwgcHJvcGVydHksIG1heGltdW1MZW5ndGgpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgbWF4aW11bUxlbmd0aCA9IG1heGltdW1MZW5ndGggfHwgLTE7CiAgICB2YXIgZWxlbWVudHMgPSBbXTsKCiAgICB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnRbcHJvcGVydHldKSB7CiAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkKICAgICAgICBlbGVtZW50cy5wdXNoKEVsZW1lbnQuZXh0ZW5kKGVsZW1lbnQpKTsKCiAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT09IG1heGltdW1MZW5ndGgpIGJyZWFrOwogICAgfQoKICAgIHJldHVybiBlbGVtZW50czsKICB9CgoKICBmdW5jdGlvbiBhbmNlc3RvcnMoZWxlbWVudCkgewogICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Q29sbGVjdChlbGVtZW50LCAncGFyZW50Tm9kZScpOwogIH0KCiAgZnVuY3Rpb24gZGVzY2VuZGFudHMoZWxlbWVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuc2VsZWN0KGVsZW1lbnQsICcqJyk7CiAgfQoKICBmdW5jdGlvbiBmaXJzdERlc2NlbmRhbnQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCkuZmlyc3RDaGlsZDsKICAgIHdoaWxlIChlbGVtZW50ICYmIGVsZW1lbnQubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKQogICAgICBlbGVtZW50ID0gZWxlbWVudC5uZXh0U2libGluZzsKCiAgICByZXR1cm4gJChlbGVtZW50KTsKICB9CgogIGZ1bmN0aW9uIGltbWVkaWF0ZURlc2NlbmRhbnRzKGVsZW1lbnQpIHsKICAgIHZhciByZXN1bHRzID0gW10sIGNoaWxkID0gJChlbGVtZW50KS5maXJzdENoaWxkOwoKICAgIHdoaWxlIChjaGlsZCkgewogICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKQogICAgICAgIHJlc3VsdHMucHVzaChFbGVtZW50LmV4dGVuZChjaGlsZCkpOwoKICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZzsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIHByZXZpb3VzU2libGluZ3MoZWxlbWVudCkgewogICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Q29sbGVjdChlbGVtZW50LCAncHJldmlvdXNTaWJsaW5nJyk7CiAgfQoKICBmdW5jdGlvbiBuZXh0U2libGluZ3MoZWxlbWVudCkgewogICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Q29sbGVjdChlbGVtZW50LCAnbmV4dFNpYmxpbmcnKTsKICB9CgogIGZ1bmN0aW9uIHNpYmxpbmdzKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIHByZXZpb3VzID0gcHJldmlvdXNTaWJsaW5ncyhlbGVtZW50KSwKICAgICBuZXh0ID0gbmV4dFNpYmxpbmdzKGVsZW1lbnQpOwogICAgcmV0dXJuIHByZXZpb3VzLnJldmVyc2UoKS5jb25jYXQobmV4dCk7CiAgfQoKICBmdW5jdGlvbiBtYXRjaChlbGVtZW50LCBzZWxlY3RvcikgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CgogICAgaWYgKE9iamVjdC5pc1N0cmluZyhzZWxlY3RvcikpCiAgICAgIHJldHVybiBQcm90b3R5cGUuU2VsZWN0b3IubWF0Y2goZWxlbWVudCwgc2VsZWN0b3IpOwoKICAgIHJldHVybiBzZWxlY3Rvci5tYXRjaChlbGVtZW50KTsKICB9CgoKICBmdW5jdGlvbiBfcmVjdXJzaXZlbHlGaW5kKGVsZW1lbnQsIHByb3BlcnR5LCBleHByZXNzaW9uLCBpbmRleCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCksIGV4cHJlc3Npb24gPSBleHByZXNzaW9uIHx8IDAsIGluZGV4ID0gaW5kZXggfHwgMDsKICAgIGlmIChPYmplY3QuaXNOdW1iZXIoZXhwcmVzc2lvbikpIHsKICAgICAgaW5kZXggPSBleHByZXNzaW9uLCBleHByZXNzaW9uID0gbnVsbDsKICAgIH0KCiAgICB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnRbcHJvcGVydHldKSB7CiAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSAxKSBjb250aW51ZTsKICAgICAgaWYgKGV4cHJlc3Npb24gJiYgIVByb3RvdHlwZS5TZWxlY3Rvci5tYXRjaChlbGVtZW50LCBleHByZXNzaW9uKSkKICAgICAgICBjb250aW51ZTsKICAgICAgaWYgKC0taW5kZXggPj0gMCkgY29udGludWU7CgogICAgICByZXR1cm4gRWxlbWVudC5leHRlbmQoZWxlbWVudCk7CiAgICB9CiAgfQoKCiAgZnVuY3Rpb24gdXAoZWxlbWVudCwgZXhwcmVzc2lvbiwgaW5kZXgpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSByZXR1cm4gJChlbGVtZW50LnBhcmVudE5vZGUpOwogICAgcmV0dXJuIF9yZWN1cnNpdmVseUZpbmQoZWxlbWVudCwgJ3BhcmVudE5vZGUnLCBleHByZXNzaW9uLCBpbmRleCk7CiAgfQoKICBmdW5jdGlvbiBkb3duKGVsZW1lbnQsIGV4cHJlc3Npb24sIGluZGV4KSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGZpcnN0RGVzY2VuZGFudChlbGVtZW50KTsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpLCBleHByZXNzaW9uID0gZXhwcmVzc2lvbiB8fCAwLCBpbmRleCA9IGluZGV4IHx8IDA7CgogICAgaWYgKE9iamVjdC5pc051bWJlcihleHByZXNzaW9uKSkKICAgICAgaW5kZXggPSBleHByZXNzaW9uLCBleHByZXNzaW9uID0gJyonOwoKICAgIHZhciBub2RlID0gUHJvdG90eXBlLlNlbGVjdG9yLnNlbGVjdChleHByZXNzaW9uLCBlbGVtZW50KVtpbmRleF07CiAgICByZXR1cm4gRWxlbWVudC5leHRlbmQobm9kZSk7CiAgfQoKICBmdW5jdGlvbiBwcmV2aW91cyhlbGVtZW50LCBleHByZXNzaW9uLCBpbmRleCkgewogICAgcmV0dXJuIF9yZWN1cnNpdmVseUZpbmQoZWxlbWVudCwgJ3ByZXZpb3VzU2libGluZycsIGV4cHJlc3Npb24sIGluZGV4KTsKICB9CgogIGZ1bmN0aW9uIG5leHQoZWxlbWVudCwgZXhwcmVzc2lvbiwgaW5kZXgpIHsKICAgIHJldHVybiBfcmVjdXJzaXZlbHlGaW5kKGVsZW1lbnQsICduZXh0U2libGluZycsIGV4cHJlc3Npb24sIGluZGV4KTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdChlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciBleHByZXNzaW9ucyA9IFNMSUNFLmNhbGwoYXJndW1lbnRzLCAxKS5qb2luKCcsICcpOwogICAgcmV0dXJuIFByb3RvdHlwZS5TZWxlY3Rvci5zZWxlY3QoZXhwcmVzc2lvbnMsIGVsZW1lbnQpOwogIH0KCiAgZnVuY3Rpb24gYWRqYWNlbnQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgZXhwcmVzc2lvbnMgPSBTTElDRS5jYWxsKGFyZ3VtZW50cywgMSkuam9pbignLCAnKTsKICAgIHZhciBzaWJsaW5ncyA9IEVsZW1lbnQuc2libGluZ3MoZWxlbWVudCksIHJlc3VsdHMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwLCBzaWJsaW5nOyBzaWJsaW5nID0gc2libGluZ3NbaV07IGkrKykgewogICAgICBpZiAoUHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoKHNpYmxpbmcsIGV4cHJlc3Npb25zKSkKICAgICAgICByZXN1bHRzLnB1c2goc2libGluZyk7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBkZXNjZW5kYW50T2ZfRE9NKGVsZW1lbnQsIGFuY2VzdG9yKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KSwgYW5jZXN0b3IgPSAkKGFuY2VzdG9yKTsKICAgIHdoaWxlIChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKQogICAgICBpZiAoZWxlbWVudCA9PT0gYW5jZXN0b3IpIHJldHVybiB0cnVlOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gZGVzY2VuZGFudE9mX2NvbnRhaW5zKGVsZW1lbnQsIGFuY2VzdG9yKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KSwgYW5jZXN0b3IgPSAkKGFuY2VzdG9yKTsKICAgIGlmICghYW5jZXN0b3IuY29udGFpbnMpIHJldHVybiBkZXNjZW5kYW50T2ZfRE9NKGVsZW1lbnQsIGFuY2VzdG9yKTsKICAgIHJldHVybiBhbmNlc3Rvci5jb250YWlucyhlbGVtZW50KSAmJiBhbmNlc3RvciAhPT0gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIGRlc2NlbmRhbnRPZl9jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlbGVtZW50LCBhbmNlc3RvcikgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCksIGFuY2VzdG9yID0gJChhbmNlc3Rvcik7CiAgICByZXR1cm4gKGVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYW5jZXN0b3IpICYgOCkgPT09IDg7CiAgfQoKICB2YXIgZGVzY2VuZGFudE9mOwogIGlmIChESVYuY29tcGFyZURvY3VtZW50UG9zaXRpb24pIHsKICAgIGRlc2NlbmRhbnRPZiA9IGRlc2NlbmRhbnRPZl9jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjsKICB9IGVsc2UgaWYgKERJVi5jb250YWlucykgewogICAgZGVzY2VuZGFudE9mID0gZGVzY2VuZGFudE9mX2NvbnRhaW5zOwogIH0gZWxzZSB7CiAgICBkZXNjZW5kYW50T2YgPSBkZXNjZW5kYW50T2ZfRE9NOwogIH0KCgogIE9iamVjdC5leHRlbmQobWV0aG9kcywgewogICAgcmVjdXJzaXZlbHlDb2xsZWN0OiAgIHJlY3Vyc2l2ZWx5Q29sbGVjdCwKICAgIGFuY2VzdG9yczogICAgICAgICAgICBhbmNlc3RvcnMsCiAgICBkZXNjZW5kYW50czogICAgICAgICAgZGVzY2VuZGFudHMsCiAgICBmaXJzdERlc2NlbmRhbnQ6ICAgICAgZmlyc3REZXNjZW5kYW50LAogICAgaW1tZWRpYXRlRGVzY2VuZGFudHM6IGltbWVkaWF0ZURlc2NlbmRhbnRzLAogICAgcHJldmlvdXNTaWJsaW5nczogICAgIHByZXZpb3VzU2libGluZ3MsCiAgICBuZXh0U2libGluZ3M6ICAgICAgICAgbmV4dFNpYmxpbmdzLAogICAgc2libGluZ3M6ICAgICAgICAgICAgIHNpYmxpbmdzLAogICAgbWF0Y2g6ICAgICAgICAgICAgICAgIG1hdGNoLAogICAgdXA6ICAgICAgICAgICAgICAgICAgIHVwLAogICAgZG93bjogICAgICAgICAgICAgICAgIGRvd24sCiAgICBwcmV2aW91czogICAgICAgICAgICAgcHJldmlvdXMsCiAgICBuZXh0OiAgICAgICAgICAgICAgICAgbmV4dCwKICAgIHNlbGVjdDogICAgICAgICAgICAgICBzZWxlY3QsCiAgICBhZGphY2VudDogICAgICAgICAgICAgYWRqYWNlbnQsCiAgICBkZXNjZW5kYW50T2Y6ICAgICAgICAgZGVzY2VuZGFudE9mLAoKICAgIGdldEVsZW1lbnRzQnlTZWxlY3Rvcjogc2VsZWN0LAoKICAgIGNoaWxkRWxlbWVudHM6ICAgICAgICAgaW1tZWRpYXRlRGVzY2VuZGFudHMKICB9KTsKCgogIHZhciBpZENvdW50ZXIgPSAxOwogIGZ1bmN0aW9uIGlkZW50aWZ5KGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIGlkID0gRWxlbWVudC5yZWFkQXR0cmlidXRlKGVsZW1lbnQsICdpZCcpOwogICAgaWYgKGlkKSByZXR1cm4gaWQ7CgogICAgZG8geyBpZCA9ICdhbm9ueW1vdXNfZWxlbWVudF8nICsgaWRDb3VudGVyKysgfSB3aGlsZSAoJChpZCkpOwoKICAgIEVsZW1lbnQud3JpdGVBdHRyaWJ1dGUoZWxlbWVudCwgJ2lkJywgaWQpOwogICAgcmV0dXJuIGlkOwogIH0KCgogIGZ1bmN0aW9uIHJlYWRBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSkgewogICAgcmV0dXJuICQoZWxlbWVudCkuZ2V0QXR0cmlidXRlKG5hbWUpOwogIH0KCiAgZnVuY3Rpb24gcmVhZEF0dHJpYnV0ZV9JRShlbGVtZW50LCBuYW1lKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICB2YXIgdGFibGUgPSBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLnJlYWQ7CiAgICBpZiAodGFibGUudmFsdWVzW25hbWVdKQogICAgICByZXR1cm4gdGFibGUudmFsdWVzW25hbWVdKGVsZW1lbnQsIG5hbWUpOwoKICAgIGlmICh0YWJsZS5uYW1lc1tuYW1lXSkgbmFtZSA9IHRhYmxlLm5hbWVzW25hbWVdOwoKICAgIGlmIChuYW1lLmluY2x1ZGUoJzonKSkgewogICAgICBpZiAoIWVsZW1lbnQuYXR0cmlidXRlcyB8fCAhZWxlbWVudC5hdHRyaWJ1dGVzW25hbWVdKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIGVsZW1lbnQuYXR0cmlidXRlc1tuYW1lXS52YWx1ZTsKICAgIH0KCiAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgfQoKICBmdW5jdGlvbiByZWFkQXR0cmlidXRlX09wZXJhKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmIChuYW1lID09PSAndGl0bGUnKSByZXR1cm4gZWxlbWVudC50aXRsZTsKICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTsKICB9CgogIHZhciBQUk9CTEVNQVRJQ19BVFRSSUJVVEVfUkVBRElORyA9IChmdW5jdGlvbigpIHsKICAgIERJVi5zZXRBdHRyaWJ1dGUoJ29uY2xpY2snLCBbXSk7CiAgICB2YXIgdmFsdWUgPSBESVYuZ2V0QXR0cmlidXRlKCdvbmNsaWNrJyk7CiAgICB2YXIgaXNGdW5jdGlvbiA9IE9iamVjdC5pc0FycmF5KHZhbHVlKTsKICAgIERJVi5yZW1vdmVBdHRyaWJ1dGUoJ29uY2xpY2snKTsKICAgIHJldHVybiBpc0Z1bmN0aW9uOwogIH0pKCk7CgogIGlmIChQUk9CTEVNQVRJQ19BVFRSSUJVVEVfUkVBRElORykgewogICAgcmVhZEF0dHJpYnV0ZSA9IHJlYWRBdHRyaWJ1dGVfSUU7CiAgfSBlbHNlIGlmIChQcm90b3R5cGUuQnJvd3Nlci5PcGVyYSkgewogICAgcmVhZEF0dHJpYnV0ZSA9IHJlYWRBdHRyaWJ1dGVfT3BlcmE7CiAgfQoKCiAgZnVuY3Rpb24gd3JpdGVBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSwgdmFsdWUpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIGF0dHJpYnV0ZXMgPSB7fSwgdGFibGUgPSBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLndyaXRlOwoKICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHsKICAgICAgYXR0cmlidXRlcyA9IG5hbWU7CiAgICB9IGVsc2UgewogICAgICBhdHRyaWJ1dGVzW25hbWVdID0gT2JqZWN0LmlzVW5kZWZpbmVkKHZhbHVlKSA/IHRydWUgOiB2YWx1ZTsKICAgIH0KCiAgICBmb3IgKHZhciBhdHRyIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgbmFtZSA9IHRhYmxlLm5hbWVzW2F0dHJdIHx8IGF0dHI7CiAgICAgIHZhbHVlID0gYXR0cmlidXRlc1thdHRyXTsKICAgICAgaWYgKHRhYmxlLnZhbHVlc1thdHRyXSkKICAgICAgICBuYW1lID0gdGFibGUudmFsdWVzW2F0dHJdKGVsZW1lbnQsIHZhbHVlKSB8fCBuYW1lOwogICAgICBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09PSBudWxsKQogICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gdHJ1ZSkKICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCBuYW1lKTsKICAgICAgZWxzZSBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7CiAgICB9CgogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICB2YXIgUFJPQkxFTUFUSUNfSEFTX0FUVFJJQlVURV9XSVRIX0NIRUNLQk9YRVMgPSAoZnVuY3Rpb24gKCkgewogICAgaWYgKCFIQVNfRVhURU5ERURfQ1JFQVRFX0VMRU1FTlRfU1lOVEFYKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhciBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJzxpbnB1dCB0eXBlPSJjaGVja2JveCI+Jyk7CiAgICBjaGVja2JveC5jaGVja2VkID0gdHJ1ZTsKICAgIHZhciBub2RlID0gY2hlY2tib3guZ2V0QXR0cmlidXRlTm9kZSgnY2hlY2tlZCcpOwogICAgcmV0dXJuICFub2RlIHx8ICFub2RlLnNwZWNpZmllZDsKICB9KSgpOwoKICBmdW5jdGlvbiBoYXNBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlKSB7CiAgICBhdHRyaWJ1dGUgPSBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLmhhc1thdHRyaWJ1dGVdIHx8IGF0dHJpYnV0ZTsKICAgIHZhciBub2RlID0gJChlbGVtZW50KS5nZXRBdHRyaWJ1dGVOb2RlKGF0dHJpYnV0ZSk7CiAgICByZXR1cm4gISEobm9kZSAmJiBub2RlLnNwZWNpZmllZCk7CiAgfQoKICBmdW5jdGlvbiBoYXNBdHRyaWJ1dGVfSUUoZWxlbWVudCwgYXR0cmlidXRlKSB7CiAgICBpZiAoYXR0cmlidXRlID09PSAnY2hlY2tlZCcpIHsKICAgICAgcmV0dXJuIGVsZW1lbnQuY2hlY2tlZDsKICAgIH0KICAgIHJldHVybiBoYXNBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlKTsKICB9CgogIEdMT0JBTC5FbGVtZW50Lk1ldGhvZHMuU2ltdWxhdGVkLmhhc0F0dHJpYnV0ZSA9CiAgIFBST0JMRU1BVElDX0hBU19BVFRSSUJVVEVfV0lUSF9DSEVDS0JPWEVTID8KICAgaGFzQXR0cmlidXRlX0lFIDogaGFzQXR0cmlidXRlOwoKICBmdW5jdGlvbiBjbGFzc05hbWVzKGVsZW1lbnQpIHsKICAgIHJldHVybiBuZXcgRWxlbWVudC5DbGFzc05hbWVzKGVsZW1lbnQpOwogIH0KCiAgdmFyIHJlZ0V4cENhY2hlID0ge307CiAgZnVuY3Rpb24gZ2V0UmVnRXhwRm9yQ2xhc3NOYW1lKGNsYXNzTmFtZSkgewogICAgaWYgKHJlZ0V4cENhY2hlW2NsYXNzTmFtZV0pIHJldHVybiByZWdFeHBDYWNoZVtjbGFzc05hbWVdOwoKICAgIHZhciByZSA9IG5ldyBSZWdFeHAoIihefFxccyspIiArIGNsYXNzTmFtZSArICIoXFxzK3wkKSIpOwogICAgcmVnRXhwQ2FjaGVbY2xhc3NOYW1lXSA9IHJlOwogICAgcmV0dXJuIHJlOwogIH0KCiAgZnVuY3Rpb24gaGFzQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkgewogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47CgogICAgdmFyIGVsZW1lbnRDbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZTsKCiAgICBpZiAoZWxlbWVudENsYXNzTmFtZS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTsKICAgIGlmIChlbGVtZW50Q2xhc3NOYW1lID09PSBjbGFzc05hbWUpIHJldHVybiB0cnVlOwoKICAgIHJldHVybiBnZXRSZWdFeHBGb3JDbGFzc05hbWUoY2xhc3NOYW1lKS50ZXN0KGVsZW1lbnRDbGFzc05hbWUpOwogIH0KCiAgZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkgewogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47CgogICAgaWYgKCFoYXNDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSkKICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gKGVsZW1lbnQuY2xhc3NOYW1lID8gJyAnIDogJycpICsgY2xhc3NOYW1lOwoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkgewogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47CgogICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKAogICAgIGdldFJlZ0V4cEZvckNsYXNzTmFtZShjbGFzc05hbWUpLCAnICcpLnN0cmlwKCk7CgogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiB0b2dnbGVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lLCBib29sKSB7CiAgICBpZiAoIShlbGVtZW50ID0gJChlbGVtZW50KSkpIHJldHVybjsKCiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKGJvb2wpKQogICAgICBib29sID0gIWhhc0NsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpOwoKICAgIHZhciBtZXRob2QgPSBFbGVtZW50W2Jvb2wgPyAnYWRkQ2xhc3NOYW1lJyA6ICdyZW1vdmVDbGFzc05hbWUnXTsKICAgIHJldHVybiBtZXRob2QoZWxlbWVudCwgY2xhc3NOYW1lKTsKICB9CgogIHZhciBBVFRSSUJVVEVfVFJBTlNMQVRJT05TID0ge307CgogIHZhciBjbGFzc1Byb3AgPSAnY2xhc3NOYW1lJywgZm9yUHJvcCA9ICdmb3InOwoKICBESVYuc2V0QXR0cmlidXRlKGNsYXNzUHJvcCwgJ3gnKTsKICBpZiAoRElWLmNsYXNzTmFtZSAhPT0gJ3gnKSB7CiAgICBESVYuc2V0QXR0cmlidXRlKCdjbGFzcycsICd4Jyk7CiAgICBpZiAoRElWLmNsYXNzTmFtZSA9PT0gJ3gnKQogICAgICBjbGFzc1Byb3AgPSAnY2xhc3MnOwogIH0KCiAgdmFyIExBQkVMID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTsKICBMQUJFTC5zZXRBdHRyaWJ1dGUoZm9yUHJvcCwgJ3gnKTsKICBpZiAoTEFCRUwuaHRtbEZvciAhPT0gJ3gnKSB7CiAgICBMQUJFTC5zZXRBdHRyaWJ1dGUoJ2h0bWxGb3InLCAneCcpOwogICAgaWYgKExBQkVMLmh0bWxGb3IgPT09ICd4JykKICAgICAgZm9yUHJvcCA9ICdodG1sRm9yJzsKICB9CiAgTEFCRUwgPSBudWxsOwoKICBmdW5jdGlvbiBfZ2V0QXR0cihlbGVtZW50LCBhdHRyaWJ1dGUpIHsKICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpOwogIH0KCiAgZnVuY3Rpb24gX2dldEF0dHIyKGVsZW1lbnQsIGF0dHJpYnV0ZSkgewogICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgMik7CiAgfQoKICBmdW5jdGlvbiBfZ2V0QXR0ck5vZGUoZWxlbWVudCwgYXR0cmlidXRlKSB7CiAgICB2YXIgbm9kZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlTm9kZShhdHRyaWJ1dGUpOwogICAgcmV0dXJuIG5vZGUgPyBub2RlLnZhbHVlIDogJyc7CiAgfQoKICBmdW5jdGlvbiBfZ2V0RmxhZyhlbGVtZW50LCBhdHRyaWJ1dGUpIHsKICAgIHJldHVybiAkKGVsZW1lbnQpLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUpID8gYXR0cmlidXRlIDogbnVsbDsKICB9CgogIERJVi5vbmNsaWNrID0gUHJvdG90eXBlLmVtcHR5RnVuY3Rpb247CiAgdmFyIG9uY2xpY2tWYWx1ZSA9IERJVi5nZXRBdHRyaWJ1dGUoJ29uY2xpY2snKTsKCiAgdmFyIF9nZXRFdjsKCiAgaWYgKFN0cmluZyhvbmNsaWNrVmFsdWUpLmluZGV4T2YoJ3snKSA+IC0xKSB7CiAgICBfZ2V0RXYgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGUpIHsKICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIG51bGw7CiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTsKICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdCgneycpWzFdOwogICAgICB2YWx1ZSA9IHZhbHVlLnNwbGl0KCd9JylbMF07CiAgICAgIHJldHVybiB2YWx1ZS5zdHJpcCgpOwogICAgfTsKICB9CiAgZWxzZSBpZiAob25jbGlja1ZhbHVlID09PSAnJykgewogICAgX2dldEV2ID0gZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlKSB7CiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gdmFsdWUuc3RyaXAoKTsKICAgIH07CiAgfQoKICBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLnJlYWQgPSB7CiAgICBuYW1lczogewogICAgICAnY2xhc3MnOiAgICAgY2xhc3NQcm9wLAogICAgICAnY2xhc3NOYW1lJzogY2xhc3NQcm9wLAogICAgICAnZm9yJzogICAgICAgZm9yUHJvcCwKICAgICAgJ2h0bWxGb3InOiAgIGZvclByb3AKICAgIH0sCgogICAgdmFsdWVzOiB7CiAgICAgIHN0eWxlOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIGVsZW1lbnQuc3R5bGUuY3NzVGV4dC50b0xvd2VyQ2FzZSgpOwogICAgICB9LAogICAgICB0aXRsZTogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBlbGVtZW50LnRpdGxlOwogICAgICB9CiAgICB9CiAgfTsKCiAgQVRUUklCVVRFX1RSQU5TTEFUSU9OUy53cml0ZSA9IHsKICAgIG5hbWVzOiB7CiAgICAgIGNsYXNzTmFtZTogICAnY2xhc3MnLAogICAgICBodG1sRm9yOiAgICAgJ2ZvcicsCiAgICAgIGNlbGxwYWRkaW5nOiAnY2VsbFBhZGRpbmcnLAogICAgICBjZWxsc3BhY2luZzogJ2NlbGxTcGFjaW5nJwogICAgfSwKCiAgICB2YWx1ZXM6IHsKICAgICAgY2hlY2tlZDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUpIHsKICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSAhIXZhbHVlOwogICAgICB9LAoKICAgICAgc3R5bGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7CiAgICAgICAgZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgPyB2YWx1ZSA6ICcnOwogICAgICB9CiAgICB9CiAgfTsKCiAgQVRUUklCVVRFX1RSQU5TTEFUSU9OUy5oYXMgPSB7IG5hbWVzOiB7fSB9OwoKICBPYmplY3QuZXh0ZW5kKEFUVFJJQlVURV9UUkFOU0xBVElPTlMud3JpdGUubmFtZXMsCiAgIEFUVFJJQlVURV9UUkFOU0xBVElPTlMucmVhZC5uYW1lcyk7CgogIHZhciBDQU1FTF9DQVNFRF9BVFRSSUJVVEVfTkFNRVMgPSAkdygnY29sU3BhbiByb3dTcGFuIHZBbGlnbiBkYXRlVGltZSAnICsKICAgJ2FjY2Vzc0tleSB0YWJJbmRleCBlbmNUeXBlIG1heExlbmd0aCByZWFkT25seSBsb25nRGVzYyBmcmFtZUJvcmRlcicpOwoKICBmb3IgKHZhciBpID0gMCwgYXR0cjsgYXR0ciA9IENBTUVMX0NBU0VEX0FUVFJJQlVURV9OQU1FU1tpXTsgaSsrKSB7CiAgICBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLndyaXRlLm5hbWVzW2F0dHIudG9Mb3dlckNhc2UoKV0gPSBhdHRyOwogICAgQVRUUklCVVRFX1RSQU5TTEFUSU9OUy5oYXMubmFtZXNbYXR0ci50b0xvd2VyQ2FzZSgpXSAgID0gYXR0cjsKICB9CgogIE9iamVjdC5leHRlbmQoQVRUUklCVVRFX1RSQU5TTEFUSU9OUy5yZWFkLnZhbHVlcywgewogICAgaHJlZjogICAgICAgIF9nZXRBdHRyMiwKICAgIHNyYzogICAgICAgICBfZ2V0QXR0cjIsCiAgICB0eXBlOiAgICAgICAgX2dldEF0dHIsCiAgICBhY3Rpb246ICAgICAgX2dldEF0dHJOb2RlLAogICAgZGlzYWJsZWQ6ICAgIF9nZXRGbGFnLAogICAgY2hlY2tlZDogICAgIF9nZXRGbGFnLAogICAgcmVhZG9ubHk6ICAgIF9nZXRGbGFnLAogICAgbXVsdGlwbGU6ICAgIF9nZXRGbGFnLAogICAgb25sb2FkOiAgICAgIF9nZXRFdiwKICAgIG9udW5sb2FkOiAgICBfZ2V0RXYsCiAgICBvbmNsaWNrOiAgICAgX2dldEV2LAogICAgb25kYmxjbGljazogIF9nZXRFdiwKICAgIG9ubW91c2Vkb3duOiBfZ2V0RXYsCiAgICBvbm1vdXNldXA6ICAgX2dldEV2LAogICAgb25tb3VzZW92ZXI6IF9nZXRFdiwKICAgIG9ubW91c2Vtb3ZlOiBfZ2V0RXYsCiAgICBvbm1vdXNlb3V0OiAgX2dldEV2LAogICAgb25mb2N1czogICAgIF9nZXRFdiwKICAgIG9uYmx1cjogICAgICBfZ2V0RXYsCiAgICBvbmtleXByZXNzOiAgX2dldEV2LAogICAgb25rZXlkb3duOiAgIF9nZXRFdiwKICAgIG9ua2V5dXA6ICAgICBfZ2V0RXYsCiAgICBvbnN1Ym1pdDogICAgX2dldEV2LAogICAgb25yZXNldDogICAgIF9nZXRFdiwKICAgIG9uc2VsZWN0OiAgICBfZ2V0RXYsCiAgICBvbmNoYW5nZTogICAgX2dldEV2CiAgfSk7CgoKICBPYmplY3QuZXh0ZW5kKG1ldGhvZHMsIHsKICAgIGlkZW50aWZ5OiAgICAgICAgaWRlbnRpZnksCiAgICByZWFkQXR0cmlidXRlOiAgIHJlYWRBdHRyaWJ1dGUsCiAgICB3cml0ZUF0dHJpYnV0ZTogIHdyaXRlQXR0cmlidXRlLAogICAgY2xhc3NOYW1lczogICAgICBjbGFzc05hbWVzLAogICAgaGFzQ2xhc3NOYW1lOiAgICBoYXNDbGFzc05hbWUsCiAgICBhZGRDbGFzc05hbWU6ICAgIGFkZENsYXNzTmFtZSwKICAgIHJlbW92ZUNsYXNzTmFtZTogcmVtb3ZlQ2xhc3NOYW1lLAogICAgdG9nZ2xlQ2xhc3NOYW1lOiB0b2dnbGVDbGFzc05hbWUKICB9KTsKCgogIGZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlTmFtZShzdHlsZSkgewogICAgaWYgKHN0eWxlID09PSAnZmxvYXQnIHx8IHN0eWxlID09PSAnc3R5bGVGbG9hdCcpCiAgICAgIHJldHVybiAnY3NzRmxvYXQnOwogICAgcmV0dXJuIHN0eWxlLmNhbWVsaXplKCk7CiAgfQoKICBmdW5jdGlvbiBub3JtYWxpemVTdHlsZU5hbWVfSUUoc3R5bGUpIHsKICAgIGlmIChzdHlsZSA9PT0gJ2Zsb2F0JyB8fCBzdHlsZSA9PT0gJ2Nzc0Zsb2F0JykKICAgICAgcmV0dXJuICdzdHlsZUZsb2F0JzsKICAgIHJldHVybiBzdHlsZS5jYW1lbGl6ZSgpOwogIH0KCiAgZnVuY3Rpb24gc2V0U3R5bGUoZWxlbWVudCwgc3R5bGVzKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciBlbGVtZW50U3R5bGUgPSBlbGVtZW50LnN0eWxlLCBtYXRjaDsKCiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKHN0eWxlcykpIHsKICAgICAgZWxlbWVudFN0eWxlLmNzc1RleHQgKz0gJzsnICsgc3R5bGVzOwogICAgICBpZiAoc3R5bGVzLmluY2x1ZGUoJ29wYWNpdHknKSkgewogICAgICAgIHZhciBvcGFjaXR5ID0gc3R5bGVzLm1hdGNoKC9vcGFjaXR5OlxzKihcZD9cLj9cZCopLylbMV07CiAgICAgICAgRWxlbWVudC5zZXRPcGFjaXR5KGVsZW1lbnQsIG9wYWNpdHkpOwogICAgICB9CiAgICAgIHJldHVybiBlbGVtZW50OwogICAgfQoKICAgIGZvciAodmFyIHByb3BlcnR5IGluIHN0eWxlcykgewogICAgICBpZiAocHJvcGVydHkgPT09ICdvcGFjaXR5JykgewogICAgICAgIEVsZW1lbnQuc2V0T3BhY2l0eShlbGVtZW50LCBzdHlsZXNbcHJvcGVydHldKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZXNbcHJvcGVydHldOwogICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ2Zsb2F0JyB8fCBwcm9wZXJ0eSA9PT0gJ2Nzc0Zsb2F0JykgewogICAgICAgICAgcHJvcGVydHkgPSBPYmplY3QuaXNVbmRlZmluZWQoZWxlbWVudFN0eWxlLnN0eWxlRmxvYXQpID8KICAgICAgICAgICAnY3NzRmxvYXQnIDogJ3N0eWxlRmxvYXQnOwogICAgICAgIH0KICAgICAgICBlbGVtZW50U3R5bGVbcHJvcGVydHldID0gdmFsdWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZWxlbWVudDsKICB9CgoKICBmdW5jdGlvbiBnZXRTdHlsZShlbGVtZW50LCBzdHlsZSkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlTmFtZShzdHlsZSk7CgogICAgdmFyIHZhbHVlID0gZWxlbWVudC5zdHlsZVtzdHlsZV07CiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnYXV0bycpIHsKICAgICAgdmFyIGNzcyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7CiAgICAgIHZhbHVlID0gY3NzID8gY3NzW3N0eWxlXSA6IG51bGw7CiAgICB9CgogICAgaWYgKHN0eWxlID09PSAnb3BhY2l0eScpIHJldHVybiB2YWx1ZSA/IHBhcnNlRmxvYXQodmFsdWUpIDogMS4wOwogICAgcmV0dXJuIHZhbHVlID09PSAnYXV0bycgPyBudWxsIDogdmFsdWU7CiAgfQoKICBmdW5jdGlvbiBnZXRTdHlsZV9PcGVyYShlbGVtZW50LCBzdHlsZSkgewogICAgc3dpdGNoIChzdHlsZSkgewogICAgICBjYXNlICdoZWlnaHQnOiBjYXNlICd3aWR0aCc6CiAgICAgICAgaWYgKCFFbGVtZW50LnZpc2libGUoZWxlbWVudCkpIHJldHVybiBudWxsOwoKICAgICAgICB2YXIgZGltID0gcGFyc2VJbnQoZ2V0U3R5bGUoZWxlbWVudCwgc3R5bGUpLCAxMCk7CgogICAgICAgIGlmIChkaW0gIT09IGVsZW1lbnRbJ29mZnNldCcgKyBzdHlsZS5jYXBpdGFsaXplKCldKQogICAgICAgICAgcmV0dXJuIGRpbSArICdweCc7CgogICAgICAgIHJldHVybiBFbGVtZW50Lm1lYXN1cmUoZWxlbWVudCwgc3R5bGUpOwoKICAgICAgZGVmYXVsdDogcmV0dXJuIGdldFN0eWxlKGVsZW1lbnQsIHN0eWxlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldFN0eWxlX0lFKGVsZW1lbnQsIHN0eWxlKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHN0eWxlID0gbm9ybWFsaXplU3R5bGVOYW1lX0lFKHN0eWxlKTsKCiAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnN0eWxlW3N0eWxlXTsKICAgIGlmICghdmFsdWUgJiYgZWxlbWVudC5jdXJyZW50U3R5bGUpIHsKICAgICAgdmFsdWUgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtzdHlsZV07CiAgICB9CgogICAgaWYgKHN0eWxlID09PSAnb3BhY2l0eScgJiYgIVNUQU5EQVJEX0NTU19PUEFDSVRZX1NVUFBPUlRFRCkKICAgICAgcmV0dXJuIGdldE9wYWNpdHlfSUUoZWxlbWVudCk7CgogICAgaWYgKHZhbHVlID09PSAnYXV0bycpIHsKICAgICAgaWYgKChzdHlsZSA9PT0gJ3dpZHRoJyB8fCBzdHlsZSA9PT0gJ2hlaWdodCcpICYmIEVsZW1lbnQudmlzaWJsZShlbGVtZW50KSkKICAgICAgICByZXR1cm4gRWxlbWVudC5tZWFzdXJlKGVsZW1lbnQsIHN0eWxlKSArICdweCc7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHJldHVybiB2YWx1ZTsKICB9CgogIGZ1bmN0aW9uIHN0cmlwQWxwaGFGcm9tRmlsdGVyX0lFKGZpbHRlcikgewogICAgcmV0dXJuIChmaWx0ZXIgfHwgJycpLnJlcGxhY2UoL2FscGhhXChbXlwpXSpcKS9naSwgJycpOwogIH0KCiAgZnVuY3Rpb24gaGFzTGF5b3V0X0lFKGVsZW1lbnQpIHsKICAgIGlmICghZWxlbWVudC5jdXJyZW50U3R5bGUgfHwgIWVsZW1lbnQuY3VycmVudFN0eWxlLmhhc0xheW91dCkKICAgICAgZWxlbWVudC5zdHlsZS56b29tID0gMTsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgdmFyIFNUQU5EQVJEX0NTU19PUEFDSVRZX1NVUFBPUlRFRCA9IChmdW5jdGlvbigpIHsKICAgIERJVi5zdHlsZS5jc3NUZXh0ID0gIm9wYWNpdHk6LjU1IjsKICAgIHJldHVybiAvXjAuNTUvLnRlc3QoRElWLnN0eWxlLm9wYWNpdHkpOwogIH0pKCk7CgogIGZ1bmN0aW9uIHNldE9wYWNpdHkoZWxlbWVudCwgdmFsdWUpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgaWYgKHZhbHVlID09IDEgfHwgdmFsdWUgPT09ICcnKSB2YWx1ZSA9ICcnOwogICAgZWxzZSBpZiAodmFsdWUgPCAwLjAwMDAxKSB2YWx1ZSA9IDA7CiAgICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSB2YWx1ZTsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gc2V0T3BhY2l0eV9JRShlbGVtZW50LCB2YWx1ZSkgewogICAgaWYgKFNUQU5EQVJEX0NTU19PUEFDSVRZX1NVUFBPUlRFRCkKICAgICAgcmV0dXJuIHNldE9wYWNpdHkoZWxlbWVudCwgdmFsdWUpOwoKICAgIGVsZW1lbnQgPSBoYXNMYXlvdXRfSUUoJChlbGVtZW50KSk7CiAgICB2YXIgZmlsdGVyID0gRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAnZmlsdGVyJyksCiAgICAgc3R5bGUgPSBlbGVtZW50LnN0eWxlOwoKICAgIGlmICh2YWx1ZSA9PSAxIHx8IHZhbHVlID09PSAnJykgewogICAgICBmaWx0ZXIgPSBzdHJpcEFscGhhRnJvbUZpbHRlcl9JRShmaWx0ZXIpOwogICAgICBpZiAoZmlsdGVyKSBzdHlsZS5maWx0ZXIgPSBmaWx0ZXI7CiAgICAgIGVsc2Ugc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdmaWx0ZXInKTsKICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICB9CgogICAgaWYgKHZhbHVlIDwgMC4wMDAwMSkgdmFsdWUgPSAwOwoKICAgIHN0eWxlLmZpbHRlciA9IHN0cmlwQWxwaGFGcm9tRmlsdGVyX0lFKGZpbHRlcikgKwogICAgICdhbHBoYShvcGFjaXR5PScgKyAodmFsdWUgKiAxMDApICsgJyknOwoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCgogIGZ1bmN0aW9uIGdldE9wYWNpdHkoZWxlbWVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ29wYWNpdHknKTsKICB9CgogIGZ1bmN0aW9uIGdldE9wYWNpdHlfSUUoZWxlbWVudCkgewogICAgaWYgKFNUQU5EQVJEX0NTU19PUEFDSVRZX1NVUFBPUlRFRCkKICAgICAgcmV0dXJuIGdldE9wYWNpdHkoZWxlbWVudCk7CgogICAgdmFyIGZpbHRlciA9IEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ2ZpbHRlcicpOwogICAgaWYgKGZpbHRlci5sZW5ndGggPT09IDApIHJldHVybiAxLjA7CiAgICB2YXIgbWF0Y2ggPSAoZmlsdGVyIHx8ICcnKS5tYXRjaCgvYWxwaGFcKG9wYWNpdHk9KC4qKVwpLyk7CiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHJldHVybiBwYXJzZUZsb2F0KG1hdGNoWzFdKSAvIDEwMDsKICAgIHJldHVybiAxLjA7CiAgfQoKCiAgT2JqZWN0LmV4dGVuZChtZXRob2RzLCB7CiAgICBzZXRTdHlsZTogICBzZXRTdHlsZSwKICAgIGdldFN0eWxlOiAgIGdldFN0eWxlLAogICAgc2V0T3BhY2l0eTogc2V0T3BhY2l0eSwKICAgIGdldE9wYWNpdHk6IGdldE9wYWNpdHkKICB9KTsKCiAgaWYgKCdzdHlsZUZsb2F0JyBpbiBESVYuc3R5bGUpIHsKICAgIG1ldGhvZHMuZ2V0U3R5bGUgPSBnZXRTdHlsZV9JRTsKICAgIG1ldGhvZHMuc2V0T3BhY2l0eSA9IHNldE9wYWNpdHlfSUU7CiAgICBtZXRob2RzLmdldE9wYWNpdHkgPSBnZXRPcGFjaXR5X0lFOwogIH0KCiAgdmFyIFVJRCA9IDA7CgogIEdMT0JBTC5FbGVtZW50LlN0b3JhZ2UgPSB7IFVJRDogMSB9OwoKICBmdW5jdGlvbiBnZXRVbmlxdWVFbGVtZW50SUQoZWxlbWVudCkgewogICAgaWYgKGVsZW1lbnQgPT09IHdpbmRvdykgcmV0dXJuIDA7CgogICAgaWYgKHR5cGVvZiBlbGVtZW50Ll9wcm90b3R5cGVVSUQgPT09ICd1bmRlZmluZWQnKQogICAgICBlbGVtZW50Ll9wcm90b3R5cGVVSUQgPSBFbGVtZW50LlN0b3JhZ2UuVUlEKys7CiAgICByZXR1cm4gZWxlbWVudC5fcHJvdG90eXBlVUlEOwogIH0KCiAgZnVuY3Rpb24gZ2V0VW5pcXVlRWxlbWVudElEX0lFKGVsZW1lbnQpIHsKICAgIGlmIChlbGVtZW50ID09PSB3aW5kb3cpIHJldHVybiAwOwogICAgaWYgKGVsZW1lbnQgPT0gZG9jdW1lbnQpIHJldHVybiAxOwogICAgcmV0dXJuIGVsZW1lbnQudW5pcXVlSUQ7CiAgfQoKICB2YXIgSEFTX1VOSVFVRV9JRF9QUk9QRVJUWSA9ICgndW5pcXVlSUQnIGluIERJVik7CiAgaWYgKEhBU19VTklRVUVfSURfUFJPUEVSVFkpCiAgICBnZXRVbmlxdWVFbGVtZW50SUQgPSBnZXRVbmlxdWVFbGVtZW50SURfSUU7CgogIGZ1bmN0aW9uIGdldFN0b3JhZ2UoZWxlbWVudCkgewogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47CgogICAgdmFyIHVpZCA9IGdldFVuaXF1ZUVsZW1lbnRJRChlbGVtZW50KTsKCiAgICBpZiAoIUVsZW1lbnQuU3RvcmFnZVt1aWRdKQogICAgICBFbGVtZW50LlN0b3JhZ2VbdWlkXSA9ICRIKCk7CgogICAgcmV0dXJuIEVsZW1lbnQuU3RvcmFnZVt1aWRdOwogIH0KCiAgZnVuY3Rpb24gc3RvcmUoZWxlbWVudCwga2V5LCB2YWx1ZSkgewogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47CiAgICB2YXIgc3RvcmFnZSA9IGdldFN0b3JhZ2UoZWxlbWVudCk7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICBzdG9yYWdlLnVwZGF0ZShrZXkpOwogICAgfSBlbHNlIHsKICAgICAgc3RvcmFnZS5zZXQoa2V5LCB2YWx1ZSk7CiAgICB9CiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIHJldHJpZXZlKGVsZW1lbnQsIGtleSwgZGVmYXVsdFZhbHVlKSB7CiAgICBpZiAoIShlbGVtZW50ID0gJChlbGVtZW50KSkpIHJldHVybjsKICAgIHZhciBzdG9yYWdlID0gZ2V0U3RvcmFnZShlbGVtZW50KSwgdmFsdWUgPSBzdG9yYWdlLmdldChrZXkpOwoKICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICAgIHN0b3JhZ2Uuc2V0KGtleSwgZGVmYXVsdFZhbHVlKTsKICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7CiAgICB9CgogICAgcmV0dXJuIHZhbHVlOwogIH0KCgogIE9iamVjdC5leHRlbmQobWV0aG9kcywgewogICAgZ2V0U3RvcmFnZTogZ2V0U3RvcmFnZSwKICAgIHN0b3JlOiAgICAgIHN0b3JlLAogICAgcmV0cmlldmU6ICAgcmV0cmlldmUKICB9KTsKCgogIHZhciBNZXRob2RzID0ge30sIEJ5VGFnID0gRWxlbWVudC5NZXRob2RzLkJ5VGFnLAogICBGID0gUHJvdG90eXBlLkJyb3dzZXJGZWF0dXJlczsKCiAgaWYgKCFGLkVsZW1lbnRFeHRlbnNpb25zICYmICgnX19wcm90b19fJyBpbiBESVYpKSB7CiAgICBHTE9CQUwuSFRNTEVsZW1lbnQgPSB7fTsKICAgIEdMT0JBTC5IVE1MRWxlbWVudC5wcm90b3R5cGUgPSBESVZbJ19fcHJvdG9fXyddOwogICAgRi5FbGVtZW50RXh0ZW5zaW9ucyA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBjaGVja0VsZW1lbnRQcm90b3R5cGVEZWZpY2llbmN5KHRhZ05hbWUpIHsKICAgIGlmICh0eXBlb2Ygd2luZG93LkVsZW1lbnQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIUhBU19FWFRFTkRFRF9DUkVBVEVfRUxFTUVOVF9TWU5UQVgpIHJldHVybiBmYWxzZTsKICAgIHZhciBwcm90byA9IHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZTsKICAgIGlmIChwcm90bykgewogICAgICB2YXIgaWQgPSAnXycgKyAoTWF0aC5yYW5kb20oKSArICcnKS5zbGljZSgyKSwKICAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICAgICAgcHJvdG9baWRdID0gJ3gnOwogICAgICB2YXIgaXNCdWdneSA9IChlbFtpZF0gIT09ICd4Jyk7CiAgICAgIGRlbGV0ZSBwcm90b1tpZF07CiAgICAgIGVsID0gbnVsbDsKICAgICAgcmV0dXJuIGlzQnVnZ3k7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIEhUTUxPQkpFQ1RFTEVNRU5UX1BST1RPVFlQRV9CVUdHWSA9CiAgIGNoZWNrRWxlbWVudFByb3RvdHlwZURlZmljaWVuY3koJ29iamVjdCcpOwoKICBmdW5jdGlvbiBleHRlbmRFbGVtZW50V2l0aChlbGVtZW50LCBtZXRob2RzKSB7CiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBtZXRob2RzKSB7CiAgICAgIHZhciB2YWx1ZSA9IG1ldGhvZHNbcHJvcGVydHldOwogICAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24odmFsdWUpICYmICEocHJvcGVydHkgaW4gZWxlbWVudCkpCiAgICAgICAgZWxlbWVudFtwcm9wZXJ0eV0gPSB2YWx1ZS5tZXRob2RpemUoKTsKICAgIH0KICB9CgogIHZhciBFWFRFTkRFRCA9IHt9OwogIGZ1bmN0aW9uIGVsZW1lbnRJc0V4dGVuZGVkKGVsZW1lbnQpIHsKICAgIHZhciB1aWQgPSBnZXRVbmlxdWVFbGVtZW50SUQoZWxlbWVudCk7CiAgICByZXR1cm4gKHVpZCBpbiBFWFRFTkRFRCk7CiAgfQoKICBmdW5jdGlvbiBleHRlbmQoZWxlbWVudCkgewogICAgaWYgKCFlbGVtZW50IHx8IGVsZW1lbnRJc0V4dGVuZGVkKGVsZW1lbnQpKSByZXR1cm4gZWxlbWVudDsKICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSB8fCBlbGVtZW50ID09IHdpbmRvdykKICAgICAgcmV0dXJuIGVsZW1lbnQ7CgogICAgdmFyIG1ldGhvZHMgPSBPYmplY3QuY2xvbmUoTWV0aG9kcyksCiAgICAgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpOwoKICAgIGlmIChCeVRhZ1t0YWdOYW1lXSkgT2JqZWN0LmV4dGVuZChtZXRob2RzLCBCeVRhZ1t0YWdOYW1lXSk7CgogICAgZXh0ZW5kRWxlbWVudFdpdGgoZWxlbWVudCwgbWV0aG9kcyk7CiAgICBFWFRFTkRFRFtnZXRVbmlxdWVFbGVtZW50SUQoZWxlbWVudCldID0gdHJ1ZTsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gZXh0ZW5kX0lFOChlbGVtZW50KSB7CiAgICBpZiAoIWVsZW1lbnQgfHwgZWxlbWVudElzRXh0ZW5kZWQoZWxlbWVudCkpIHJldHVybiBlbGVtZW50OwoKICAgIHZhciB0ID0gZWxlbWVudC50YWdOYW1lOwogICAgaWYgKHQgJiYgKC9eKD86b2JqZWN0fGFwcGxldHxlbWJlZCkkL2kudGVzdCh0KSkpIHsKICAgICAgZXh0ZW5kRWxlbWVudFdpdGgoZWxlbWVudCwgRWxlbWVudC5NZXRob2RzKTsKICAgICAgZXh0ZW5kRWxlbWVudFdpdGgoZWxlbWVudCwgRWxlbWVudC5NZXRob2RzLlNpbXVsYXRlZCk7CiAgICAgIGV4dGVuZEVsZW1lbnRXaXRoKGVsZW1lbnQsIEVsZW1lbnQuTWV0aG9kcy5CeVRhZ1t0LnRvVXBwZXJDYXNlKCldKTsKICAgIH0KCiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGlmIChGLlNwZWNpZmljRWxlbWVudEV4dGVuc2lvbnMpIHsKICAgIGV4dGVuZCA9IEhUTUxPQkpFQ1RFTEVNRU5UX1BST1RPVFlQRV9CVUdHWSA/IGV4dGVuZF9JRTggOiBQcm90b3R5cGUuSzsKICB9CgogIGZ1bmN0aW9uIGFkZE1ldGhvZHNUb1RhZ05hbWUodGFnTmFtZSwgbWV0aG9kcykgewogICAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTsKICAgIGlmICghQnlUYWdbdGFnTmFtZV0pIEJ5VGFnW3RhZ05hbWVdID0ge307CiAgICBPYmplY3QuZXh0ZW5kKEJ5VGFnW3RhZ05hbWVdLCBtZXRob2RzKTsKICB9CgogIGZ1bmN0aW9uIG1lcmdlTWV0aG9kcyhkZXN0aW5hdGlvbiwgbWV0aG9kcywgb25seUlmQWJzZW50KSB7CiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKG9ubHlJZkFic2VudCkpIG9ubHlJZkFic2VudCA9IGZhbHNlOwogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gbWV0aG9kcykgewogICAgICB2YXIgdmFsdWUgPSBtZXRob2RzW3Byb3BlcnR5XTsKICAgICAgaWYgKCFPYmplY3QuaXNGdW5jdGlvbih2YWx1ZSkpIGNvbnRpbnVlOwogICAgICBpZiAoIW9ubHlJZkFic2VudCB8fCAhKHByb3BlcnR5IGluIGRlc3RpbmF0aW9uKSkKICAgICAgICBkZXN0aW5hdGlvbltwcm9wZXJ0eV0gPSB2YWx1ZS5tZXRob2RpemUoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGZpbmRET01DbGFzcyh0YWdOYW1lKSB7CiAgICB2YXIga2xhc3M7CiAgICB2YXIgdHJhbnMgPSB7CiAgICAgICJPUFRHUk9VUCI6ICJPcHRHcm91cCIsICJURVhUQVJFQSI6ICJUZXh0QXJlYSIsICJQIjogIlBhcmFncmFwaCIsCiAgICAgICJGSUVMRFNFVCI6ICJGaWVsZFNldCIsICJVTCI6ICJVTGlzdCIsICJPTCI6ICJPTGlzdCIsICJETCI6ICJETGlzdCIsCiAgICAgICJESVIiOiAiRGlyZWN0b3J5IiwgIkgxIjogIkhlYWRpbmciLCAiSDIiOiAiSGVhZGluZyIsICJIMyI6ICJIZWFkaW5nIiwKICAgICAgIkg0IjogIkhlYWRpbmciLCAiSDUiOiAiSGVhZGluZyIsICJINiI6ICJIZWFkaW5nIiwgIlEiOiAiUXVvdGUiLAogICAgICAiSU5TIjogIk1vZCIsICJERUwiOiAiTW9kIiwgIkEiOiAiQW5jaG9yIiwgIklNRyI6ICJJbWFnZSIsICJDQVBUSU9OIjoKICAgICAgIlRhYmxlQ2FwdGlvbiIsICJDT0wiOiAiVGFibGVDb2wiLCAiQ09MR1JPVVAiOiAiVGFibGVDb2wiLCAiVEhFQUQiOgogICAgICAiVGFibGVTZWN0aW9uIiwgIlRGT09UIjogIlRhYmxlU2VjdGlvbiIsICJUQk9EWSI6ICJUYWJsZVNlY3Rpb24iLCAiVFIiOgogICAgICAiVGFibGVSb3ciLCAiVEgiOiAiVGFibGVDZWxsIiwgIlREIjogIlRhYmxlQ2VsbCIsICJGUkFNRVNFVCI6CiAgICAgICJGcmFtZVNldCIsICJJRlJBTUUiOiAiSUZyYW1lIgogICAgfTsKICAgIGlmICh0cmFuc1t0YWdOYW1lXSkga2xhc3MgPSAnSFRNTCcgKyB0cmFuc1t0YWdOYW1lXSArICdFbGVtZW50JzsKICAgIGlmICh3aW5kb3dba2xhc3NdKSByZXR1cm4gd2luZG93W2tsYXNzXTsKICAgIGtsYXNzID0gJ0hUTUwnICsgdGFnTmFtZSArICdFbGVtZW50JzsKICAgIGlmICh3aW5kb3dba2xhc3NdKSByZXR1cm4gd2luZG93W2tsYXNzXTsKICAgIGtsYXNzID0gJ0hUTUwnICsgdGFnTmFtZS5jYXBpdGFsaXplKCkgKyAnRWxlbWVudCc7CiAgICBpZiAod2luZG93W2tsYXNzXSkgcmV0dXJuIHdpbmRvd1trbGFzc107CgogICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpLAogICAgIHByb3RvID0gZWxlbWVudFsnX19wcm90b19fJ10gfHwgZWxlbWVudC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7CgogICAgZWxlbWVudCA9IG51bGw7CiAgICByZXR1cm4gcHJvdG87CiAgfQoKICBmdW5jdGlvbiBhZGRNZXRob2RzKG1ldGhvZHMpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSBhZGRGb3JtTWV0aG9kcygpOwoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7CiAgICAgIHZhciB0YWdOYW1lID0gbWV0aG9kczsKICAgICAgbWV0aG9kcyA9IGFyZ3VtZW50c1sxXTsKICAgIH0KCiAgICBpZiAoIXRhZ05hbWUpIHsKICAgICAgT2JqZWN0LmV4dGVuZChFbGVtZW50Lk1ldGhvZHMsIG1ldGhvZHMgfHwge30pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKE9iamVjdC5pc0FycmF5KHRhZ05hbWUpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHRhZzsgdGFnID0gdGFnTmFtZVtpXTsgaSsrKQogICAgICAgICAgYWRkTWV0aG9kc1RvVGFnTmFtZSh0YWcsIG1ldGhvZHMpOwogICAgICB9IGVsc2UgewogICAgICAgIGFkZE1ldGhvZHNUb1RhZ05hbWUodGFnTmFtZSwgbWV0aG9kcyk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgRUxFTUVOVF9QUk9UT1RZUEUgPSB3aW5kb3cuSFRNTEVsZW1lbnQgPyBIVE1MRWxlbWVudC5wcm90b3R5cGUgOgogICAgIEVsZW1lbnQucHJvdG90eXBlOwoKICAgIGlmIChGLkVsZW1lbnRFeHRlbnNpb25zKSB7CiAgICAgIG1lcmdlTWV0aG9kcyhFTEVNRU5UX1BST1RPVFlQRSwgRWxlbWVudC5NZXRob2RzKTsKICAgICAgbWVyZ2VNZXRob2RzKEVMRU1FTlRfUFJPVE9UWVBFLCBFbGVtZW50Lk1ldGhvZHMuU2ltdWxhdGVkLCB0cnVlKTsKICAgIH0KCiAgICBpZiAoRi5TcGVjaWZpY0VsZW1lbnRFeHRlbnNpb25zKSB7CiAgICAgIGZvciAodmFyIHRhZyBpbiBFbGVtZW50Lk1ldGhvZHMuQnlUYWcpIHsKICAgICAgICB2YXIga2xhc3MgPSBmaW5kRE9NQ2xhc3ModGFnKTsKICAgICAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKGtsYXNzKSkgY29udGludWU7CiAgICAgICAgbWVyZ2VNZXRob2RzKGtsYXNzLnByb3RvdHlwZSwgQnlUYWdbdGFnXSk7CiAgICAgIH0KICAgIH0KCiAgICBPYmplY3QuZXh0ZW5kKEVsZW1lbnQsIEVsZW1lbnQuTWV0aG9kcyk7CiAgICBPYmplY3QuZXh0ZW5kKEVsZW1lbnQsIEVsZW1lbnQuTWV0aG9kcy5TaW11bGF0ZWQpOwogICAgZGVsZXRlIEVsZW1lbnQuQnlUYWc7CiAgICBkZWxldGUgRWxlbWVudC5TaW11bGF0ZWQ7CgogICAgRWxlbWVudC5leHRlbmQucmVmcmVzaCgpOwoKICAgIEVMRU1FTlRfQ0FDSEUgPSB7fTsKICB9CgogIE9iamVjdC5leHRlbmQoR0xPQkFMLkVsZW1lbnQsIHsKICAgIGV4dGVuZDogICAgIGV4dGVuZCwKICAgIGFkZE1ldGhvZHM6IGFkZE1ldGhvZHMKICB9KTsKCiAgaWYgKGV4dGVuZCA9PT0gUHJvdG90eXBlLkspIHsKICAgIEdMT0JBTC5FbGVtZW50LmV4dGVuZC5yZWZyZXNoID0gUHJvdG90eXBlLmVtcHR5RnVuY3Rpb247CiAgfSBlbHNlIHsKICAgIEdMT0JBTC5FbGVtZW50LmV4dGVuZC5yZWZyZXNoID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmIChQcm90b3R5cGUuQnJvd3NlckZlYXR1cmVzLkVsZW1lbnRFeHRlbnNpb25zKSByZXR1cm47CiAgICAgIE9iamVjdC5leHRlbmQoTWV0aG9kcywgRWxlbWVudC5NZXRob2RzKTsKICAgICAgT2JqZWN0LmV4dGVuZChNZXRob2RzLCBFbGVtZW50Lk1ldGhvZHMuU2ltdWxhdGVkKTsKCiAgICAgIEVYVEVOREVEID0ge307CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gYWRkRm9ybU1ldGhvZHMoKSB7CiAgICBPYmplY3QuZXh0ZW5kKEZvcm0sIEZvcm0uTWV0aG9kcyk7CiAgICBPYmplY3QuZXh0ZW5kKEZvcm0uRWxlbWVudCwgRm9ybS5FbGVtZW50Lk1ldGhvZHMpOwogICAgT2JqZWN0LmV4dGVuZChFbGVtZW50Lk1ldGhvZHMuQnlUYWcsIHsKICAgICAgIkZPUk0iOiAgICAgT2JqZWN0LmNsb25lKEZvcm0uTWV0aG9kcyksCiAgICAgICJJTlBVVCI6ICAgIE9iamVjdC5jbG9uZShGb3JtLkVsZW1lbnQuTWV0aG9kcyksCiAgICAgICJTRUxFQ1QiOiAgIE9iamVjdC5jbG9uZShGb3JtLkVsZW1lbnQuTWV0aG9kcyksCiAgICAgICJURVhUQVJFQSI6IE9iamVjdC5jbG9uZShGb3JtLkVsZW1lbnQuTWV0aG9kcyksCiAgICAgICJCVVRUT04iOiAgIE9iamVjdC5jbG9uZShGb3JtLkVsZW1lbnQuTWV0aG9kcykKICAgIH0pOwogIH0KCiAgRWxlbWVudC5hZGRNZXRob2RzKG1ldGhvZHMpOwoKICBmdW5jdGlvbiBkZXN0cm95Q2FjaGVfSUUoKSB7CiAgICBESVYgPSBudWxsOwogICAgRUxFTUVOVF9DQUNIRSA9IG51bGw7CiAgfQoKICBpZiAod2luZG93LmF0dGFjaEV2ZW50KQogICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbnVubG9hZCcsIGRlc3Ryb3lDYWNoZV9JRSk7Cgp9KSh0aGlzKTsKKGZ1bmN0aW9uKCkgewoKICBmdW5jdGlvbiB0b0RlY2ltYWwocGN0U3RyaW5nKSB7CiAgICB2YXIgbWF0Y2ggPSBwY3RTdHJpbmcubWF0Y2goL14oXGQrKSU/JC9pKTsKICAgIGlmICghbWF0Y2gpIHJldHVybiBudWxsOwogICAgcmV0dXJuIChOdW1iZXIobWF0Y2hbMV0pIC8gMTAwKTsKICB9CgogIGZ1bmN0aW9uIGdldFJhd1N0eWxlKGVsZW1lbnQsIHN0eWxlKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnN0eWxlW3N0eWxlXTsKICAgIGlmICghdmFsdWUgfHwgdmFsdWUgPT09ICdhdXRvJykgewogICAgICB2YXIgY3NzID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKTsKICAgICAgdmFsdWUgPSBjc3MgPyBjc3Nbc3R5bGVdIDogbnVsbDsKICAgIH0KCiAgICBpZiAoc3R5bGUgPT09ICdvcGFjaXR5JykgcmV0dXJuIHZhbHVlID8gcGFyc2VGbG9hdCh2YWx1ZSkgOiAxLjA7CiAgICByZXR1cm4gdmFsdWUgPT09ICdhdXRvJyA/IG51bGwgOiB2YWx1ZTsKICB9CgogIGZ1bmN0aW9uIGdldFJhd1N0eWxlX0lFKGVsZW1lbnQsIHN0eWxlKSB7CiAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnN0eWxlW3N0eWxlXTsKICAgIGlmICghdmFsdWUgJiYgZWxlbWVudC5jdXJyZW50U3R5bGUpIHsKICAgICAgdmFsdWUgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtzdHlsZV07CiAgICB9CiAgICByZXR1cm4gdmFsdWU7CiAgfQoKICBmdW5jdGlvbiBnZXRDb250ZW50V2lkdGgoZWxlbWVudCwgY29udGV4dCkgewogICAgdmFyIGJveFdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDsKCiAgICB2YXIgYmwgPSBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdib3JkZXJMZWZ0V2lkdGgnLCAgY29udGV4dCkgfHwgMDsKICAgIHZhciBiciA9IGdldFBpeGVsVmFsdWUoZWxlbWVudCwgJ2JvcmRlclJpZ2h0V2lkdGgnLCBjb250ZXh0KSB8fCAwOwogICAgdmFyIHBsID0gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAncGFkZGluZ0xlZnQnLCAgICAgIGNvbnRleHQpIHx8IDA7CiAgICB2YXIgcHIgPSBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdwYWRkaW5nUmlnaHQnLCAgICAgY29udGV4dCkgfHwgMDsKCiAgICByZXR1cm4gYm94V2lkdGggLSBibCAtIGJyIC0gcGwgLSBwcjsKICB9CgogIGlmICgnY3VycmVudFN0eWxlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHsKICAgIGdldFJhd1N0eWxlID0gZ2V0UmF3U3R5bGVfSUU7CiAgfQoKCiAgZnVuY3Rpb24gZ2V0UGl4ZWxWYWx1ZSh2YWx1ZSwgcHJvcGVydHksIGNvbnRleHQpIHsKICAgIHZhciBlbGVtZW50ID0gbnVsbDsKICAgIGlmIChPYmplY3QuaXNFbGVtZW50KHZhbHVlKSkgewogICAgICBlbGVtZW50ID0gdmFsdWU7CiAgICAgIHZhbHVlID0gZ2V0UmF3U3R5bGUoZWxlbWVudCwgcHJvcGVydHkpOwogICAgfQoKICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGlmICgoL14oPzotKT9cZCsoXC5cZCspPyhweCk/JC9pKS50ZXN0KHZhbHVlKSkgewogICAgICByZXR1cm4gd2luZG93LnBhcnNlRmxvYXQodmFsdWUpOwogICAgfQoKICAgIHZhciBpc1BlcmNlbnRhZ2UgPSB2YWx1ZS5pbmNsdWRlKCclJyksIGlzVmlld3BvcnQgPSAoY29udGV4dCA9PT0gZG9jdW1lbnQudmlld3BvcnQpOwoKICAgIGlmICgvXGQvLnRlc3QodmFsdWUpICYmIGVsZW1lbnQgJiYgZWxlbWVudC5ydW50aW1lU3R5bGUgJiYgIShpc1BlcmNlbnRhZ2UgJiYgaXNWaWV3cG9ydCkpIHsKICAgICAgdmFyIHN0eWxlID0gZWxlbWVudC5zdHlsZS5sZWZ0LCByU3R5bGUgPSBlbGVtZW50LnJ1bnRpbWVTdHlsZS5sZWZ0OwogICAgICBlbGVtZW50LnJ1bnRpbWVTdHlsZS5sZWZ0ID0gZWxlbWVudC5jdXJyZW50U3R5bGUubGVmdDsKICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gdmFsdWUgfHwgMDsKICAgICAgdmFsdWUgPSBlbGVtZW50LnN0eWxlLnBpeGVsTGVmdDsKICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gc3R5bGU7CiAgICAgIGVsZW1lbnQucnVudGltZVN0eWxlLmxlZnQgPSByU3R5bGU7CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CgogICAgaWYgKGVsZW1lbnQgJiYgaXNQZXJjZW50YWdlKSB7CiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IGVsZW1lbnQucGFyZW50Tm9kZTsKICAgICAgdmFyIGRlY2ltYWwgPSB0b0RlY2ltYWwodmFsdWUpLCB3aG9sZSA9IG51bGw7CgogICAgICB2YXIgaXNIb3Jpem9udGFsID0gcHJvcGVydHkuaW5jbHVkZSgnbGVmdCcpIHx8IHByb3BlcnR5LmluY2x1ZGUoJ3JpZ2h0JykgfHwKICAgICAgIHByb3BlcnR5LmluY2x1ZGUoJ3dpZHRoJyk7CgogICAgICB2YXIgaXNWZXJ0aWNhbCAgID0gcHJvcGVydHkuaW5jbHVkZSgndG9wJykgfHwgcHJvcGVydHkuaW5jbHVkZSgnYm90dG9tJykgfHwKICAgICAgICBwcm9wZXJ0eS5pbmNsdWRlKCdoZWlnaHQnKTsKCiAgICAgIGlmIChjb250ZXh0ID09PSBkb2N1bWVudC52aWV3cG9ydCkgewogICAgICAgIGlmIChpc0hvcml6b250YWwpIHsKICAgICAgICAgIHdob2xlID0gZG9jdW1lbnQudmlld3BvcnQuZ2V0V2lkdGgoKTsKICAgICAgICB9IGVsc2UgaWYgKGlzVmVydGljYWwpIHsKICAgICAgICAgIHdob2xlID0gZG9jdW1lbnQudmlld3BvcnQuZ2V0SGVpZ2h0KCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpc0hvcml6b250YWwpIHsKICAgICAgICAgIHdob2xlID0gJChjb250ZXh0KS5tZWFzdXJlKCd3aWR0aCcpOwogICAgICAgIH0gZWxzZSBpZiAoaXNWZXJ0aWNhbCkgewogICAgICAgICAgd2hvbGUgPSAkKGNvbnRleHQpLm1lYXN1cmUoJ2hlaWdodCcpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuICh3aG9sZSA9PT0gbnVsbCkgPyAwIDogd2hvbGUgKiBkZWNpbWFsOwogICAgfQoKICAgIHJldHVybiAwOwogIH0KCiAgZnVuY3Rpb24gdG9DU1NQaXhlbHMobnVtYmVyKSB7CiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKG51bWJlcikgJiYgbnVtYmVyLmVuZHNXaXRoKCdweCcpKQogICAgICByZXR1cm4gbnVtYmVyOwogICAgcmV0dXJuIG51bWJlciArICdweCc7CiAgfQoKICBmdW5jdGlvbiBpc0Rpc3BsYXllZChlbGVtZW50KSB7CiAgICB3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50LnBhcmVudE5vZGUpIHsKICAgICAgdmFyIGRpc3BsYXkgPSBlbGVtZW50LmdldFN0eWxlKCdkaXNwbGF5Jyk7CiAgICAgIGlmIChkaXNwbGF5ID09PSAnbm9uZScpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgZWxlbWVudCA9ICQoZWxlbWVudC5wYXJlbnROb2RlKTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgdmFyIGhhc0xheW91dCA9IFByb3RvdHlwZS5LOwogIGlmICgnY3VycmVudFN0eWxlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHsKICAgIGhhc0xheW91dCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgaWYgKCFlbGVtZW50LmN1cnJlbnRTdHlsZS5oYXNMYXlvdXQpIHsKICAgICAgICBlbGVtZW50LnN0eWxlLnpvb20gPSAxOwogICAgICB9CiAgICAgIHJldHVybiBlbGVtZW50OwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGNzc05hbWVGb3Ioa2V5KSB7CiAgICBpZiAoa2V5LmluY2x1ZGUoJ2JvcmRlcicpKSBrZXkgPSBrZXkgKyAnLXdpZHRoJzsKICAgIHJldHVybiBrZXkuY2FtZWxpemUoKTsKICB9CgogIEVsZW1lbnQuTGF5b3V0ID0gQ2xhc3MuY3JlYXRlKEhhc2gsIHsKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCRzdXBlciwgZWxlbWVudCwgcHJlQ29tcHV0ZSkgewogICAgICAkc3VwZXIoKTsKICAgICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICAgIEVsZW1lbnQuTGF5b3V0LlBST1BFUlRJRVMuZWFjaCggZnVuY3Rpb24ocHJvcGVydHkpIHsKICAgICAgICB0aGlzLl9zZXQocHJvcGVydHksIG51bGwpOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChwcmVDb21wdXRlKSB7CiAgICAgICAgdGhpcy5fcHJlQ29tcHV0aW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLl9iZWdpbigpOwogICAgICAgIEVsZW1lbnQuTGF5b3V0LlBST1BFUlRJRVMuZWFjaCggdGhpcy5fY29tcHV0ZSwgdGhpcyApOwogICAgICAgIHRoaXMuX2VuZCgpOwogICAgICAgIHRoaXMuX3ByZUNvbXB1dGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIF9zZXQ6IGZ1bmN0aW9uKHByb3BlcnR5LCB2YWx1ZSkgewogICAgICByZXR1cm4gSGFzaC5wcm90b3R5cGUuc2V0LmNhbGwodGhpcywgcHJvcGVydHksIHZhbHVlKTsKICAgIH0sCgogICAgc2V0OiBmdW5jdGlvbihwcm9wZXJ0eSwgdmFsdWUpIHsKICAgICAgdGhyb3cgIlByb3BlcnRpZXMgb2YgRWxlbWVudC5MYXlvdXQgYXJlIHJlYWQtb25seS4iOwogICAgfSwKCiAgICBnZXQ6IGZ1bmN0aW9uKCRzdXBlciwgcHJvcGVydHkpIHsKICAgICAgdmFyIHZhbHVlID0gJHN1cGVyKHByb3BlcnR5KTsKICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsID8gdGhpcy5fY29tcHV0ZShwcm9wZXJ0eSkgOiB2YWx1ZTsKICAgIH0sCgogICAgX2JlZ2luOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMuX2lzUHJlcGFyZWQoKSkgcmV0dXJuOwoKICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7CiAgICAgIGlmIChpc0Rpc3BsYXllZChlbGVtZW50KSkgewogICAgICAgIHRoaXMuX3NldFByZXBhcmVkKHRydWUpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKCiAgICAgIHZhciBvcmlnaW5hbFN0eWxlcyA9IHsKICAgICAgICBwb3NpdGlvbjogICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uICAgfHwgJycsCiAgICAgICAgd2lkdGg6ICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCAgICAgIHx8ICcnLAogICAgICAgIHZpc2liaWxpdHk6IGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSB8fCAnJywKICAgICAgICBkaXNwbGF5OiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgICAgfHwgJycKICAgICAgfTsKCiAgICAgIGVsZW1lbnQuc3RvcmUoJ3Byb3RvdHlwZV9vcmlnaW5hbF9zdHlsZXMnLCBvcmlnaW5hbFN0eWxlcyk7CgogICAgICB2YXIgcG9zaXRpb24gPSBnZXRSYXdTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSwgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoOwoKICAgICAgaWYgKHdpZHRoID09PSAwIHx8IHdpZHRoID09PSBudWxsKSB7CiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7CiAgICAgIH0KCiAgICAgIHZhciBjb250ZXh0ID0gKHBvc2l0aW9uID09PSAnZml4ZWQnKSA/IGRvY3VtZW50LnZpZXdwb3J0IDoKICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZTsKCiAgICAgIHZhciB0ZW1wU3R5bGVzID0gewogICAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLAogICAgICAgIGRpc3BsYXk6ICAgICdibG9jaycKICAgICAgfTsKCiAgICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgdGVtcFN0eWxlcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CgogICAgICBlbGVtZW50LnNldFN0eWxlKHRlbXBTdHlsZXMpOwoKICAgICAgdmFyIHBvc2l0aW9uZWRXaWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGgsIG5ld1dpZHRoOwogICAgICBpZiAod2lkdGggJiYgKHBvc2l0aW9uZWRXaWR0aCA9PT0gd2lkdGgpKSB7CiAgICAgICAgbmV3V2lkdGggPSBnZXRDb250ZW50V2lkdGgoZWxlbWVudCwgY29udGV4dCk7CiAgICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPT09ICdhYnNvbHV0ZScgfHwgcG9zaXRpb24gPT09ICdmaXhlZCcpIHsKICAgICAgICBuZXdXaWR0aCA9IGdldENvbnRlbnRXaWR0aChlbGVtZW50LCBjb250ZXh0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlLCBwTGF5b3V0ID0gJChwYXJlbnQpLmdldExheW91dCgpOwoKICAgICAgICBuZXdXaWR0aCA9IHBMYXlvdXQuZ2V0KCd3aWR0aCcpIC0KICAgICAgICAgdGhpcy5nZXQoJ21hcmdpbi1sZWZ0JykgLQogICAgICAgICB0aGlzLmdldCgnYm9yZGVyLWxlZnQnKSAtCiAgICAgICAgIHRoaXMuZ2V0KCdwYWRkaW5nLWxlZnQnKSAtCiAgICAgICAgIHRoaXMuZ2V0KCdwYWRkaW5nLXJpZ2h0JykgLQogICAgICAgICB0aGlzLmdldCgnYm9yZGVyLXJpZ2h0JykgLQogICAgICAgICB0aGlzLmdldCgnbWFyZ2luLXJpZ2h0Jyk7CiAgICAgIH0KCiAgICAgIGVsZW1lbnQuc2V0U3R5bGUoeyB3aWR0aDogbmV3V2lkdGggKyAncHgnIH0pOwoKICAgICAgdGhpcy5fc2V0UHJlcGFyZWQodHJ1ZSk7CiAgICB9LAoKICAgIF9lbmQ6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDsKICAgICAgdmFyIG9yaWdpbmFsU3R5bGVzID0gZWxlbWVudC5yZXRyaWV2ZSgncHJvdG90eXBlX29yaWdpbmFsX3N0eWxlcycpOwogICAgICBlbGVtZW50LnN0b3JlKCdwcm90b3R5cGVfb3JpZ2luYWxfc3R5bGVzJywgbnVsbCk7CiAgICAgIGVsZW1lbnQuc2V0U3R5bGUob3JpZ2luYWxTdHlsZXMpOwogICAgICB0aGlzLl9zZXRQcmVwYXJlZChmYWxzZSk7CiAgICB9LAoKICAgIF9jb21wdXRlOiBmdW5jdGlvbihwcm9wZXJ0eSkgewogICAgICB2YXIgQ09NUFVUQVRJT05TID0gRWxlbWVudC5MYXlvdXQuQ09NUFVUQVRJT05TOwogICAgICBpZiAoIShwcm9wZXJ0eSBpbiBDT01QVVRBVElPTlMpKSB7CiAgICAgICAgdGhyb3cgIlByb3BlcnR5IG5vdCBmb3VuZC4iOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fc2V0KHByb3BlcnR5LCBDT01QVVRBVElPTlNbcHJvcGVydHldLmNhbGwodGhpcywgdGhpcy5lbGVtZW50KSk7CiAgICB9LAoKICAgIF9pc1ByZXBhcmVkOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5yZXRyaWV2ZSgncHJvdG90eXBlX2VsZW1lbnRfbGF5b3V0X3ByZXBhcmVkJywgZmFsc2UpOwogICAgfSwKCiAgICBfc2V0UHJlcGFyZWQ6IGZ1bmN0aW9uKGJvb2wpIHsKICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5zdG9yZSgncHJvdG90eXBlX2VsZW1lbnRfbGF5b3V0X3ByZXBhcmVkJywgYm9vbCk7CiAgICB9LAoKICAgIHRvT2JqZWN0OiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSAkQShhcmd1bWVudHMpOwogICAgICB2YXIga2V5cyA9IChhcmdzLmxlbmd0aCA9PT0gMCkgPyBFbGVtZW50LkxheW91dC5QUk9QRVJUSUVTIDoKICAgICAgIGFyZ3Muam9pbignICcpLnNwbGl0KCcgJyk7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAga2V5cy5lYWNoKCBmdW5jdGlvbihrZXkpIHsKICAgICAgICBpZiAoIUVsZW1lbnQuTGF5b3V0LlBST1BFUlRJRVMuaW5jbHVkZShrZXkpKSByZXR1cm47CiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoa2V5KTsKICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkgb2JqW2tleV0gPSB2YWx1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIHJldHVybiBvYmo7CiAgICB9LAoKICAgIHRvSGFzaDogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBvYmogPSB0aGlzLnRvT2JqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIHJldHVybiBuZXcgSGFzaChvYmopOwogICAgfSwKCiAgICB0b0NTUzogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhcmdzID0gJEEoYXJndW1lbnRzKTsKICAgICAgdmFyIGtleXMgPSAoYXJncy5sZW5ndGggPT09IDApID8gRWxlbWVudC5MYXlvdXQuUFJPUEVSVElFUyA6CiAgICAgICBhcmdzLmpvaW4oJyAnKS5zcGxpdCgnICcpOwogICAgICB2YXIgY3NzID0ge307CgogICAgICBrZXlzLmVhY2goIGZ1bmN0aW9uKGtleSkgewogICAgICAgIGlmICghRWxlbWVudC5MYXlvdXQuUFJPUEVSVElFUy5pbmNsdWRlKGtleSkpIHJldHVybjsKICAgICAgICBpZiAoRWxlbWVudC5MYXlvdXQuQ09NUE9TSVRFX1BST1BFUlRJRVMuaW5jbHVkZShrZXkpKSByZXR1cm47CgogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KGtleSk7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIGNzc1tjc3NOYW1lRm9yKGtleSldID0gdmFsdWUgKyAncHgnOwogICAgICB9LCB0aGlzKTsKICAgICAgcmV0dXJuIGNzczsKICAgIH0sCgogICAgaW5zcGVjdDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAiIzxFbGVtZW50LkxheW91dD4iOwogICAgfQogIH0pOwoKICBPYmplY3QuZXh0ZW5kKEVsZW1lbnQuTGF5b3V0LCB7CiAgICBQUk9QRVJUSUVTOiAkdygnaGVpZ2h0IHdpZHRoIHRvcCBsZWZ0IHJpZ2h0IGJvdHRvbSBib3JkZXItbGVmdCBib3JkZXItcmlnaHQgYm9yZGVyLXRvcCBib3JkZXItYm90dG9tIHBhZGRpbmctbGVmdCBwYWRkaW5nLXJpZ2h0IHBhZGRpbmctdG9wIHBhZGRpbmctYm90dG9tIG1hcmdpbi10b3AgbWFyZ2luLWJvdHRvbSBtYXJnaW4tbGVmdCBtYXJnaW4tcmlnaHQgcGFkZGluZy1ib3gtd2lkdGggcGFkZGluZy1ib3gtaGVpZ2h0IGJvcmRlci1ib3gtd2lkdGggYm9yZGVyLWJveC1oZWlnaHQgbWFyZ2luLWJveC13aWR0aCBtYXJnaW4tYm94LWhlaWdodCcpLAoKICAgIENPTVBPU0lURV9QUk9QRVJUSUVTOiAkdygncGFkZGluZy1ib3gtd2lkdGggcGFkZGluZy1ib3gtaGVpZ2h0IG1hcmdpbi1ib3gtd2lkdGggbWFyZ2luLWJveC1oZWlnaHQgYm9yZGVyLWJveC13aWR0aCBib3JkZXItYm94LWhlaWdodCcpLAoKICAgIENPTVBVVEFUSU9OUzogewogICAgICAnaGVpZ2h0JzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIGlmICghdGhpcy5fcHJlQ29tcHV0aW5nKSB0aGlzLl9iZWdpbigpOwoKICAgICAgICB2YXIgYkhlaWdodCA9IHRoaXMuZ2V0KCdib3JkZXItYm94LWhlaWdodCcpOwogICAgICAgIGlmIChiSGVpZ2h0IDw9IDApIHsKICAgICAgICAgIGlmICghdGhpcy5fcHJlQ29tcHV0aW5nKSB0aGlzLl9lbmQoKTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAgICAgdmFyIGJUb3AgPSB0aGlzLmdldCgnYm9yZGVyLXRvcCcpLAogICAgICAgICBiQm90dG9tID0gdGhpcy5nZXQoJ2JvcmRlci1ib3R0b20nKTsKCiAgICAgICAgdmFyIHBUb3AgPSB0aGlzLmdldCgncGFkZGluZy10b3AnKSwKICAgICAgICAgcEJvdHRvbSA9IHRoaXMuZ2V0KCdwYWRkaW5nLWJvdHRvbScpOwoKICAgICAgICBpZiAoIXRoaXMuX3ByZUNvbXB1dGluZykgdGhpcy5fZW5kKCk7CgogICAgICAgIHJldHVybiBiSGVpZ2h0IC0gYlRvcCAtIGJCb3R0b20gLSBwVG9wIC0gcEJvdHRvbTsKICAgICAgfSwKCiAgICAgICd3aWR0aCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICBpZiAoIXRoaXMuX3ByZUNvbXB1dGluZykgdGhpcy5fYmVnaW4oKTsKCiAgICAgICAgdmFyIGJXaWR0aCA9IHRoaXMuZ2V0KCdib3JkZXItYm94LXdpZHRoJyk7CiAgICAgICAgaWYgKGJXaWR0aCA8PSAwKSB7CiAgICAgICAgICBpZiAoIXRoaXMuX3ByZUNvbXB1dGluZykgdGhpcy5fZW5kKCk7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHZhciBiTGVmdCA9IHRoaXMuZ2V0KCdib3JkZXItbGVmdCcpLAogICAgICAgICBiUmlnaHQgPSB0aGlzLmdldCgnYm9yZGVyLXJpZ2h0Jyk7CgogICAgICAgIHZhciBwTGVmdCA9IHRoaXMuZ2V0KCdwYWRkaW5nLWxlZnQnKSwKICAgICAgICAgcFJpZ2h0ID0gdGhpcy5nZXQoJ3BhZGRpbmctcmlnaHQnKTsKCiAgICAgICAgaWYgKCF0aGlzLl9wcmVDb21wdXRpbmcpIHRoaXMuX2VuZCgpOwogICAgICAgIHJldHVybiBiV2lkdGggLSBiTGVmdCAtIGJSaWdodCAtIHBMZWZ0IC0gcFJpZ2h0OwogICAgICB9LAoKICAgICAgJ3BhZGRpbmctYm94LWhlaWdodCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5nZXQoJ2hlaWdodCcpLAogICAgICAgICBwVG9wID0gdGhpcy5nZXQoJ3BhZGRpbmctdG9wJyksCiAgICAgICAgIHBCb3R0b20gPSB0aGlzLmdldCgncGFkZGluZy1ib3R0b20nKTsKCiAgICAgICAgcmV0dXJuIGhlaWdodCArIHBUb3AgKyBwQm90dG9tOwogICAgICB9LAoKICAgICAgJ3BhZGRpbmctYm94LXdpZHRoJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0KCd3aWR0aCcpLAogICAgICAgICBwTGVmdCA9IHRoaXMuZ2V0KCdwYWRkaW5nLWxlZnQnKSwKICAgICAgICAgcFJpZ2h0ID0gdGhpcy5nZXQoJ3BhZGRpbmctcmlnaHQnKTsKCiAgICAgICAgcmV0dXJuIHdpZHRoICsgcExlZnQgKyBwUmlnaHQ7CiAgICAgIH0sCgogICAgICAnYm9yZGVyLWJveC1oZWlnaHQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgaWYgKCF0aGlzLl9wcmVDb21wdXRpbmcpIHRoaXMuX2JlZ2luKCk7CiAgICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0OwogICAgICAgIGlmICghdGhpcy5fcHJlQ29tcHV0aW5nKSB0aGlzLl9lbmQoKTsKICAgICAgICByZXR1cm4gaGVpZ2h0OwogICAgICB9LAoKICAgICAgJ2JvcmRlci1ib3gtd2lkdGgnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgaWYgKCF0aGlzLl9wcmVDb21wdXRpbmcpIHRoaXMuX2JlZ2luKCk7CiAgICAgICAgdmFyIHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDsKICAgICAgICBpZiAoIXRoaXMuX3ByZUNvbXB1dGluZykgdGhpcy5fZW5kKCk7CiAgICAgICAgcmV0dXJuIHdpZHRoOwogICAgICB9LAoKICAgICAgJ21hcmdpbi1ib3gtaGVpZ2h0JzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHZhciBiSGVpZ2h0ID0gdGhpcy5nZXQoJ2JvcmRlci1ib3gtaGVpZ2h0JyksCiAgICAgICAgIG1Ub3AgPSB0aGlzLmdldCgnbWFyZ2luLXRvcCcpLAogICAgICAgICBtQm90dG9tID0gdGhpcy5nZXQoJ21hcmdpbi1ib3R0b20nKTsKCiAgICAgICAgaWYgKGJIZWlnaHQgPD0gMCkgcmV0dXJuIDA7CgogICAgICAgIHJldHVybiBiSGVpZ2h0ICsgbVRvcCArIG1Cb3R0b207CiAgICAgIH0sCgogICAgICAnbWFyZ2luLWJveC13aWR0aCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICB2YXIgYldpZHRoID0gdGhpcy5nZXQoJ2JvcmRlci1ib3gtd2lkdGgnKSwKICAgICAgICAgbUxlZnQgPSB0aGlzLmdldCgnbWFyZ2luLWxlZnQnKSwKICAgICAgICAgbVJpZ2h0ID0gdGhpcy5nZXQoJ21hcmdpbi1yaWdodCcpOwoKICAgICAgICBpZiAoYldpZHRoIDw9IDApIHJldHVybiAwOwoKICAgICAgICByZXR1cm4gYldpZHRoICsgbUxlZnQgKyBtUmlnaHQ7CiAgICAgIH0sCgogICAgICAndG9wJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHZhciBvZmZzZXQgPSBlbGVtZW50LnBvc2l0aW9uZWRPZmZzZXQoKTsKICAgICAgICByZXR1cm4gb2Zmc2V0LnRvcDsKICAgICAgfSwKCiAgICAgICdib3R0b20nOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdmFyIG9mZnNldCA9IGVsZW1lbnQucG9zaXRpb25lZE9mZnNldCgpLAogICAgICAgICBwYXJlbnQgPSBlbGVtZW50LmdldE9mZnNldFBhcmVudCgpLAogICAgICAgICBwSGVpZ2h0ID0gcGFyZW50Lm1lYXN1cmUoJ2hlaWdodCcpOwoKICAgICAgICB2YXIgbUhlaWdodCA9IHRoaXMuZ2V0KCdib3JkZXItYm94LWhlaWdodCcpOwoKICAgICAgICByZXR1cm4gcEhlaWdodCAtIG1IZWlnaHQgLSBvZmZzZXQudG9wOwogICAgICB9LAoKICAgICAgJ2xlZnQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdmFyIG9mZnNldCA9IGVsZW1lbnQucG9zaXRpb25lZE9mZnNldCgpOwogICAgICAgIHJldHVybiBvZmZzZXQubGVmdDsKICAgICAgfSwKCiAgICAgICdyaWdodCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICB2YXIgb2Zmc2V0ID0gZWxlbWVudC5wb3NpdGlvbmVkT2Zmc2V0KCksCiAgICAgICAgIHBhcmVudCA9IGVsZW1lbnQuZ2V0T2Zmc2V0UGFyZW50KCksCiAgICAgICAgIHBXaWR0aCA9IHBhcmVudC5tZWFzdXJlKCd3aWR0aCcpOwoKICAgICAgICB2YXIgbVdpZHRoID0gdGhpcy5nZXQoJ2JvcmRlci1ib3gtd2lkdGgnKTsKCiAgICAgICAgcmV0dXJuIHBXaWR0aCAtIG1XaWR0aCAtIG9mZnNldC5sZWZ0OwogICAgICB9LAoKICAgICAgJ3BhZGRpbmctdG9wJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdwYWRkaW5nVG9wJyk7CiAgICAgIH0sCgogICAgICAncGFkZGluZy1ib3R0b20nOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIGdldFBpeGVsVmFsdWUoZWxlbWVudCwgJ3BhZGRpbmdCb3R0b20nKTsKICAgICAgfSwKCiAgICAgICdwYWRkaW5nLWxlZnQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIGdldFBpeGVsVmFsdWUoZWxlbWVudCwgJ3BhZGRpbmdMZWZ0Jyk7CiAgICAgIH0sCgogICAgICAncGFkZGluZy1yaWdodCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAncGFkZGluZ1JpZ2h0Jyk7CiAgICAgIH0sCgogICAgICAnYm9yZGVyLXRvcCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAnYm9yZGVyVG9wV2lkdGgnKTsKICAgICAgfSwKCiAgICAgICdib3JkZXItYm90dG9tJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdib3JkZXJCb3R0b21XaWR0aCcpOwogICAgICB9LAoKICAgICAgJ2JvcmRlci1sZWZ0JzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdib3JkZXJMZWZ0V2lkdGgnKTsKICAgICAgfSwKCiAgICAgICdib3JkZXItcmlnaHQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIGdldFBpeGVsVmFsdWUoZWxlbWVudCwgJ2JvcmRlclJpZ2h0V2lkdGgnKTsKICAgICAgfSwKCiAgICAgICdtYXJnaW4tdG9wJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdtYXJnaW5Ub3AnKTsKICAgICAgfSwKCiAgICAgICdtYXJnaW4tYm90dG9tJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdtYXJnaW5Cb3R0b20nKTsKICAgICAgfSwKCiAgICAgICdtYXJnaW4tbGVmdCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAnbWFyZ2luTGVmdCcpOwogICAgICB9LAoKICAgICAgJ21hcmdpbi1yaWdodCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAnbWFyZ2luUmlnaHQnKTsKICAgICAgfQogICAgfQogIH0pOwoKICBpZiAoJ2dldEJvdW5kaW5nQ2xpZW50UmVjdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICBPYmplY3QuZXh0ZW5kKEVsZW1lbnQuTGF5b3V0LkNPTVBVVEFUSU9OUywgewogICAgICAncmlnaHQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdmFyIHBhcmVudCA9IGhhc0xheW91dChlbGVtZW50LmdldE9mZnNldFBhcmVudCgpKTsKICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgIHBSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgICByZXR1cm4gKHBSZWN0LnJpZ2h0IC0gcmVjdC5yaWdodCkucm91bmQoKTsKICAgICAgfSwKCiAgICAgICdib3R0b20nOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdmFyIHBhcmVudCA9IGhhc0xheW91dChlbGVtZW50LmdldE9mZnNldFBhcmVudCgpKTsKICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgIHBSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgICByZXR1cm4gKHBSZWN0LmJvdHRvbSAtIHJlY3QuYm90dG9tKS5yb3VuZCgpOwogICAgICB9CiAgICB9KTsKICB9CgogIEVsZW1lbnQuT2Zmc2V0ID0gQ2xhc3MuY3JlYXRlKHsKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICB0aGlzLmxlZnQgPSBsZWZ0LnJvdW5kKCk7CiAgICAgIHRoaXMudG9wICA9IHRvcC5yb3VuZCgpOwoKICAgICAgdGhpc1swXSA9IHRoaXMubGVmdDsKICAgICAgdGhpc1sxXSA9IHRoaXMudG9wOwogICAgfSwKCiAgICByZWxhdGl2ZVRvOiBmdW5jdGlvbihvZmZzZXQpIHsKICAgICAgcmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldCgKICAgICAgICB0aGlzLmxlZnQgLSBvZmZzZXQubGVmdCwKICAgICAgICB0aGlzLnRvcCAgLSBvZmZzZXQudG9wCiAgICAgICk7CiAgICB9LAoKICAgIGluc3BlY3Q6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gIiM8RWxlbWVudC5PZmZzZXQgbGVmdDogI3tsZWZ0fSB0b3A6ICN7dG9wfT4iLmludGVycG9sYXRlKHRoaXMpOwogICAgfSwKCiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAiWyN7bGVmdH0sICN7dG9wfV0iLmludGVycG9sYXRlKHRoaXMpOwogICAgfSwKCiAgICB0b0FycmF5OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIFt0aGlzLmxlZnQsIHRoaXMudG9wXTsKICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gZ2V0TGF5b3V0KGVsZW1lbnQsIHByZUNvbXB1dGUpIHsKICAgIHJldHVybiBuZXcgRWxlbWVudC5MYXlvdXQoZWxlbWVudCwgcHJlQ29tcHV0ZSk7CiAgfQoKICBmdW5jdGlvbiBtZWFzdXJlKGVsZW1lbnQsIHByb3BlcnR5KSB7CiAgICByZXR1cm4gJChlbGVtZW50KS5nZXRMYXlvdXQoKS5nZXQocHJvcGVydHkpOwogIH0KCiAgZnVuY3Rpb24gZ2V0SGVpZ2h0KGVsZW1lbnQpIHsKICAgIHJldHVybiBFbGVtZW50LmdldERpbWVuc2lvbnMoZWxlbWVudCkuaGVpZ2h0OwogIH0KCiAgZnVuY3Rpb24gZ2V0V2lkdGgoZWxlbWVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuZ2V0RGltZW5zaW9ucyhlbGVtZW50KS53aWR0aDsKICB9CgogIGZ1bmN0aW9uIGdldERpbWVuc2lvbnMoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgZGlzcGxheSA9IEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ2Rpc3BsYXknKTsKCiAgICBpZiAoZGlzcGxheSAmJiBkaXNwbGF5ICE9PSAnbm9uZScpIHsKICAgICAgcmV0dXJuIHsgd2lkdGg6IGVsZW1lbnQub2Zmc2V0V2lkdGgsIGhlaWdodDogZWxlbWVudC5vZmZzZXRIZWlnaHQgfTsKICAgIH0KCiAgICB2YXIgc3R5bGUgPSBlbGVtZW50LnN0eWxlOwogICAgdmFyIG9yaWdpbmFsU3R5bGVzID0gewogICAgICB2aXNpYmlsaXR5OiBzdHlsZS52aXNpYmlsaXR5LAogICAgICBwb3NpdGlvbjogICBzdHlsZS5wb3NpdGlvbiwKICAgICAgZGlzcGxheTogICAgc3R5bGUuZGlzcGxheQogICAgfTsKCiAgICB2YXIgbmV3U3R5bGVzID0gewogICAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJywKICAgICAgZGlzcGxheTogICAgJ2Jsb2NrJwogICAgfTsKCiAgICBpZiAob3JpZ2luYWxTdHlsZXMucG9zaXRpb24gIT09ICdmaXhlZCcpCiAgICAgIG5ld1N0eWxlcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CgogICAgRWxlbWVudC5zZXRTdHlsZShlbGVtZW50LCBuZXdTdHlsZXMpOwoKICAgIHZhciBkaW1lbnNpb25zID0gewogICAgICB3aWR0aDogIGVsZW1lbnQub2Zmc2V0V2lkdGgsCiAgICAgIGhlaWdodDogZWxlbWVudC5vZmZzZXRIZWlnaHQKICAgIH07CgogICAgRWxlbWVudC5zZXRTdHlsZShlbGVtZW50LCBvcmlnaW5hbFN0eWxlcyk7CgogICAgcmV0dXJuIGRpbWVuc2lvbnM7CiAgfQoKICBmdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CgogICAgaWYgKGlzRG9jdW1lbnQoZWxlbWVudCkgfHwgaXNEZXRhY2hlZChlbGVtZW50KSB8fCBpc0JvZHkoZWxlbWVudCkgfHwgaXNIdG1sKGVsZW1lbnQpKQogICAgICByZXR1cm4gJChkb2N1bWVudC5ib2R5KTsKCiAgICB2YXIgaXNJbmxpbmUgPSAoRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScpID09PSAnaW5saW5lJyk7CiAgICBpZiAoIWlzSW5saW5lICYmIGVsZW1lbnQub2Zmc2V0UGFyZW50KSByZXR1cm4gJChlbGVtZW50Lm9mZnNldFBhcmVudCk7CgogICAgd2hpbGUgKChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSAmJiBlbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5KSB7CiAgICAgIGlmIChFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpICE9PSAnc3RhdGljJykgewogICAgICAgIHJldHVybiBpc0h0bWwoZWxlbWVudCkgPyAkKGRvY3VtZW50LmJvZHkpIDogJChlbGVtZW50KTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiAkKGRvY3VtZW50LmJvZHkpOwogIH0KCgogIGZ1bmN0aW9uIGN1bXVsYXRpdmVPZmZzZXQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgdmFsdWVUID0gMCwgdmFsdWVMID0gMDsKICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUpIHsKICAgICAgZG8gewogICAgICAgIHZhbHVlVCArPSBlbGVtZW50Lm9mZnNldFRvcCAgfHwgMDsKICAgICAgICB2YWx1ZUwgKz0gZWxlbWVudC5vZmZzZXRMZWZ0IHx8IDA7CiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50OwogICAgICB9IHdoaWxlIChlbGVtZW50KTsKICAgIH0KICAgIHJldHVybiBuZXcgRWxlbWVudC5PZmZzZXQodmFsdWVMLCB2YWx1ZVQpOwogIH0KCiAgZnVuY3Rpb24gcG9zaXRpb25lZE9mZnNldChlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICB2YXIgbGF5b3V0ID0gZWxlbWVudC5nZXRMYXlvdXQoKTsKCiAgICB2YXIgdmFsdWVUID0gMCwgdmFsdWVMID0gMDsKICAgIGRvIHsKICAgICAgdmFsdWVUICs9IGVsZW1lbnQub2Zmc2V0VG9wICB8fCAwOwogICAgICB2YWx1ZUwgKz0gZWxlbWVudC5vZmZzZXRMZWZ0IHx8IDA7CiAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDsKICAgICAgaWYgKGVsZW1lbnQpIHsKICAgICAgICBpZiAoaXNCb2R5KGVsZW1lbnQpKSBicmVhazsKICAgICAgICB2YXIgcCA9IEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ3Bvc2l0aW9uJyk7CiAgICAgICAgaWYgKHAgIT09ICdzdGF0aWMnKSBicmVhazsKICAgICAgfQogICAgfSB3aGlsZSAoZWxlbWVudCk7CgogICAgdmFsdWVMIC09IGxheW91dC5nZXQoJ21hcmdpbi10b3AnKTsKICAgIHZhbHVlVCAtPSBsYXlvdXQuZ2V0KCdtYXJnaW4tbGVmdCcpOwoKICAgIHJldHVybiBuZXcgRWxlbWVudC5PZmZzZXQodmFsdWVMLCB2YWx1ZVQpOwogIH0KCiAgZnVuY3Rpb24gY3VtdWxhdGl2ZVNjcm9sbE9mZnNldChlbGVtZW50KSB7CiAgICB2YXIgdmFsdWVUID0gMCwgdmFsdWVMID0gMDsKICAgIGRvIHsKICAgICAgaWYgKGVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkpIHsKICAgICAgICB2YXIgYm9keVNjcm9sbE5vZGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlIHx8IGRvY3VtZW50LmJvZHk7CiAgICAgICAgdmFsdWVUICs9ICFPYmplY3QuaXNVbmRlZmluZWQod2luZG93LnBhZ2VZT2Zmc2V0KSA/IHdpbmRvdy5wYWdlWU9mZnNldCA6IGJvZHlTY3JvbGxOb2RlLnNjcm9sbFRvcCB8fCAwOwogICAgICAgIHZhbHVlTCArPSAhT2JqZWN0LmlzVW5kZWZpbmVkKHdpbmRvdy5wYWdlWE9mZnNldCkgPyB3aW5kb3cucGFnZVhPZmZzZXQgOiBib2R5U2Nyb2xsTm9kZS5zY3JvbGxMZWZ0IHx8IDA7CiAgICAgICAgYnJlYWs7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWVUICs9IGVsZW1lbnQuc2Nyb2xsVG9wICB8fCAwOwogICAgICAgIHZhbHVlTCArPSBlbGVtZW50LnNjcm9sbExlZnQgfHwgMDsKICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlOwogICAgICB9CiAgICB9IHdoaWxlIChlbGVtZW50KTsKICAgIHJldHVybiBuZXcgRWxlbWVudC5PZmZzZXQodmFsdWVMLCB2YWx1ZVQpOwogIH0KCiAgZnVuY3Rpb24gdmlld3BvcnRPZmZzZXQoZm9yRWxlbWVudCkgewogICAgdmFyIHZhbHVlVCA9IDAsIHZhbHVlTCA9IDAsIGRvY0JvZHkgPSBkb2N1bWVudC5ib2R5OwoKICAgIGZvckVsZW1lbnQgPSAkKGZvckVsZW1lbnQpOwogICAgdmFyIGVsZW1lbnQgPSBmb3JFbGVtZW50OwogICAgZG8gewogICAgICB2YWx1ZVQgKz0gZWxlbWVudC5vZmZzZXRUb3AgIHx8IDA7CiAgICAgIHZhbHVlTCArPSBlbGVtZW50Lm9mZnNldExlZnQgfHwgMDsKICAgICAgaWYgKGVsZW1lbnQub2Zmc2V0UGFyZW50ID09IGRvY0JvZHkgJiYKICAgICAgICBFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpID09ICdhYnNvbHV0ZScpIGJyZWFrOwogICAgfSB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50KTsKCiAgICBlbGVtZW50ID0gZm9yRWxlbWVudDsKICAgIGRvIHsKICAgICAgaWYgKGVsZW1lbnQgIT0gZG9jQm9keSkgewogICAgICAgIHZhbHVlVCAtPSBlbGVtZW50LnNjcm9sbFRvcCAgfHwgMDsKICAgICAgICB2YWx1ZUwgLT0gZWxlbWVudC5zY3JvbGxMZWZ0IHx8IDA7CiAgICAgIH0KICAgIH0gd2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpOwogICAgcmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldCh2YWx1ZUwsIHZhbHVlVCk7CiAgfQoKICBmdW5jdGlvbiBhYnNvbHV0aXplKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwoKICAgIGlmIChFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpID09PSAnYWJzb2x1dGUnKSB7CiAgICAgIHJldHVybiBlbGVtZW50OwogICAgfQoKICAgIHZhciBvZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCk7CiAgICB2YXIgZU9mZnNldCA9IGVsZW1lbnQudmlld3BvcnRPZmZzZXQoKSwKICAgICBwT2Zmc2V0ID0gb2Zmc2V0UGFyZW50LnZpZXdwb3J0T2Zmc2V0KCk7CgogICAgdmFyIG9mZnNldCA9IGVPZmZzZXQucmVsYXRpdmVUbyhwT2Zmc2V0KTsKICAgIHZhciBsYXlvdXQgPSBlbGVtZW50LmdldExheW91dCgpOwoKICAgIGVsZW1lbnQuc3RvcmUoJ3Byb3RvdHlwZV9hYnNvbHV0aXplX29yaWdpbmFsX3N0eWxlcycsIHsKICAgICAgcG9zaXRpb246IGVsZW1lbnQuZ2V0U3R5bGUoJ3Bvc2l0aW9uJyksCiAgICAgIGxlZnQ6ICAgICBlbGVtZW50LmdldFN0eWxlKCdsZWZ0JyksCiAgICAgIHRvcDogICAgICBlbGVtZW50LmdldFN0eWxlKCd0b3AnKSwKICAgICAgd2lkdGg6ICAgIGVsZW1lbnQuZ2V0U3R5bGUoJ3dpZHRoJyksCiAgICAgIGhlaWdodDogICBlbGVtZW50LmdldFN0eWxlKCdoZWlnaHQnKQogICAgfSk7CgogICAgZWxlbWVudC5zZXRTdHlsZSh7CiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICB0b3A6ICAgIG9mZnNldC50b3AgKyAncHgnLAogICAgICBsZWZ0OiAgIG9mZnNldC5sZWZ0ICsgJ3B4JywKICAgICAgd2lkdGg6ICBsYXlvdXQuZ2V0KCd3aWR0aCcpICsgJ3B4JywKICAgICAgaGVpZ2h0OiBsYXlvdXQuZ2V0KCdoZWlnaHQnKSArICdweCcKICAgIH0pOwoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gcmVsYXRpdml6ZShlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGlmIChFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpID09PSAncmVsYXRpdmUnKSB7CiAgICAgIHJldHVybiBlbGVtZW50OwogICAgfQoKICAgIHZhciBvcmlnaW5hbFN0eWxlcyA9CiAgICAgZWxlbWVudC5yZXRyaWV2ZSgncHJvdG90eXBlX2Fic29sdXRpemVfb3JpZ2luYWxfc3R5bGVzJyk7CgogICAgaWYgKG9yaWdpbmFsU3R5bGVzKSBlbGVtZW50LnNldFN0eWxlKG9yaWdpbmFsU3R5bGVzKTsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCgogIGZ1bmN0aW9uIHNjcm9sbFRvKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIHBvcyA9IEVsZW1lbnQuY3VtdWxhdGl2ZU9mZnNldChlbGVtZW50KTsKICAgIHdpbmRvdy5zY3JvbGxUbyhwb3MubGVmdCwgcG9zLnRvcCk7CiAgICByZXR1cm4gZWxlbWVudDsKICB9CgoKICBmdW5jdGlvbiBtYWtlUG9zaXRpb25lZChlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciBwb3NpdGlvbiA9IEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ3Bvc2l0aW9uJyksIHN0eWxlcyA9IHt9OwogICAgaWYgKHBvc2l0aW9uID09PSAnc3RhdGljJyB8fCAhcG9zaXRpb24pIHsKICAgICAgc3R5bGVzLnBvc2l0aW9uID0gJ3JlbGF0aXZlJzsKICAgICAgaWYgKFByb3RvdHlwZS5Ccm93c2VyLk9wZXJhKSB7CiAgICAgICAgc3R5bGVzLnRvcCAgPSAwOwogICAgICAgIHN0eWxlcy5sZWZ0ID0gMDsKICAgICAgfQogICAgICBFbGVtZW50LnNldFN0eWxlKGVsZW1lbnQsIHN0eWxlcyk7CiAgICAgIEVsZW1lbnQuc3RvcmUoZWxlbWVudCwgJ3Byb3RvdHlwZV9tYWRlX3Bvc2l0aW9uZWQnLCB0cnVlKTsKICAgIH0KICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gdW5kb1Bvc2l0aW9uZWQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgc3RvcmFnZSA9IEVsZW1lbnQuZ2V0U3RvcmFnZShlbGVtZW50KSwKICAgICBtYWRlUG9zaXRpb25lZCA9IHN0b3JhZ2UuZ2V0KCdwcm90b3R5cGVfbWFkZV9wb3NpdGlvbmVkJyk7CgogICAgaWYgKG1hZGVQb3NpdGlvbmVkKSB7CiAgICAgIHN0b3JhZ2UudW5zZXQoJ3Byb3RvdHlwZV9tYWRlX3Bvc2l0aW9uZWQnKTsKICAgICAgRWxlbWVudC5zZXRTdHlsZShlbGVtZW50LCB7CiAgICAgICAgcG9zaXRpb246ICcnLAogICAgICAgIHRvcDogICAgICAnJywKICAgICAgICBib3R0b206ICAgJycsCiAgICAgICAgbGVmdDogICAgICcnLAogICAgICAgIHJpZ2h0OiAgICAnJwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gbWFrZUNsaXBwaW5nKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwoKICAgIHZhciBzdG9yYWdlID0gRWxlbWVudC5nZXRTdG9yYWdlKGVsZW1lbnQpLAogICAgIG1hZGVDbGlwcGluZyA9IHN0b3JhZ2UuZ2V0KCdwcm90b3R5cGVfbWFkZV9jbGlwcGluZycpOwoKICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQobWFkZUNsaXBwaW5nKSkgewogICAgICB2YXIgb3ZlcmZsb3cgPSBFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdvdmVyZmxvdycpOwogICAgICBzdG9yYWdlLnNldCgncHJvdG90eXBlX21hZGVfY2xpcHBpbmcnLCBvdmVyZmxvdyk7CiAgICAgIGlmIChvdmVyZmxvdyAhPT0gJ2hpZGRlbicpCiAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwogICAgfQoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gdW5kb0NsaXBwaW5nKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIHN0b3JhZ2UgPSBFbGVtZW50LmdldFN0b3JhZ2UoZWxlbWVudCksCiAgICAgb3ZlcmZsb3cgPSBzdG9yYWdlLmdldCgncHJvdG90eXBlX21hZGVfY2xpcHBpbmcnKTsKCiAgICBpZiAoIU9iamVjdC5pc1VuZGVmaW5lZChvdmVyZmxvdykpIHsKICAgICAgc3RvcmFnZS51bnNldCgncHJvdG90eXBlX21hZGVfY2xpcHBpbmcnKTsKICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IG92ZXJmbG93IHx8ICcnOwogICAgfQoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gY2xvbmVQb3NpdGlvbihlbGVtZW50LCBzb3VyY2UsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBPYmplY3QuZXh0ZW5kKHsKICAgICAgc2V0TGVmdDogICAgdHJ1ZSwKICAgICAgc2V0VG9wOiAgICAgdHJ1ZSwKICAgICAgc2V0V2lkdGg6ICAgdHJ1ZSwKICAgICAgc2V0SGVpZ2h0OiAgdHJ1ZSwKICAgICAgb2Zmc2V0VG9wOiAgMCwKICAgICAgb2Zmc2V0TGVmdDogMAogICAgfSwgb3B0aW9ucyB8fCB7fSk7CgogICAgc291cmNlICA9ICQoc291cmNlKTsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIHAsIGRlbHRhLCBsYXlvdXQsIHN0eWxlcyA9IHt9OwoKICAgIGlmIChvcHRpb25zLnNldExlZnQgfHwgb3B0aW9ucy5zZXRUb3ApIHsKICAgICAgcCA9IEVsZW1lbnQudmlld3BvcnRPZmZzZXQoc291cmNlKTsKICAgICAgZGVsdGEgPSBbMCwgMF07CiAgICAgIGlmIChFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpID09PSAnYWJzb2x1dGUnKSB7CiAgICAgICAgdmFyIHBhcmVudCA9IEVsZW1lbnQuZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpOwogICAgICAgIGlmIChwYXJlbnQgIT09IGRvY3VtZW50LmJvZHkpIGRlbHRhID0gRWxlbWVudC52aWV3cG9ydE9mZnNldChwYXJlbnQpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9wdGlvbnMuc2V0V2lkdGggfHwgb3B0aW9ucy5zZXRIZWlnaHQpIHsKICAgICAgbGF5b3V0ID0gRWxlbWVudC5nZXRMYXlvdXQoc291cmNlKTsKICAgIH0KCiAgICBpZiAob3B0aW9ucy5zZXRMZWZ0KQogICAgICBzdHlsZXMubGVmdCA9IChwWzBdIC0gZGVsdGFbMF0gKyBvcHRpb25zLm9mZnNldExlZnQpICsgJ3B4JzsKICAgIGlmIChvcHRpb25zLnNldFRvcCkKICAgICAgc3R5bGVzLnRvcCAgPSAocFsxXSAtIGRlbHRhWzFdICsgb3B0aW9ucy5vZmZzZXRUb3ApICArICdweCc7CgogICAgaWYgKG9wdGlvbnMuc2V0V2lkdGgpCiAgICAgIHN0eWxlcy53aWR0aCAgPSBsYXlvdXQuZ2V0KCdib3JkZXItYm94LXdpZHRoJykgICsgJ3B4JzsKICAgIGlmIChvcHRpb25zLnNldEhlaWdodCkKICAgICAgc3R5bGVzLmhlaWdodCA9IGxheW91dC5nZXQoJ2JvcmRlci1ib3gtaGVpZ2h0JykgKyAncHgnOwoKICAgIHJldHVybiBFbGVtZW50LnNldFN0eWxlKGVsZW1lbnQsIHN0eWxlcyk7CiAgfQoKCiAgaWYgKFByb3RvdHlwZS5Ccm93c2VyLklFKSB7CiAgICBnZXRPZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQud3JhcCgKICAgICAgZnVuY3Rpb24ocHJvY2VlZCwgZWxlbWVudCkgewogICAgICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwoKICAgICAgICBpZiAoaXNEb2N1bWVudChlbGVtZW50KSB8fCBpc0RldGFjaGVkKGVsZW1lbnQpIHx8IGlzQm9keShlbGVtZW50KSB8fCBpc0h0bWwoZWxlbWVudCkpCiAgICAgICAgICByZXR1cm4gJChkb2N1bWVudC5ib2R5KTsKCiAgICAgICAgdmFyIHBvc2l0aW9uID0gZWxlbWVudC5nZXRTdHlsZSgncG9zaXRpb24nKTsKICAgICAgICBpZiAocG9zaXRpb24gIT09ICdzdGF0aWMnKSByZXR1cm4gcHJvY2VlZChlbGVtZW50KTsKCiAgICAgICAgZWxlbWVudC5zZXRTdHlsZSh7IHBvc2l0aW9uOiAncmVsYXRpdmUnIH0pOwogICAgICAgIHZhciB2YWx1ZSA9IHByb2NlZWQoZWxlbWVudCk7CiAgICAgICAgZWxlbWVudC5zZXRTdHlsZSh7IHBvc2l0aW9uOiBwb3NpdGlvbiB9KTsKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH0KICAgICk7CgogICAgcG9zaXRpb25lZE9mZnNldCA9IHBvc2l0aW9uZWRPZmZzZXQud3JhcChmdW5jdGlvbihwcm9jZWVkLCBlbGVtZW50KSB7CiAgICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgICBpZiAoIWVsZW1lbnQucGFyZW50Tm9kZSkgcmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldCgwLCAwKTsKICAgICAgdmFyIHBvc2l0aW9uID0gZWxlbWVudC5nZXRTdHlsZSgncG9zaXRpb24nKTsKICAgICAgaWYgKHBvc2l0aW9uICE9PSAnc3RhdGljJykgcmV0dXJuIHByb2NlZWQoZWxlbWVudCk7CgogICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZWxlbWVudC5nZXRPZmZzZXRQYXJlbnQoKTsKICAgICAgaWYgKG9mZnNldFBhcmVudCAmJiBvZmZzZXRQYXJlbnQuZ2V0U3R5bGUoJ3Bvc2l0aW9uJykgPT09ICdmaXhlZCcpCiAgICAgICAgaGFzTGF5b3V0KG9mZnNldFBhcmVudCk7CgogICAgICBlbGVtZW50LnNldFN0eWxlKHsgcG9zaXRpb246ICdyZWxhdGl2ZScgfSk7CiAgICAgIHZhciB2YWx1ZSA9IHByb2NlZWQoZWxlbWVudCk7CiAgICAgIGVsZW1lbnQuc2V0U3R5bGUoeyBwb3NpdGlvbjogcG9zaXRpb24gfSk7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0pOwogIH0gZWxzZSBpZiAoUHJvdG90eXBlLkJyb3dzZXIuV2Via2l0KSB7CiAgICBjdW11bGF0aXZlT2Zmc2V0ID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgICAgdmFyIHZhbHVlVCA9IDAsIHZhbHVlTCA9IDA7CiAgICAgIGRvIHsKICAgICAgICB2YWx1ZVQgKz0gZWxlbWVudC5vZmZzZXRUb3AgIHx8IDA7CiAgICAgICAgdmFsdWVMICs9IGVsZW1lbnQub2Zmc2V0TGVmdCB8fCAwOwogICAgICAgIGlmIChlbGVtZW50Lm9mZnNldFBhcmVudCA9PSBkb2N1bWVudC5ib2R5KSB7CiAgICAgICAgICBpZiAoRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSA9PSAnYWJzb2x1dGUnKSBicmVhazsKICAgICAgICB9CgogICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDsKICAgICAgfSB3aGlsZSAoZWxlbWVudCk7CgogICAgICByZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KHZhbHVlTCwgdmFsdWVUKTsKICAgIH07CiAgfQoKCiAgRWxlbWVudC5hZGRNZXRob2RzKHsKICAgIGdldExheW91dDogICAgICAgICAgICAgIGdldExheW91dCwKICAgIG1lYXN1cmU6ICAgICAgICAgICAgICAgIG1lYXN1cmUsCiAgICBnZXRXaWR0aDogICAgICAgICAgICAgICBnZXRXaWR0aCwKICAgIGdldEhlaWdodDogICAgICAgICAgICAgIGdldEhlaWdodCwKICAgIGdldERpbWVuc2lvbnM6ICAgICAgICAgIGdldERpbWVuc2lvbnMsCiAgICBnZXRPZmZzZXRQYXJlbnQ6ICAgICAgICBnZXRPZmZzZXRQYXJlbnQsCiAgICBjdW11bGF0aXZlT2Zmc2V0OiAgICAgICBjdW11bGF0aXZlT2Zmc2V0LAogICAgcG9zaXRpb25lZE9mZnNldDogICAgICAgcG9zaXRpb25lZE9mZnNldCwKICAgIGN1bXVsYXRpdmVTY3JvbGxPZmZzZXQ6IGN1bXVsYXRpdmVTY3JvbGxPZmZzZXQsCiAgICB2aWV3cG9ydE9mZnNldDogICAgICAgICB2aWV3cG9ydE9mZnNldCwKICAgIGFic29sdXRpemU6ICAgICAgICAgICAgIGFic29sdXRpemUsCiAgICByZWxhdGl2aXplOiAgICAgICAgICAgICByZWxhdGl2aXplLAogICAgc2Nyb2xsVG86ICAgICAgICAgICAgICAgc2Nyb2xsVG8sCiAgICBtYWtlUG9zaXRpb25lZDogICAgICAgICBtYWtlUG9zaXRpb25lZCwKICAgIHVuZG9Qb3NpdGlvbmVkOiAgICAgICAgIHVuZG9Qb3NpdGlvbmVkLAogICAgbWFrZUNsaXBwaW5nOiAgICAgICAgICAgbWFrZUNsaXBwaW5nLAogICAgdW5kb0NsaXBwaW5nOiAgICAgICAgICAgdW5kb0NsaXBwaW5nLAogICAgY2xvbmVQb3NpdGlvbjogICAgICAgICAgY2xvbmVQb3NpdGlvbgogIH0pOwoKICBmdW5jdGlvbiBpc0JvZHkoZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ0JPRFknOwogIH0KCiAgZnVuY3Rpb24gaXNIdG1sKGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdIVE1MJzsKICB9CgogIGZ1bmN0aW9uIGlzRG9jdW1lbnQoZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQubm9kZVR5cGUgPT09IE5vZGUuRE9DVU1FTlRfTk9ERTsKICB9CgogIGZ1bmN0aW9uIGlzRGV0YWNoZWQoZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHkgJiYKICAgICAhRWxlbWVudC5kZXNjZW5kYW50T2YoZWxlbWVudCwgZG9jdW1lbnQuYm9keSk7CiAgfQoKICBpZiAoJ2dldEJvdW5kaW5nQ2xpZW50UmVjdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICBFbGVtZW50LmFkZE1ldGhvZHMoewogICAgICB2aWV3cG9ydE9mZnNldDogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgICAgIGlmIChpc0RldGFjaGVkKGVsZW1lbnQpKSByZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KDAsIDApOwoKICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAgIHJldHVybiBuZXcgRWxlbWVudC5PZmZzZXQocmVjdC5sZWZ0IC0gZG9jRWwuY2xpZW50TGVmdCwKICAgICAgICAgcmVjdC50b3AgLSBkb2NFbC5jbGllbnRUb3ApOwogICAgICB9CiAgICB9KTsKICB9CgoKfSkoKTsKCihmdW5jdGlvbigpIHsKCiAgdmFyIElTX09MRF9PUEVSQSA9IFByb3RvdHlwZS5Ccm93c2VyLk9wZXJhICYmCiAgICh3aW5kb3cucGFyc2VGbG9hdCh3aW5kb3cub3BlcmEudmVyc2lvbigpKSA8IDkuNSk7CiAgdmFyIFJPT1QgPSBudWxsOwogIGZ1bmN0aW9uIGdldFJvb3RFbGVtZW50KCkgewogICAgaWYgKFJPT1QpIHJldHVybiBST09UOwogICAgUk9PVCA9IElTX09MRF9PUEVSQSA/IGRvY3VtZW50LmJvZHkgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICByZXR1cm4gUk9PVDsKICB9CgogIGZ1bmN0aW9uIGdldERpbWVuc2lvbnMoKSB7CiAgICByZXR1cm4geyB3aWR0aDogdGhpcy5nZXRXaWR0aCgpLCBoZWlnaHQ6IHRoaXMuZ2V0SGVpZ2h0KCkgfTsKICB9CgogIGZ1bmN0aW9uIGdldFdpZHRoKCkgewogICAgcmV0dXJuIGdldFJvb3RFbGVtZW50KCkuY2xpZW50V2lkdGg7CiAgfQoKICBmdW5jdGlvbiBnZXRIZWlnaHQoKSB7CiAgICByZXR1cm4gZ2V0Um9vdEVsZW1lbnQoKS5jbGllbnRIZWlnaHQ7CiAgfQoKICBmdW5jdGlvbiBnZXRTY3JvbGxPZmZzZXRzKCkgewogICAgdmFyIHggPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwKICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CiAgICB2YXIgeSA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8CiAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgogICAgcmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldCh4LCB5KTsKICB9CgogIGRvY3VtZW50LnZpZXdwb3J0ID0gewogICAgZ2V0RGltZW5zaW9uczogICAgZ2V0RGltZW5zaW9ucywKICAgIGdldFdpZHRoOiAgICAgICAgIGdldFdpZHRoLAogICAgZ2V0SGVpZ2h0OiAgICAgICAgZ2V0SGVpZ2h0LAogICAgZ2V0U2Nyb2xsT2Zmc2V0czogZ2V0U2Nyb2xsT2Zmc2V0cwogIH07Cgp9KSgpOwp3aW5kb3cuJCQgPSBmdW5jdGlvbigpIHsKICB2YXIgZXhwcmVzc2lvbiA9ICRBKGFyZ3VtZW50cykuam9pbignLCAnKTsKICByZXR1cm4gUHJvdG90eXBlLlNlbGVjdG9yLnNlbGVjdChleHByZXNzaW9uLCBkb2N1bWVudCk7Cn07CgpQcm90b3R5cGUuU2VsZWN0b3IgPSAoZnVuY3Rpb24oKSB7CgogIGZ1bmN0aW9uIHNlbGVjdCgpIHsKICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kICJQcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0IiBtdXN0IGJlIGRlZmluZWQuJyk7CiAgfQoKICBmdW5jdGlvbiBtYXRjaCgpIHsKICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kICJQcm90b3R5cGUuU2VsZWN0b3IubWF0Y2giIG11c3QgYmUgZGVmaW5lZC4nKTsKICB9CgogIGZ1bmN0aW9uIGZpbmQoZWxlbWVudHMsIGV4cHJlc3Npb24sIGluZGV4KSB7CiAgICBpbmRleCA9IGluZGV4IHx8IDA7CiAgICB2YXIgbWF0Y2ggPSBQcm90b3R5cGUuU2VsZWN0b3IubWF0Y2gsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aCwgbWF0Y2hJbmRleCA9IDAsIGk7CgogICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChtYXRjaChlbGVtZW50c1tpXSwgZXhwcmVzc2lvbikgJiYgaW5kZXggPT0gbWF0Y2hJbmRleCsrKSB7CiAgICAgICAgcmV0dXJuIEVsZW1lbnQuZXh0ZW5kKGVsZW1lbnRzW2ldKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gZXh0ZW5kRWxlbWVudHMoZWxlbWVudHMpIHsKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBFbGVtZW50LmV4dGVuZChlbGVtZW50c1tpXSk7CiAgICB9CiAgICByZXR1cm4gZWxlbWVudHM7CiAgfQoKCiAgdmFyIEsgPSBQcm90b3R5cGUuSzsKCiAgcmV0dXJuIHsKICAgIHNlbGVjdDogc2VsZWN0LAogICAgbWF0Y2g6IG1hdGNoLAogICAgZmluZDogZmluZCwKICAgIGV4dGVuZEVsZW1lbnRzOiAoRWxlbWVudC5leHRlbmQgPT09IEspID8gSyA6IGV4dGVuZEVsZW1lbnRzLAogICAgZXh0ZW5kRWxlbWVudDogRWxlbWVudC5leHRlbmQKICB9Owp9KSgpOwpQcm90b3R5cGUuX29yaWdpbmFsX3Byb3BlcnR5ID0gd2luZG93LlNpenpsZTsKLyohCiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHZAVkVSU0lPTgogKiBodHRwOi8vc2l6emxlanMuY29tLwogKgogKiBDb3B5cmlnaHQgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIERhdGU6IEBEQVRFCiAqLwooZnVuY3Rpb24oIHdpbmRvdyApIHsKCnZhciBpLAoJc3VwcG9ydCwKCUV4cHIsCglnZXRUZXh0LAoJaXNYTUwsCgljb21waWxlLAoJc2VsZWN0LAoJb3V0ZXJtb3N0Q29udGV4dCwKCXNvcnRJbnB1dCwKCWhhc0R1cGxpY2F0ZSwKCglzZXREb2N1bWVudCwKCWRvY3VtZW50LAoJZG9jRWxlbSwKCWRvY3VtZW50SXNIVE1MLAoJcmJ1Z2d5UVNBLAoJcmJ1Z2d5TWF0Y2hlcywKCW1hdGNoZXMsCgljb250YWlucywKCglleHBhbmRvID0gInNpenpsZSIgKyAtKG5ldyBEYXRlKCkpLAoJcHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LAoJZGlycnVucyA9IDAsCglkb25lID0gMCwKCWNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLAoJdG9rZW5DYWNoZSA9IGNyZWF0ZUNhY2hlKCksCgljb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSwKCXNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkgewoJCWlmICggYSA9PT0gYiApIHsKCQkJaGFzRHVwbGljYXRlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuIDA7Cgl9LAoKCXN0cnVuZGVmaW5lZCA9IHR5cGVvZiB1bmRlZmluZWQsCglNQVhfTkVHQVRJVkUgPSAxIDw8IDMxLAoKCWhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksCglhcnIgPSBbXSwKCXBvcCA9IGFyci5wb3AsCglwdXNoX25hdGl2ZSA9IGFyci5wdXNoLAoJcHVzaCA9IGFyci5wdXNoLAoJc2xpY2UgPSBhcnIuc2xpY2UsCglpbmRleE9mID0gYXJyLmluZGV4T2YgfHwgZnVuY3Rpb24oIGVsZW0gKSB7CgkJdmFyIGkgPSAwLAoJCQlsZW4gPSB0aGlzLmxlbmd0aDsKCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQkJaWYgKCB0aGlzW2ldID09PSBlbGVtICkgewoJCQkJcmV0dXJuIGk7CgkJCX0KCQl9CgkJcmV0dXJuIC0xOwoJfSwKCglib29sZWFucyA9ICJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsCgoKCXdoaXRlc3BhY2UgPSAiW1xceDIwXFx0XFxyXFxuXFxmXSIsCgljaGFyYWN0ZXJFbmNvZGluZyA9ICIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsCgoJaWRlbnRpZmllciA9IGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoICJ3IiwgIncjIiApLAoKCWF0dHJpYnV0ZXMgPSAiXFxbIiArIHdoaXRlc3BhY2UgKyAiKigiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyAiKSIgKyB3aGl0ZXNwYWNlICsKCQkiKig/OihbKl4kfCF+XT89KSIgKyB3aGl0ZXNwYWNlICsgIiooPzooWydcIl0pKCg/OlxcXFwufFteXFxcXF0pKj8pXFwzfCgiICsgaWRlbnRpZmllciArICIpfCl8KSIgKyB3aGl0ZXNwYWNlICsgIipcXF0iLAoKCXBzZXVkb3MgPSAiOigiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyAiKSg/OlxcKCgoWydcIl0pKCg/OlxcXFwufFteXFxcXF0pKj8pXFwzfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIgKyBhdHRyaWJ1dGVzLnJlcGxhY2UoIDMsIDggKSArICIpKil8LiopXFwpfCkiLAoKCXJ0cmltID0gbmV3IFJlZ0V4cCggIl4iICsgd2hpdGVzcGFjZSArICIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiICsgd2hpdGVzcGFjZSArICIrJCIsICJnIiApLAoKCXJjb21tYSA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKiwiICsgd2hpdGVzcGFjZSArICIqIiApLAoJcmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggIl4iICsgd2hpdGVzcGFjZSArICIqKFs+K35dfCIgKyB3aGl0ZXNwYWNlICsgIikiICsgd2hpdGVzcGFjZSArICIqIiApLAoKCXJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCAiPSIgKyB3aGl0ZXNwYWNlICsgIiooW15cXF0nXCJdKj8pIiArIHdoaXRlc3BhY2UgKyAiKlxcXSIsICJnIiApLAoKCXJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksCglyaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoICJeIiArIGlkZW50aWZpZXIgKyAiJCIgKSwKCgltYXRjaEV4cHIgPSB7CgkJIklEIjogbmV3IFJlZ0V4cCggIl4jKCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArICIpIiApLAoJCSJDTEFTUyI6IG5ldyBSZWdFeHAoICJeXFwuKCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArICIpIiApLAoJCSJUQUciOiBuZXcgUmVnRXhwKCAiXigiICsgY2hhcmFjdGVyRW5jb2RpbmcucmVwbGFjZSggInciLCAidyoiICkgKyAiKSIgKSwKCQkiQVRUUiI6IG5ldyBSZWdFeHAoICJeIiArIGF0dHJpYnV0ZXMgKSwKCQkiUFNFVURPIjogbmV3IFJlZ0V4cCggIl4iICsgcHNldWRvcyApLAoJCSJDSElMRCI6IG5ldyBSZWdFeHAoICJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiICsgd2hpdGVzcGFjZSArCgkJCSIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIiArIHdoaXRlc3BhY2UgKyAiKig/OihbKy1dfCkiICsgd2hpdGVzcGFjZSArCgkJCSIqKFxcZCspfCkpIiArIHdoaXRlc3BhY2UgKyAiKlxcKXwpIiwgImkiICksCgkJImJvb2wiOiBuZXcgUmVnRXhwKCAiXig/OiIgKyBib29sZWFucyArICIpJCIsICJpIiApLAoJCSJuZWVkc0NvbnRleHQiOiBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIgKwoJCQl3aGl0ZXNwYWNlICsgIiooKD86LVxcZCk/XFxkKikiICsgd2hpdGVzcGFjZSArICIqXFwpfCkoPz1bXi1dfCQpIiwgImkiICkKCX0sCgoJcmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksCglyaGVhZGVyID0gL15oXGQkL2ksCgoJcm5hdGl2ZSA9IC9eW157XStce1xzKlxbbmF0aXZlIFx3LywKCglycXVpY2tFeHByID0gL14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLywKCglyc2libGluZyA9IC9bK35dLywKCXJlc2NhcGUgPSAvJ3xcXC9nLAoKCXJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoICJcXFxcKFtcXGRhLWZdezEsNn0iICsgd2hpdGVzcGFjZSArICI/fCgiICsgd2hpdGVzcGFjZSArICIpfC4pIiwgImlnIiApLAoJZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkgewoJCXZhciBoaWdoID0gIjB4IiArIGVzY2FwZWQgLSAweDEwMDAwOwoJCXJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID8KCQkJZXNjYXBlZCA6CgkJCWhpZ2ggPCAwID8KCQkJCVN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOgoJCQkJU3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7Cgl9OwoKdHJ5IHsKCXB1c2guYXBwbHkoCgkJKGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLAoJCXByZWZlcnJlZERvYy5jaGlsZE5vZGVzCgkpOwoJYXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTsKfSBjYXRjaCAoIGUgKSB7CglwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/CgoJCWZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHsKCQkJcHVzaF9uYXRpdmUuYXBwbHkoIHRhcmdldCwgc2xpY2UuY2FsbChlbHMpICk7CgkJfSA6CgoJCWZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHsKCQkJdmFyIGogPSB0YXJnZXQubGVuZ3RoLAoJCQkJaSA9IDA7CgkJCXdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge30KCQkJdGFyZ2V0Lmxlbmd0aCA9IGogLSAxOwoJCX0KCX07Cn0KCmZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7Cgl2YXIgbWF0Y2gsIGVsZW0sIG0sIG5vZGVUeXBlLAoJCWksIGdyb3Vwcywgb2xkLCBuaWQsIG5ld0NvbnRleHQsIG5ld1NlbGVjdG9yOwoKCWlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7CgkJc2V0RG9jdW1lbnQoIGNvbnRleHQgKTsKCX0KCgljb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDsKCXJlc3VsdHMgPSByZXN1bHRzIHx8IFtdOwoKCWlmICggIXNlbGVjdG9yIHx8IHR5cGVvZiBzZWxlY3RvciAhPT0gInN0cmluZyIgKSB7CgkJcmV0dXJuIHJlc3VsdHM7Cgl9CgoJaWYgKCAobm9kZVR5cGUgPSBjb250ZXh0Lm5vZGVUeXBlKSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSApIHsKCQlyZXR1cm4gW107Cgl9CgoJaWYgKCBkb2N1bWVudElzSFRNTCAmJiAhc2VlZCApIHsKCgkJaWYgKCAobWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICkpICkgewoJCQlpZiAoIChtID0gbWF0Y2hbMV0pICkgewoJCQkJaWYgKCBub2RlVHlwZSA9PT0gOSApIHsKCQkJCQllbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApOwoJCQkJCWlmICggZWxlbSAmJiBlbGVtLnBhcmVudE5vZGUgKSB7CgkJCQkJCWlmICggZWxlbS5pZCA9PT0gbSApIHsKCQkJCQkJCXJlc3VsdHMucHVzaCggZWxlbSApOwoJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCWlmICggY29udGV4dC5vd25lckRvY3VtZW50ICYmIChlbGVtID0gY29udGV4dC5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBtICkpICYmCgkJCQkJCWNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYgZWxlbS5pZCA9PT0gbSApIHsKCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCX0KCQkJCX0KCgkJCX0gZWxzZSBpZiAoIG1hdGNoWzJdICkgewoJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApOwoJCQkJcmV0dXJuIHJlc3VsdHM7CgoJCQl9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkgewoJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBtICkgKTsKCQkJCXJldHVybiByZXN1bHRzOwoJCQl9CgkJfQoKCQlpZiAoIHN1cHBvcnQucXNhICYmICghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7CgkJCW5pZCA9IG9sZCA9IGV4cGFuZG87CgkJCW5ld0NvbnRleHQgPSBjb250ZXh0OwoJCQluZXdTZWxlY3RvciA9IG5vZGVUeXBlID09PSA5ICYmIHNlbGVjdG9yOwoKCQkJaWYgKCBub2RlVHlwZSA9PT0gMSAmJiBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICJvYmplY3QiICkgewoJCQkJZ3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7CgoJCQkJaWYgKCAob2xkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoImlkIikpICkgewoJCQkJCW5pZCA9IG9sZC5yZXBsYWNlKCByZXNjYXBlLCAiXFwkJiIgKTsKCQkJCX0gZWxzZSB7CgkJCQkJY29udGV4dC5zZXRBdHRyaWJ1dGUoICJpZCIsIG5pZCApOwoJCQkJfQoJCQkJbmlkID0gIltpZD0nIiArIG5pZCArICInXSAiOwoKCQkJCWkgPSBncm91cHMubGVuZ3RoOwoJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJZ3JvdXBzW2ldID0gbmlkICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7CgkJCQl9CgkJCQluZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dDsKCQkJCW5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oIiwiKTsKCQkJfQoKCQkJaWYgKCBuZXdTZWxlY3RvciApIHsKCQkJCXRyeSB7CgkJCQkJcHVzaC5hcHBseSggcmVzdWx0cywKCQkJCQkJbmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApCgkJCQkJKTsKCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCX0gY2F0Y2gocXNhRXJyb3IpIHsKCQkJCX0gZmluYWxseSB7CgkJCQkJaWYgKCAhb2xkICkgewoJCQkJCQljb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIHNlbGVjdCggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sICIkMSIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApOwp9CgovKioKICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplCiAqIEByZXR1cm5zIHtGdW5jdGlvbihzdHJpbmcsIE9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGgKICoJcHJvcGVydHkgbmFtZSB0aGUgKHNwYWNlLXN1ZmZpeGVkKSBzdHJpbmcgYW5kIChpZiB0aGUgY2FjaGUgaXMgbGFyZ2VyIHRoYW4gRXhwci5jYWNoZUxlbmd0aCkKICoJZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeQogKi8KZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7Cgl2YXIga2V5cyA9IFtdOwoKCWZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkgewoJCWlmICgga2V5cy5wdXNoKCBrZXkgKyAiICIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7CgkJCWRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07CgkJfQoJCXJldHVybiAoY2FjaGVbIGtleSArICIgIiBdID0gdmFsdWUpOwoJfQoJcmV0dXJuIGNhY2hlOwp9CgovKioKICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGUKICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmsKICovCmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7CglmblsgZXhwYW5kbyBdID0gdHJ1ZTsKCXJldHVybiBmbjsKfQoKLyoqCiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50CiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdAogKi8KZnVuY3Rpb24gYXNzZXJ0KCBmbiApIHsKCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCgl0cnkgewoJCXJldHVybiAhIWZuKCBkaXYgKTsKCX0gY2F0Y2ggKGUpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9IGZpbmFsbHkgewoJCWlmICggZGl2LnBhcmVudE5vZGUgKSB7CgkJCWRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBkaXYgKTsKCQl9CgkJZGl2ID0gbnVsbDsKCX0KfQoKLyoqCiAqIEFkZHMgdGhlIHNhbWUgaGFuZGxlciBmb3IgYWxsIG9mIHRoZSBzcGVjaWZpZWQgYXR0cnMKICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlcwogKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWQKICovCmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7Cgl2YXIgYXJyID0gYXR0cnMuc3BsaXQoInwiKSwKCQlpID0gYXR0cnMubGVuZ3RoOwoKCXdoaWxlICggaS0tICkgewoJCUV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyOwoJfQp9CgovKioKICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5ncwogKiBAcGFyYW0ge0VsZW1lbnR9IGEKICogQHBhcmFtIHtFbGVtZW50fSBiCiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYgogKi8KZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkgewoJdmFyIGN1ciA9IGIgJiYgYSwKCQlkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJgoJCQkoIH5iLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApIC0KCQkJKCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTsKCglpZiAoIGRpZmYgKSB7CgkJcmV0dXJuIGRpZmY7Cgl9CgoJaWYgKCBjdXIgKSB7CgkJd2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHsKCQkJaWYgKCBjdXIgPT09IGIgKSB7CgkJCQlyZXR1cm4gLTE7CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIGEgPyAxIDogLTE7Cn0KCi8qKgogKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGlucHV0IHR5cGVzCiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAqLwpmdW5jdGlvbiBjcmVhdGVJbnB1dFBzZXVkbyggdHlwZSApIHsKCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQl2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQlyZXR1cm4gbmFtZSA9PT0gImlucHV0IiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7Cgl9Owp9CgovKioKICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zCiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAqLwpmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7CglyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJcmV0dXJuIChuYW1lID09PSAiaW5wdXQiIHx8IG5hbWUgPT09ICJidXR0b24iKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7Cgl9Owp9CgovKioKICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBwb3NpdGlvbmFscwogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKi8KZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZm4gKSB7CglyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHsKCQlhcmd1bWVudCA9ICthcmd1bWVudDsKCQlyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkgewoJCQl2YXIgaiwKCQkJCW1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksCgkJCQlpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDsKCgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHsKCQkJCQlzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7CgkJCQl9CgkJCX0KCQl9KTsKCX0pOwp9CgovKioKICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dAogKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dAogKiBAcmV0dXJucyB7RWxlbWVudHxPYmplY3R8Qm9vbGVhbn0gVGhlIGlucHV0IG5vZGUgaWYgYWNjZXB0YWJsZSwgb3RoZXJ3aXNlIGEgZmFsc3kgdmFsdWUKICovCmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkgewoJcmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IHN0cnVuZGVmaW5lZCAmJiBjb250ZXh0Owp9CgpzdXBwb3J0ID0gU2l6emxlLnN1cHBvcnQgPSB7fTsKCi8qKgogKiBEZXRlY3RzIFhNTCBub2RlcwogKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudAogKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlCiAqLwppc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJdmFyIGRvY3VtZW50RWxlbWVudCA9IGVsZW0gJiYgKGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtKS5kb2N1bWVudEVsZW1lbnQ7CglyZXR1cm4gZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSAiSFRNTCIgOiBmYWxzZTsKfTsKCi8qKgogKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnQKICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gW2RvY10gQW4gZWxlbWVudCBvciBkb2N1bWVudCBvYmplY3QgdG8gdXNlIHRvIHNldCB0aGUgZG9jdW1lbnQKICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudAogKi8Kc2V0RG9jdW1lbnQgPSBTaXp6bGUuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbiggbm9kZSApIHsKCXZhciBoYXNDb21wYXJlLAoJCWRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYywKCQlwYXJlbnQgPSBkb2MuZGVmYXVsdFZpZXc7CgoJaWYgKCBkb2MgPT09IGRvY3VtZW50IHx8IGRvYy5ub2RlVHlwZSAhPT0gOSB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCApIHsKCQlyZXR1cm4gZG9jdW1lbnQ7Cgl9CgoJZG9jdW1lbnQgPSBkb2M7Cglkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDsKCglkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jICk7CgoJaWYgKCBwYXJlbnQgJiYgcGFyZW50ICE9PSBwYXJlbnQudG9wICkgewoJCWlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCXBhcmVudC5hZGRFdmVudExpc3RlbmVyKCAidW5sb2FkIiwgZnVuY3Rpb24oKSB7CgkJCQlzZXREb2N1bWVudCgpOwoJCQl9LCBmYWxzZSApOwoJCX0gZWxzZSBpZiAoIHBhcmVudC5hdHRhY2hFdmVudCApIHsKCQkJcGFyZW50LmF0dGFjaEV2ZW50KCAib251bmxvYWQiLCBmdW5jdGlvbigpIHsKCQkJCXNldERvY3VtZW50KCk7CgkJCX0pOwoJCX0KCX0KCgkvKiBBdHRyaWJ1dGVzCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgoJc3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJZGl2LmNsYXNzTmFtZSA9ICJpIjsKCQlyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpOwoJfSk7CgoJLyogZ2V0RWxlbWVudChzKUJ5KgoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCXN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQlkaXYuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVDb21tZW50KCIiKSApOwoJCXJldHVybiAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoOwoJfSk7CgoJc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gcm5hdGl2ZS50ZXN0KCBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApICYmIGFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCWRpdi5pbm5lckhUTUwgPSAiPGRpdiBjbGFzcz0nYSc+PC9kaXY+PGRpdiBjbGFzcz0nYSBpJz48L2Rpdj4iOwoKCQlkaXYuZmlyc3RDaGlsZC5jbGFzc05hbWUgPSAiaSI7CgkJcmV0dXJuIGRpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RoID09PSAyOwoJfSk7CgoJc3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaWQgPSBleHBhbmRvOwoJCXJldHVybiAhZG9jLmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2MuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7Cgl9KTsKCglpZiAoIHN1cHBvcnQuZ2V0QnlJZCApIHsKCQlFeHByLmZpbmRbIklEIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7CgkJCWlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IHN0cnVuZGVmaW5lZCAmJiBkb2N1bWVudElzSFRNTCApIHsKCQkJCXZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTsKCQkJCXJldHVybiBtICYmIG0ucGFyZW50Tm9kZSA/IFttXSA6IFtdOwoJCQl9CgkJfTsKCQlFeHByLmZpbHRlclsiSUQiXSA9IGZ1bmN0aW9uKCBpZCApIHsKCQkJdmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSgiaWQiKSA9PT0gYXR0cklkOwoJCQl9OwoJCX07Cgl9IGVsc2UgewoJCWRlbGV0ZSBFeHByLmZpbmRbIklEIl07CgoJCUV4cHIuZmlsdGVyWyJJRCJdID0gIGZ1bmN0aW9uKCBpZCApIHsKCQkJdmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gc3RydW5kZWZpbmVkICYmIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTsKCQkJCXJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDsKCQkJfTsKCQl9OwoJfQoKCUV4cHIuZmluZFsiVEFHIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID8KCQlmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkgewoJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBzdHJ1bmRlZmluZWQgKSB7CgkJCQlyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgkJCX0KCQl9IDoKCQlmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkgewoJCQl2YXIgZWxlbSwKCQkJCXRtcCA9IFtdLAoJCQkJaSA9IDAsCgkJCQlyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgoJCQlpZiAoIHRhZyA9PT0gIioiICkgewoJCQkJd2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQkJCQl0bXAucHVzaCggZWxlbSApOwoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gdG1wOwoJCQl9CgkJCXJldHVybiByZXN1bHRzOwoJCX07CgoJRXhwci5maW5kWyJDTEFTUyJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7CgkJaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICE9PSBzdHJ1bmRlZmluZWQgJiYgZG9jdW1lbnRJc0hUTUwgKSB7CgkJCXJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApOwoJCX0KCX07CgoJLyogUVNBL21hdGNoZXNTZWxlY3RvcgoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCglyYnVnZ3lNYXRjaGVzID0gW107CgoJcmJ1Z2d5UVNBID0gW107CgoJaWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvYy5xdWVyeVNlbGVjdG9yQWxsICkpICkgewoJCWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQlkaXYuaW5uZXJIVE1MID0gIjxzZWxlY3QgdD0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiI7CgoJCQlpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbdF49JyddIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJbKl4kXT0iICsgd2hpdGVzcGFjZSArICIqKD86Jyd8XCJcIikiICk7CgkJCX0KCgkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJcXFsiICsgd2hpdGVzcGFjZSArICIqKD86dmFsdWV8IiArIGJvb2xlYW5zICsgIikiICk7CgkJCX0KCgkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aCApIHsKCQkJCXJidWdneVFTQS5wdXNoKCI6Y2hlY2tlZCIpOwoJCQl9CgkJfSk7CgoJCWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQl2YXIgaW5wdXQgPSBkb2MuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJoaWRkZW4iICk7CgkJCWRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoICJuYW1lIiwgIkQiICk7CgoJCQlpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCApIHsKCQkJCXJidWdneVFTQS5wdXNoKCAibmFtZSIgKyB3aGl0ZXNwYWNlICsgIipbKl4kfCF+XT89IiApOwoJCQl9CgoJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGggKSB7CgkJCQlyYnVnZ3lRU0EucHVzaCggIjplbmFibGVkIiwgIjpkaXNhYmxlZCIgKTsKCQkJfQoKCQkJZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKTsKCQkJcmJ1Z2d5UVNBLnB1c2goIiwuKjoiKTsKCQl9KTsKCX0KCglpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fAoJCWRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8CgkJZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8CgkJZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7CgoJCWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQlzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsICJkaXYiICk7CgoJCQltYXRjaGVzLmNhbGwoIGRpdiwgIltzIT0nJ106eCIgKTsKCQkJcmJ1Z2d5TWF0Y2hlcy5wdXNoKCAiIT0iLCBwc2V1ZG9zICk7CgkJfSk7Cgl9CgoJcmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbigifCIpICk7CglyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKCJ8IikgKTsKCgkvKiBDb250YWlucwoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoJaGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApOwoKCWNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCXZhciBhZG93biA9IGEubm9kZVR5cGUgPT09IDkgPyBhLmRvY3VtZW50RWxlbWVudCA6IGEsCgkJCQlidXAgPSBiICYmIGIucGFyZW50Tm9kZTsKCQkJcmV0dXJuIGEgPT09IGJ1cCB8fCAhISggYnVwICYmIGJ1cC5ub2RlVHlwZSA9PT0gMSAmJiAoCgkJCQlhZG93bi5jb250YWlucyA/CgkJCQkJYWRvd24uY29udGFpbnMoIGJ1cCApIDoKCQkJCQlhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTYKCQkJKSk7CgkJfSA6CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCWlmICggYiApIHsKCQkJCXdoaWxlICggKGIgPSBiLnBhcmVudE5vZGUpICkgewoJCQkJCWlmICggYiA9PT0gYSApIHsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9OwoKCS8qIFNvcnRpbmcKCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCglzb3J0T3JkZXIgPSBoYXNDb21wYXJlID8KCWZ1bmN0aW9uKCBhLCBiICkgewoKCQlpZiAoIGEgPT09IGIgKSB7CgkJCWhhc0R1cGxpY2F0ZSA9IHRydWU7CgkJCXJldHVybiAwOwoJCX0KCgkJdmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOwoJCWlmICggY29tcGFyZSApIHsKCQkJcmV0dXJuIGNvbXBhcmU7CgkJfQoKCQljb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgPwoJCQlhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOgoKCQkJMTsKCgkJaWYgKCBjb21wYXJlICYgMSB8fAoJCQkoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7CgoJCQlpZiAoIGEgPT09IGRvYyB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkgewoJCQkJcmV0dXJuIC0xOwoJCQl9CgkJCWlmICggYiA9PT0gZG9jIHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7CgkJCQlyZXR1cm4gMTsKCQkJfQoKCQkJcmV0dXJuIHNvcnRJbnB1dCA/CgkJCQkoIGluZGV4T2YuY2FsbCggc29ydElucHV0LCBhICkgLSBpbmRleE9mLmNhbGwoIHNvcnRJbnB1dCwgYiApICkgOgoJCQkJMDsKCQl9CgoJCXJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTsKCX0gOgoJZnVuY3Rpb24oIGEsIGIgKSB7CgkJaWYgKCBhID09PSBiICkgewoJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQlyZXR1cm4gMDsKCQl9CgoJCXZhciBjdXIsCgkJCWkgPSAwLAoJCQlhdXAgPSBhLnBhcmVudE5vZGUsCgkJCWJ1cCA9IGIucGFyZW50Tm9kZSwKCQkJYXAgPSBbIGEgXSwKCQkJYnAgPSBbIGIgXTsKCgkJaWYgKCAhYXVwIHx8ICFidXAgKSB7CgkJCXJldHVybiBhID09PSBkb2MgPyAtMSA6CgkJCQliID09PSBkb2MgPyAxIDoKCQkJCWF1cCA/IC0xIDoKCQkJCWJ1cCA/IDEgOgoJCQkJc29ydElucHV0ID8KCQkJCSggaW5kZXhPZi5jYWxsKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YuY2FsbCggc29ydElucHV0LCBiICkgKSA6CgkJCQkwOwoKCQl9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHsKCQkJcmV0dXJuIHNpYmxpbmdDaGVjayggYSwgYiApOwoJCX0KCgkJY3VyID0gYTsKCQl3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7CgkJCWFwLnVuc2hpZnQoIGN1ciApOwoJCX0KCQljdXIgPSBiOwoJCXdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHsKCQkJYnAudW5zaGlmdCggY3VyICk7CgkJfQoKCQl3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHsKCQkJaSsrOwoJCX0KCgkJcmV0dXJuIGkgPwoJCQlzaWJsaW5nQ2hlY2soIGFwW2ldLCBicFtpXSApIDoKCgkJCWFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6CgkJCWJwW2ldID09PSBwcmVmZXJyZWREb2MgPyAxIDoKCQkJMDsKCX07CgoJcmV0dXJuIGRvYzsKfTsKClNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkgewoJcmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTsKfTsKClNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHsKCWlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHsKCQlzZXREb2N1bWVudCggZWxlbSApOwoJfQoKCWV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsICI9JyQxJ10iICk7CgoJaWYgKCBzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciAmJiBkb2N1bWVudElzSFRNTCAmJgoJCSggIXJidWdneU1hdGNoZXMgfHwgIXJidWdneU1hdGNoZXMudGVzdCggZXhwciApICkgJiYKCQkoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7CgoJCXRyeSB7CgkJCXZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTsKCgkJCWlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHwKCQkJCQllbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkgewoJCQkJcmV0dXJuIHJldDsKCQkJfQoJCX0gY2F0Y2goZSkge30KCX0KCglyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgW2VsZW1dICkubGVuZ3RoID4gMDsKfTsKClNpenpsZS5jb250YWlucyA9IGZ1bmN0aW9uKCBjb250ZXh0LCBlbGVtICkgewoJaWYgKCAoIGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0ICkgIT09IGRvY3VtZW50ICkgewoJCXNldERvY3VtZW50KCBjb250ZXh0ICk7Cgl9CglyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTsKfTsKClNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CglpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7CgkJc2V0RG9jdW1lbnQoIGVsZW0gKTsKCX0KCgl2YXIgZm4gPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUudG9Mb3dlckNhc2UoKSBdLAoJCXZhbCA9IGZuICYmIGhhc093bi5jYWxsKCBFeHByLmF0dHJIYW5kbGUsIG5hbWUudG9Mb3dlckNhc2UoKSApID8KCQkJZm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDoKCQkJdW5kZWZpbmVkOwoKCXJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/CgkJdmFsIDoKCQlzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID8KCQkJZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSA6CgkJCSh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgPwoJCQkJdmFsLnZhbHVlIDoKCQkJCW51bGw7Cn07CgpTaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkgewoJdGhyb3cgbmV3IEVycm9yKCAiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIiArIG1zZyApOwp9OwoKLyoqCiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXMKICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHMKICovClNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7Cgl2YXIgZWxlbSwKCQlkdXBsaWNhdGVzID0gW10sCgkJaiA9IDAsCgkJaSA9IDA7CgoJaGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlczsKCXNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApOwoJcmVzdWx0cy5zb3J0KCBzb3J0T3JkZXIgKTsKCglpZiAoIGhhc0R1cGxpY2F0ZSApIHsKCQl3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHsKCQkJaWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7CgkJCQlqID0gZHVwbGljYXRlcy5wdXNoKCBpICk7CgkJCX0KCQl9CgkJd2hpbGUgKCBqLS0gKSB7CgkJCXJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTsKCQl9Cgl9CgoJc29ydElucHV0ID0gbnVsbDsKCglyZXR1cm4gcmVzdWx0czsKfTsKCi8qKgogKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSB0ZXh0IHZhbHVlIG9mIGFuIGFycmF5IG9mIERPTSBub2RlcwogKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW0KICovCmdldFRleHQgPSBTaXp6bGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJdmFyIG5vZGUsCgkJcmV0ID0gIiIsCgkJaSA9IDAsCgkJbm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCWlmICggIW5vZGVUeXBlICkgewoJCXdoaWxlICggKG5vZGUgPSBlbGVtW2krK10pICkgewoJCQlyZXQgKz0gZ2V0VGV4dCggbm9kZSApOwoJCX0KCX0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHsKCQlpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSAic3RyaW5nIiApIHsKCQkJcmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7CgkJfSBlbHNlIHsKCQkJZm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7CgkJCQlyZXQgKz0gZ2V0VGV4dCggZWxlbSApOwoJCQl9CgkJfQoJfSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDMgfHwgbm9kZVR5cGUgPT09IDQgKSB7CgkJcmV0dXJuIGVsZW0ubm9kZVZhbHVlOwoJfQoKCXJldHVybiByZXQ7Cn07CgpFeHByID0gU2l6emxlLnNlbGVjdG9ycyA9IHsKCgljYWNoZUxlbmd0aDogNTAsCgoJY3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sCgoJbWF0Y2g6IG1hdGNoRXhwciwKCglhdHRySGFuZGxlOiB7fSwKCglmaW5kOiB7fSwKCglyZWxhdGl2ZTogewoJCSI+IjogeyBkaXI6ICJwYXJlbnROb2RlIiwgZmlyc3Q6IHRydWUgfSwKCQkiICI6IHsgZGlyOiAicGFyZW50Tm9kZSIgfSwKCQkiKyI6IHsgZGlyOiAicHJldmlvdXNTaWJsaW5nIiwgZmlyc3Q6IHRydWUgfSwKCQkifiI6IHsgZGlyOiAicHJldmlvdXNTaWJsaW5nIiB9Cgl9LAoKCXByZUZpbHRlcjogewoJCSJBVFRSIjogZnVuY3Rpb24oIG1hdGNoICkgewoJCQltYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgoJCQltYXRjaFszXSA9ICggbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgIiIgKS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoKCQkJaWYgKCBtYXRjaFsyXSA9PT0gIn49IiApIHsKCQkJCW1hdGNoWzNdID0gIiAiICsgbWF0Y2hbM10gKyAiICI7CgkJCX0KCgkJCXJldHVybiBtYXRjaC5zbGljZSggMCwgNCApOwoJCX0sCgoJCSJDSElMRCI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJLyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwclsiQ0hJTEQiXQoJCQkJMSB0eXBlIChvbmx5fG50aHwuLi4pCgkJCQkyIHdoYXQgKGNoaWxkfG9mLXR5cGUpCgkJCQkzIGFyZ3VtZW50IChldmVufG9kZHxcZCp8XGQqbihbKy1dXGQrKT98Li4uKQoJCQkJNCB4bi1jb21wb25lbnQgb2YgeG4reSBhcmd1bWVudCAoWystXT9cZCpufCkKCQkJCTUgc2lnbiBvZiB4bi1jb21wb25lbnQKCQkJCTYgeCBvZiB4bi1jb21wb25lbnQKCQkJCTcgc2lnbiBvZiB5LWNvbXBvbmVudAoJCQkJOCB5IG9mIHktY29tcG9uZW50CgkJCSovCgkJCW1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTsKCgkJCWlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gIm50aCIgKSB7CgkJCQlpZiAoICFtYXRjaFszXSApIHsKCQkJCQlTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7CgkJCQl9CgoJCQkJbWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09ICJldmVuIiB8fCBtYXRjaFszXSA9PT0gIm9kZCIgKSApOwoJCQkJbWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gIm9kZCIgKTsKCgkJCX0gZWxzZSBpZiAoIG1hdGNoWzNdICkgewoJCQkJU2l6emxlLmVycm9yKCBtYXRjaFswXSApOwoJCQl9CgoJCQlyZXR1cm4gbWF0Y2g7CgkJfSwKCgkJIlBTRVVETyI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJdmFyIGV4Y2VzcywKCQkJCXVucXVvdGVkID0gIW1hdGNoWzVdICYmIG1hdGNoWzJdOwoKCQkJaWYgKCBtYXRjaEV4cHJbIkNISUxEIl0udGVzdCggbWF0Y2hbMF0gKSApIHsKCQkJCXJldHVybiBudWxsOwoJCQl9CgoJCQlpZiAoIG1hdGNoWzNdICYmIG1hdGNoWzRdICE9PSB1bmRlZmluZWQgKSB7CgkJCQltYXRjaFsyXSA9IG1hdGNoWzRdOwoKCQkJfSBlbHNlIGlmICggdW5xdW90ZWQgJiYgcnBzZXVkby50ZXN0KCB1bnF1b3RlZCApICYmCgkJCQkoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmCgkJCQkoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggIikiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7CgoJCQkJbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7CgkJCQltYXRjaFsyXSA9IHVucXVvdGVkLnNsaWNlKCAwLCBleGNlc3MgKTsKCQkJfQoKCQkJcmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7CgkJfQoJfSwKCglmaWx0ZXI6IHsKCgkJIlRBRyI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkgewoJCQl2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIG5vZGVOYW1lU2VsZWN0b3IgPT09ICIqIiA/CgkJCQlmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOgoJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBub2RlTmFtZTsKCQkJCX07CgkJfSwKCgkJIkNMQVNTIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHsKCQkJdmFyIHBhdHRlcm4gPSBjbGFzc0NhY2hlWyBjbGFzc05hbWUgKyAiICIgXTsKCgkJCXJldHVybiBwYXR0ZXJuIHx8CgkJCQkocGF0dGVybiA9IG5ldyBSZWdFeHAoICIoXnwiICsgd2hpdGVzcGFjZSArICIpIiArIGNsYXNzTmFtZSArICIoIiArIHdoaXRlc3BhY2UgKyAifCQpIiApKSAmJgoJCQkJY2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09ICJzdHJpbmciICYmIGVsZW0uY2xhc3NOYW1lIHx8IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gc3RydW5kZWZpbmVkICYmIGVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpIHx8ICIiICk7CgkJCQl9KTsKCQl9LAoKCQkiQVRUUiI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApOwoKCQkJCWlmICggcmVzdWx0ID09IG51bGwgKSB7CgkJCQkJcmV0dXJuIG9wZXJhdG9yID09PSAiIT0iOwoJCQkJfQoJCQkJaWYgKCAhb3BlcmF0b3IgKSB7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgoJCQkJcmVzdWx0ICs9ICIiOwoKCQkJCXJldHVybiBvcGVyYXRvciA9PT0gIj0iID8gcmVzdWx0ID09PSBjaGVjayA6CgkJCQkJb3BlcmF0b3IgPT09ICIhPSIgPyByZXN1bHQgIT09IGNoZWNrIDoKCQkJCQlvcGVyYXRvciA9PT0gIl49IiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDoKCQkJCQlvcGVyYXRvciA9PT0gIio9IiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOgoJCQkJCW9wZXJhdG9yID09PSAiJD0iID8gY2hlY2sgJiYgcmVzdWx0LnNsaWNlKCAtY2hlY2subGVuZ3RoICkgPT09IGNoZWNrIDoKCQkJCQlvcGVyYXRvciA9PT0gIn49IiA/ICggIiAiICsgcmVzdWx0ICsgIiAiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDoKCQkJCQlvcGVyYXRvciA9PT0gInw9IiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgIi0iIDoKCQkJCQlmYWxzZTsKCQkJfTsKCQl9LAoKCQkiQ0hJTEQiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkgewoJCQl2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSAibnRoIiwKCQkJCWZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSAibGFzdCIsCgkJCQlvZlR5cGUgPSB3aGF0ID09PSAib2YtdHlwZSI7CgoJCQlyZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/CgoJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuICEhZWxlbS5wYXJlbnROb2RlOwoJCQkJfSA6CgoJCQkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJCQl2YXIgY2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIGRpZmYsIG5vZGVJbmRleCwgc3RhcnQsCgkJCQkJCWRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/ICJuZXh0U2libGluZyIgOiAicHJldmlvdXNTaWJsaW5nIiwKCQkJCQkJcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLAoJCQkJCQluYW1lID0gb2ZUeXBlICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwKCQkJCQkJdXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGU7CgoJCQkJCWlmICggcGFyZW50ICkgewoKCQkJCQkJaWYgKCBzaW1wbGUgKSB7CgkJCQkJCQl3aGlsZSAoIGRpciApIHsKCQkJCQkJCQlub2RlID0gZWxlbTsKCQkJCQkJCQl3aGlsZSAoIChub2RlID0gbm9kZVsgZGlyIF0pICkgewoJCQkJCQkJCQlpZiAoIG9mVHlwZSA/IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6IG5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgkJCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQkJc3RhcnQgPSBkaXIgPSB0eXBlID09PSAib25seSIgJiYgIXN0YXJ0ICYmICJuZXh0U2libGluZyI7CgkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJfQoKCQkJCQkJc3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTsKCgkJCQkJCWlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHsKCQkJCQkJCW91dGVyQ2FjaGUgPSBwYXJlbnRbIGV4cGFuZG8gXSB8fCAocGFyZW50WyBleHBhbmRvIF0gPSB7fSk7CgkJCQkJCQljYWNoZSA9IG91dGVyQ2FjaGVbIHR5cGUgXSB8fCBbXTsKCQkJCQkJCW5vZGVJbmRleCA9IGNhY2hlWzBdID09PSBkaXJydW5zICYmIGNhY2hlWzFdOwoJCQkJCQkJZGlmZiA9IGNhY2hlWzBdID09PSBkaXJydW5zICYmIGNhY2hlWzJdOwoJCQkJCQkJbm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07CgoJCQkJCQkJd2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHwKCgkJCQkJCQkJKGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7CgoJCQkJCQkJCWlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHsKCQkJCQkJCQkJb3V0ZXJDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJfQoJCQkJCQkJfQoKCQkJCQkJfSBlbHNlIGlmICggdXNlQ2FjaGUgJiYgKGNhY2hlID0gKGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdKSAmJiBjYWNoZVswXSA9PT0gZGlycnVucyApIHsKCQkJCQkJCWRpZmYgPSBjYWNoZVsxXTsKCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fAoJCQkJCQkJCShkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkgewoKCQkJCQkJCQlpZiAoICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApICYmICsrZGlmZiApIHsKCQkJCQkJCQkJaWYgKCB1c2VDYWNoZSApIHsKCQkJCQkJCQkJCShub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KSlbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdOwoJCQkJCQkJCQl9CgoJCQkJCQkJCQlpZiAoIG5vZGUgPT09IGVsZW0gKSB7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJZGlmZiAtPSBsYXN0OwoJCQkJCQlyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTsKCQkJCQl9CgkJCQl9OwoJCX0sCgoJCSJQU0VVRE8iOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHsKCQkJdmFyIGFyZ3MsCgkJCQlmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8CgkJCQkJU2l6emxlLmVycm9yKCAidW5zdXBwb3J0ZWQgcHNldWRvOiAiICsgcHNldWRvICk7CgoJCQlpZiAoIGZuWyBleHBhbmRvIF0gKSB7CgkJCQlyZXR1cm4gZm4oIGFyZ3VtZW50ICk7CgkJCX0KCgkJCWlmICggZm4ubGVuZ3RoID4gMSApIHsKCQkJCWFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCAiIiwgYXJndW1lbnQgXTsKCQkJCXJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgPwoJCQkJCW1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHsKCQkJCQkJdmFyIGlkeCwKCQkJCQkJCW1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSwKCQkJCQkJCWkgPSBtYXRjaGVkLmxlbmd0aDsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCQlpZHggPSBpbmRleE9mLmNhbGwoIHNlZWQsIG1hdGNoZWRbaV0gKTsKCQkJCQkJCXNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7CgkJCQkJCX0KCQkJCQl9KSA6CgkJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJCXJldHVybiBmbiggZWxlbSwgMCwgYXJncyApOwoJCQkJCX07CgkJCX0KCgkJCXJldHVybiBmbjsKCQl9Cgl9LAoKCXBzZXVkb3M6IHsKCQkibm90IjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJdmFyIGlucHV0ID0gW10sCgkJCQlyZXN1bHRzID0gW10sCgkJCQltYXRjaGVyID0gY29tcGlsZSggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sICIkMSIgKSApOwoKCQkJcmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/CgkJCQltYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIGNvbnRleHQsIHhtbCApIHsKCQkJCQl2YXIgZWxlbSwKCQkJCQkJdW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLAoJCQkJCQlpID0gc2VlZC5sZW5ndGg7CgoJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQlpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHsKCQkJCQkJCXNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0pIDoKCQkJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQkJaW5wdXRbMF0gPSBlbGVtOwoJCQkJCW1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTsKCQkJCQlyZXR1cm4gIXJlc3VsdHMucG9wKCk7CgkJCQl9OwoJCX0pLAoKCQkiaGFzIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwOwoJCQl9OwoJCX0pLAoKCQkiY29udGFpbnMiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHRleHQgKSB7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7CgkJCX07CgkJfSksCgoJCSJsYW5nIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHsKCQkJaWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8ICIiKSApIHsKCQkJCVNpenpsZS5lcnJvciggInVuc3VwcG9ydGVkIGxhbmc6ICIgKyBsYW5nICk7CgkJCX0KCQkJbGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpOwoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgZWxlbUxhbmc7CgkJCQlkbyB7CgkJCQkJaWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/CgkJCQkJCWVsZW0ubGFuZyA6CgkJCQkJCWVsZW0uZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKCJsYW5nIikpICkgewoKCQkJCQkJZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpOwoJCQkJCQlyZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArICItIiApID09PSAwOwoJCQkJCX0KCQkJCX0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9OwoJCX0pLAoKCQkidGFyZ2V0IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoOwoJCQlyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7CgkJfSwKCgkJInJvb3QiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0gPT09IGRvY0VsZW07CgkJfSwKCgkJImZvY3VzIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7CgkJfSwKCgkJImVuYWJsZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlOwoJCX0sCgoJCSJkaXNhYmxlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTsKCQl9LAoKCQkiY2hlY2tlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCXJldHVybiAobm9kZU5hbWUgPT09ICJpbnB1dCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gIm9wdGlvbiIgJiYgISFlbGVtLnNlbGVjdGVkKTsKCQl9LAoKCQkic2VsZWN0ZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJaWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7CgkJCQllbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJfQoKCQkJcmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7CgkJfSwKCgkJImVtcHR5IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCWZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkgewoJCQkJaWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIHRydWU7CgkJfSwKCgkJInBhcmVudCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gIUV4cHIucHNldWRvc1siZW1wdHkiXSggZWxlbSApOwoJCX0sCgoJCSJoZWFkZXIiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApOwoJCX0sCgoJCSJpbnB1dCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7CgkJfSwKCgkJImJ1dHRvbiI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIG5hbWUgPT09ICJpbnB1dCIgJiYgZWxlbS50eXBlID09PSAiYnV0dG9uIiB8fCBuYW1lID09PSAiYnV0dG9uIjsKCQl9LAoKCQkidGV4dCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgYXR0cjsKCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gImlucHV0IiAmJgoJCQkJZWxlbS50eXBlID09PSAidGV4dCIgJiYKCgkJCQkoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkgPT0gbnVsbCB8fCBhdHRyLnRvTG93ZXJDYXNlKCkgPT09ICJ0ZXh0IiApOwoJCX0sCgoJCSJmaXJzdCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oKSB7CgkJCXJldHVybiBbIDAgXTsKCQl9KSwKCgkJImxhc3QiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHsKCQkJcmV0dXJuIFsgbGVuZ3RoIC0gMSBdOwoJCX0pLAoKCQkiZXEiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7CgkJCXJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTsKCQl9KSwKCgkJImV2ZW4iOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHsKCQkJdmFyIGkgPSAwOwoJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHsKCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCX0KCQkJcmV0dXJuIG1hdGNoSW5kZXhlczsKCQl9KSwKCgkJIm9kZCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQl2YXIgaSA9IDE7CgkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkgewoJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJfQoJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCX0pLAoKCQkibHQiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7CgkJCXZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDsKCQkJZm9yICggOyAtLWkgPj0gMDsgKSB7CgkJCQltYXRjaEluZGV4ZXMucHVzaCggaSApOwoJCQl9CgkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJfSksCgoJCSJndCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHsKCQkJdmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50OwoJCQlmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7CgkJCQltYXRjaEluZGV4ZXMucHVzaCggaSApOwoJCQl9CgkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJfSkKCX0KfTsKCkV4cHIucHNldWRvc1sibnRoIl0gPSBFeHByLnBzZXVkb3NbImVxIl07Cgpmb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHsKCUV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTsKfQpmb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCByZXNldDogdHJ1ZSB9ICkgewoJRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTsKfQoKZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9CnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zOwpFeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpOwoKZnVuY3Rpb24gdG9rZW5pemUoIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7Cgl2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSwKCQlzb0ZhciwgZ3JvdXBzLCBwcmVGaWx0ZXJzLAoJCWNhY2hlZCA9IHRva2VuQ2FjaGVbIHNlbGVjdG9yICsgIiAiIF07CgoJaWYgKCBjYWNoZWQgKSB7CgkJcmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTsKCX0KCglzb0ZhciA9IHNlbGVjdG9yOwoJZ3JvdXBzID0gW107CglwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7CgoJd2hpbGUgKCBzb0ZhciApIHsKCgkJaWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7CgkJCWlmICggbWF0Y2ggKSB7CgkJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0ZhcjsKCQkJfQoJCQlncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApOwoJCX0KCgkJbWF0Y2hlZCA9IGZhbHNlOwoKCQlpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHsKCQkJbWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7CgkJCXRva2Vucy5wdXNoKHsKCQkJCXZhbHVlOiBtYXRjaGVkLAoJCQkJdHlwZTogbWF0Y2hbMF0ucmVwbGFjZSggcnRyaW0sICIgIiApCgkJCX0pOwoJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApOwoJCX0KCgkJZm9yICggdHlwZSBpbiBFeHByLmZpbHRlciApIHsKCQkJaWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fAoJCQkJKG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7CgkJCQltYXRjaGVkID0gbWF0Y2guc2hpZnQoKTsKCQkJCXRva2Vucy5wdXNoKHsKCQkJCQl2YWx1ZTogbWF0Y2hlZCwKCQkJCQl0eXBlOiB0eXBlLAoJCQkJCW1hdGNoZXM6IG1hdGNoCgkJCQl9KTsKCQkJCXNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7CgkJCX0KCQl9CgoJCWlmICggIW1hdGNoZWQgKSB7CgkJCWJyZWFrOwoJCX0KCX0KCglyZXR1cm4gcGFyc2VPbmx5ID8KCQlzb0Zhci5sZW5ndGggOgoJCXNvRmFyID8KCQkJU2l6emxlLmVycm9yKCBzZWxlY3RvciApIDoKCQkJdG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7Cn0KCmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHsKCXZhciBpID0gMCwKCQlsZW4gPSB0b2tlbnMubGVuZ3RoLAoJCXNlbGVjdG9yID0gIiI7Cglmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQlzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7Cgl9CglyZXR1cm4gc2VsZWN0b3I7Cn0KCmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7Cgl2YXIgZGlyID0gY29tYmluYXRvci5kaXIsCgkJY2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYgZGlyID09PSAicGFyZW50Tm9kZSIsCgkJZG9uZU5hbWUgPSBkb25lKys7CgoJcmV0dXJuIGNvbWJpbmF0b3IuZmlyc3QgPwoJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHsKCQkJCQlyZXR1cm4gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICk7CgkJCQl9CgkJCX0KCQl9IDoKCgkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJdmFyIG9sZENhY2hlLCBvdXRlckNhY2hlLAoJCQkJbmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07CgoJCQlpZiAoIHhtbCApIHsKCQkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7CgkJCQkJCWlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7CgkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7CgkJCQkJCW91dGVyQ2FjaGUgPSBlbGVtWyBleHBhbmRvIF0gfHwgKGVsZW1bIGV4cGFuZG8gXSA9IHt9KTsKCQkJCQkJaWYgKCAob2xkQ2FjaGUgPSBvdXRlckNhY2hlWyBkaXIgXSkgJiYKCQkJCQkJCW9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7CgoJCQkJCQkJcmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlvdXRlckNhY2hlWyBkaXIgXSA9IG5ld0NhY2hlOwoKCQkJCQkJCWlmICggKG5ld0NhY2hlWyAyIF0gPSBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSkgKSB7CgkJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Owp9CgpmdW5jdGlvbiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSB7CglyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/CgkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJdmFyIGkgPSBtYXRjaGVycy5sZW5ndGg7CgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCAhbWF0Y2hlcnNbaV0oIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gdHJ1ZTsKCQl9IDoKCQltYXRjaGVyc1swXTsKfQoKZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkgewoJdmFyIGkgPSAwLAoJCWxlbiA9IGNvbnRleHRzLmxlbmd0aDsKCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCVNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7Cgl9CglyZXR1cm4gcmVzdWx0czsKfQoKZnVuY3Rpb24gY29uZGVuc2UoIHVubWF0Y2hlZCwgbWFwLCBmaWx0ZXIsIGNvbnRleHQsIHhtbCApIHsKCXZhciBlbGVtLAoJCW5ld1VubWF0Y2hlZCA9IFtdLAoJCWkgPSAwLAoJCWxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsCgkJbWFwcGVkID0gbWFwICE9IG51bGw7CgoJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJaWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7CgkJCWlmICggIWZpbHRlciB8fCBmaWx0ZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJbmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTsKCQkJCWlmICggbWFwcGVkICkgewoJCQkJCW1hcC5wdXNoKCBpICk7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIG5ld1VubWF0Y2hlZDsKfQoKZnVuY3Rpb24gc2V0TWF0Y2hlciggcHJlRmlsdGVyLCBzZWxlY3RvciwgbWF0Y2hlciwgcG9zdEZpbHRlciwgcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICkgewoJaWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7CgkJcG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTsKCX0KCWlmICggcG9zdEZpbmRlciAmJiAhcG9zdEZpbmRlclsgZXhwYW5kbyBdICkgewoJCXBvc3RGaW5kZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKTsKCX0KCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHsKCQl2YXIgdGVtcCwgaSwgZWxlbSwKCQkJcHJlTWFwID0gW10sCgkJCXBvc3RNYXAgPSBbXSwKCQkJcHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCwKCgkJCWVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCAiKiIsIGNvbnRleHQubm9kZVR5cGUgPyBbIGNvbnRleHQgXSA6IGNvbnRleHQsIFtdICksCgoJCQltYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID8KCQkJCWNvbmRlbnNlKCBlbGVtcywgcHJlTWFwLCBwcmVGaWx0ZXIsIGNvbnRleHQsIHhtbCApIDoKCQkJCWVsZW1zLAoKCQkJbWF0Y2hlck91dCA9IG1hdGNoZXIgPwoJCQkJcG9zdEZpbmRlciB8fCAoIHNlZWQgPyBwcmVGaWx0ZXIgOiBwcmVleGlzdGluZyB8fCBwb3N0RmlsdGVyICkgPwoKCQkJCQlbXSA6CgoJCQkJCXJlc3VsdHMgOgoJCQkJbWF0Y2hlckluOwoKCQlpZiAoIG1hdGNoZXIgKSB7CgkJCW1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7CgkJfQoKCQlpZiAoIHBvc3RGaWx0ZXIgKSB7CgkJCXRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApOwoJCQlwb3N0RmlsdGVyKCB0ZW1wLCBbXSwgY29udGV4dCwgeG1sICk7CgoJCQlpID0gdGVtcC5sZW5ndGg7CgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCAoZWxlbSA9IHRlbXBbaV0pICkgewoJCQkJCW1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTsKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKCBzZWVkICkgewoJCQlpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkgewoJCQkJaWYgKCBwb3N0RmluZGVyICkgewoJCQkJCXRlbXAgPSBbXTsKCQkJCQlpID0gbWF0Y2hlck91dC5sZW5ndGg7CgkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCWlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHsKCQkJCQkJCXRlbXAucHVzaCggKG1hdGNoZXJJbltpXSA9IGVsZW0pICk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApOwoJCQkJfQoKCQkJCWkgPSBtYXRjaGVyT3V0Lmxlbmd0aDsKCQkJCXdoaWxlICggaS0tICkgewoJCQkJCWlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJgoJCQkJCQkodGVtcCA9IHBvc3RGaW5kZXIgPyBpbmRleE9mLmNhbGwoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHsKCgkJCQkJCXNlZWRbdGVtcF0gPSAhKHJlc3VsdHNbdGVtcF0gPSBlbGVtKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJfSBlbHNlIHsKCQkJbWF0Y2hlck91dCA9IGNvbmRlbnNlKAoJCQkJbWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/CgkJCQkJbWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDoKCQkJCQltYXRjaGVyT3V0CgkJCSk7CgkJCWlmICggcG9zdEZpbmRlciApIHsKCQkJCXBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApOwoJCQl9IGVsc2UgewoJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7Cgl2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLAoJCWxlbiA9IHRva2Vucy5sZW5ndGgsCgkJbGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSwKCQlpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbIiAiXSwKCQlpID0gbGVhZGluZ1JlbGF0aXZlID8gMSA6IDAsCgoJCW1hdGNoQ29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0OwoJCX0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSwKCQltYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGluZGV4T2YuY2FsbCggY2hlY2tDb250ZXh0LCBlbGVtICkgPiAtMTsKCQl9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksCgkJbWF0Y2hlcnMgPSBbIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCXJldHVybiAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKAoJCQkJKGNoZWNrQ29udGV4dCA9IGNvbnRleHQpLm5vZGVUeXBlID8KCQkJCQltYXRjaENvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApIDoKCQkJCQltYXRjaEFueUNvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApICk7CgkJfSBdOwoKCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCWlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHsKCQkJbWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07CgkJfSBlbHNlIHsKCQkJbWF0Y2hlciA9IEV4cHIuZmlsdGVyWyB0b2tlbnNbaV0udHlwZSBdLmFwcGx5KCBudWxsLCB0b2tlbnNbaV0ubWF0Y2hlcyApOwoKCQkJaWYgKCBtYXRjaGVyWyBleHBhbmRvIF0gKSB7CgkJCQlqID0gKytpOwoJCQkJZm9yICggOyBqIDwgbGVuOyBqKysgKSB7CgkJCQkJaWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkgewoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gc2V0TWF0Y2hlcigKCQkJCQlpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwKCQkJCQlpID4gMSAmJiB0b1NlbGVjdG9yKAoJCQkJCQl0b2tlbnMuc2xpY2UoIDAsIGkgLSAxICkuY29uY2F0KHsgdmFsdWU6IHRva2Vuc1sgaSAtIDIgXS50eXBlID09PSAiICIgPyAiKiIgOiAiIiB9KQoJCQkJCSkucmVwbGFjZSggcnRyaW0sICIkMSIgKSwKCQkJCQltYXRjaGVyLAoJCQkJCWkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLAoJCQkJCWogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSwKCQkJCQlqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApCgkJCQkpOwoJCQl9CgkJCW1hdGNoZXJzLnB1c2goIG1hdGNoZXIgKTsKCQl9Cgl9CgoJcmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApOwp9CgpmdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7Cgl2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLAoJCWJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLAoJCXN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHsKCQkJdmFyIGVsZW0sIGosIG1hdGNoZXIsCgkJCQltYXRjaGVkQ291bnQgPSAwLAoJCQkJaSA9ICIwIiwKCQkJCXVubWF0Y2hlZCA9IHNlZWQgJiYgW10sCgkJCQlzZXRNYXRjaGVkID0gW10sCgkJCQljb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCwKCQkJCWVsZW1zID0gc2VlZCB8fCBieUVsZW1lbnQgJiYgRXhwci5maW5kWyJUQUciXSggIioiLCBvdXRlcm1vc3QgKSwKCQkJCWRpcnJ1bnNVbmlxdWUgPSAoZGlycnVucyArPSBjb250ZXh0QmFja3VwID09IG51bGwgPyAxIDogTWF0aC5yYW5kb20oKSB8fCAwLjEpLAoJCQkJbGVuID0gZWxlbXMubGVuZ3RoOwoKCQkJaWYgKCBvdXRlcm1vc3QgKSB7CgkJCQlvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dCAhPT0gZG9jdW1lbnQgJiYgY29udGV4dDsKCQkJfQoKCQkJZm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkgewoJCQkJaWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHsKCQkJCQlqID0gMDsKCQkJCQl3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkgewoJCQkJCQlpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCX0KCQkJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCQkJZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7CgkJCQkJfQoJCQkJfQoKCQkJCWlmICggYnlTZXQgKSB7CgkJCQkJaWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkgewoJCQkJCQltYXRjaGVkQ291bnQtLTsKCQkJCQl9CgoJCQkJCWlmICggc2VlZCApIHsKCQkJCQkJdW5tYXRjaGVkLnB1c2goIGVsZW0gKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCW1hdGNoZWRDb3VudCArPSBpOwoJCQlpZiAoIGJ5U2V0ICYmIGkgIT09IG1hdGNoZWRDb3VudCApIHsKCQkJCWogPSAwOwoJCQkJd2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkgewoJCQkJCW1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7CgkJCQl9CgoJCQkJaWYgKCBzZWVkICkgewoJCQkJCWlmICggbWF0Y2hlZENvdW50ID4gMCApIHsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCQlpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkgewoJCQkJCQkJCXNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoKCQkJCQlzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTsKCQkJCX0KCgkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBzZXRNYXRjaGVkICk7CgoJCQkJaWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmCgkJCQkJKCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7CgoJCQkJCVNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7CgkJCQl9CgkJCX0KCgkJCWlmICggb3V0ZXJtb3N0ICkgewoJCQkJZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7CgkJCQlvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDsKCQkJfQoKCQkJcmV0dXJuIHVubWF0Y2hlZDsKCQl9OwoKCXJldHVybiBieVNldCA/CgkJbWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6CgkJc3VwZXJNYXRjaGVyOwp9Cgpjb21waWxlID0gU2l6emxlLmNvbXBpbGUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIG1hdGNoIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkgewoJdmFyIGksCgkJc2V0TWF0Y2hlcnMgPSBbXSwKCQllbGVtZW50TWF0Y2hlcnMgPSBbXSwKCQljYWNoZWQgPSBjb21waWxlckNhY2hlWyBzZWxlY3RvciArICIgIiBdOwoKCWlmICggIWNhY2hlZCApIHsKCQlpZiAoICFtYXRjaCApIHsKCQkJbWF0Y2ggPSB0b2tlbml6ZSggc2VsZWN0b3IgKTsKCQl9CgkJaSA9IG1hdGNoLmxlbmd0aDsKCQl3aGlsZSAoIGktLSApIHsKCQkJY2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoW2ldICk7CgkJCWlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7CgkJCQlzZXRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTsKCQkJfSBlbHNlIHsKCQkJCWVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTsKCQkJfQoJCX0KCgkJY2FjaGVkID0gY29tcGlsZXJDYWNoZSggc2VsZWN0b3IsIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApICk7CgoJCWNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yOwoJfQoJcmV0dXJuIGNhY2hlZDsKfTsKCi8qKgogKiBBIGxvdy1sZXZlbCBzZWxlY3Rpb24gZnVuY3Rpb24gdGhhdCB3b3JrcyB3aXRoIFNpenpsZSdzIGNvbXBpbGVkCiAqICBzZWxlY3RvciBmdW5jdGlvbnMKICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWQKICogIHNlbGVjdG9yIGZ1bmN0aW9uIGJ1aWx0IHdpdGggU2l6emxlLmNvbXBpbGUKICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0CiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXQogKiBAcGFyYW0ge0FycmF5fSBbc2VlZF0gQSBzZXQgb2YgZWxlbWVudHMgdG8gbWF0Y2ggYWdhaW5zdAogKi8Kc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHsKCXZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLAoJCWNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSAiZnVuY3Rpb24iICYmIHNlbGVjdG9yLAoJCW1hdGNoID0gIXNlZWQgJiYgdG9rZW5pemUoIChzZWxlY3RvciA9IGNvbXBpbGVkLnNlbGVjdG9yIHx8IHNlbGVjdG9yKSApOwoKCXJlc3VsdHMgPSByZXN1bHRzIHx8IFtdOwoKCWlmICggbWF0Y2gubGVuZ3RoID09PSAxICkgewoKCQl0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7CgkJaWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAodG9rZW4gPSB0b2tlbnNbMF0pLnR5cGUgPT09ICJJRCIgJiYKCQkJCXN1cHBvcnQuZ2V0QnlJZCAmJiBjb250ZXh0Lm5vZGVUeXBlID09PSA5ICYmIGRvY3VtZW50SXNIVE1MICYmCgkJCQlFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkgewoKCQkJY29udGV4dCA9ICggRXhwci5maW5kWyJJRCJdKCB0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLCBmdW5lc2NhcGUpLCBjb250ZXh0ICkgfHwgW10gKVswXTsKCQkJaWYgKCAhY29udGV4dCApIHsKCQkJCXJldHVybiByZXN1bHRzOwoKCQkJfSBlbHNlIGlmICggY29tcGlsZWQgKSB7CgkJCQljb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlOwoJCQl9CgoJCQlzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTsKCQl9CgoJCWkgPSBtYXRjaEV4cHJbIm5lZWRzQ29udGV4dCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDsKCQl3aGlsZSAoIGktLSApIHsKCQkJdG9rZW4gPSB0b2tlbnNbaV07CgoJCQlpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHsKCQkJCWJyZWFrOwoJCQl9CgkJCWlmICggKGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSkgKSB7CgkJCQlpZiAoIChzZWVkID0gZmluZCgKCQkJCQl0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICksCgkJCQkJcnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dAoJCQkJKSkgKSB7CgoJCQkJCXRva2Vucy5zcGxpY2UoIGksIDEgKTsKCQkJCQlzZWxlY3RvciA9IHNlZWQubGVuZ3RoICYmIHRvU2VsZWN0b3IoIHRva2VucyApOwoJCQkJCWlmICggIXNlbGVjdG9yICkgewoJCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7CgkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCX0KCgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJKCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKAoJCXNlZWQsCgkJY29udGV4dCwKCQkhZG9jdW1lbnRJc0hUTUwsCgkJcmVzdWx0cywKCQlyc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0CgkpOwoJcmV0dXJuIHJlc3VsdHM7Cn07CgoKc3VwcG9ydC5zb3J0U3RhYmxlID0gZXhwYW5kby5zcGxpdCgiIikuc29ydCggc29ydE9yZGVyICkuam9pbigiIikgPT09IGV4cGFuZG87CgpzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTsKCnNldERvY3VtZW50KCk7CgpzdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZGl2MSApIHsKCXJldHVybiBkaXYxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSApICYgMTsKfSk7CgppZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCWRpdi5pbm5lckhUTUwgPSAiPGEgaHJlZj0nIyc+PC9hPiI7CglyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIikgPT09ICIjIiA7Cn0pICkgewoJYWRkSGFuZGxlKCAidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQlpZiAoICFpc1hNTCApIHsKCQkJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJ0eXBlIiA/IDEgOiAyICk7CgkJfQoJfSk7Cn0KCmlmICggIXN1cHBvcnQuYXR0cmlidXRlcyB8fCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CglkaXYuaW5uZXJIVE1MID0gIjxpbnB1dC8+IjsKCWRpdi5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSggInZhbHVlIiwgIiIgKTsKCXJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoICJ2YWx1ZSIgKSA9PT0gIiI7Cn0pICkgewoJYWRkSGFuZGxlKCAidmFsdWUiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJaWYgKCAhaXNYTUwgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAiaW5wdXQiICkgewoJCQlyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7CgkJfQoJfSk7Cn0KCmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJcmV0dXJuIGRpdi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikgPT0gbnVsbDsKfSkgKSB7CglhZGRIYW5kbGUoIGJvb2xlYW5zLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJdmFyIHZhbDsKCQlpZiAoICFpc1hNTCApIHsKCQkJcmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6CgkJCQkJKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID8KCQkJCQl2YWwudmFsdWUgOgoJCQkJbnVsbDsKCQl9Cgl9KTsKfQoKaWYgKCB0eXBlb2YgZGVmaW5lID09PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQgKSB7CglkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBTaXp6bGU7IH0pOwp9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlICE9PSAidW5kZWZpbmVkIiAmJiBtb2R1bGUuZXhwb3J0cyApIHsKCW1vZHVsZS5leHBvcnRzID0gU2l6emxlOwp9IGVsc2UgewoJd2luZG93LlNpenpsZSA9IFNpenpsZTsKfQoKfSkoIHdpbmRvdyApOwoKOyhmdW5jdGlvbihlbmdpbmUpIHsKICB2YXIgZXh0ZW5kRWxlbWVudHMgPSBQcm90b3R5cGUuU2VsZWN0b3IuZXh0ZW5kRWxlbWVudHM7CgogIGZ1bmN0aW9uIHNlbGVjdChzZWxlY3Rvciwgc2NvcGUpIHsKICAgIHJldHVybiBleHRlbmRFbGVtZW50cyhlbmdpbmUoc2VsZWN0b3IsIHNjb3BlIHx8IGRvY3VtZW50KSk7CiAgfQoKICBmdW5jdGlvbiBtYXRjaChlbGVtZW50LCBzZWxlY3RvcikgewogICAgcmV0dXJuIGVuZ2luZS5tYXRjaGVzKHNlbGVjdG9yLCBbZWxlbWVudF0pLmxlbmd0aCA9PSAxOwogIH0KCiAgUHJvdG90eXBlLlNlbGVjdG9yLmVuZ2luZSA9IGVuZ2luZTsKICBQcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0ID0gc2VsZWN0OwogIFByb3RvdHlwZS5TZWxlY3Rvci5tYXRjaCA9IG1hdGNoOwp9KShTaXp6bGUpOwoKd2luZG93LlNpenpsZSA9IFByb3RvdHlwZS5fb3JpZ2luYWxfcHJvcGVydHk7CmRlbGV0ZSBQcm90b3R5cGUuX29yaWdpbmFsX3Byb3BlcnR5OwoKdmFyIEZvcm0gPSB7CiAgcmVzZXQ6IGZ1bmN0aW9uKGZvcm0pIHsKICAgIGZvcm0gPSAkKGZvcm0pOwogICAgZm9ybS5yZXNldCgpOwogICAgcmV0dXJuIGZvcm07CiAgfSwKCiAgc2VyaWFsaXplRWxlbWVudHM6IGZ1bmN0aW9uKGVsZW1lbnRzLCBvcHRpb25zKSB7CiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT0gJ29iamVjdCcpIG9wdGlvbnMgPSB7IGhhc2g6ICEhb3B0aW9ucyB9OwogICAgZWxzZSBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKG9wdGlvbnMuaGFzaCkpIG9wdGlvbnMuaGFzaCA9IHRydWU7CiAgICB2YXIga2V5LCB2YWx1ZSwgc3VibWl0dGVkID0gZmFsc2UsIHN1Ym1pdCA9IG9wdGlvbnMuc3VibWl0LCBhY2N1bXVsYXRvciwgaW5pdGlhbDsKCiAgICBpZiAob3B0aW9ucy5oYXNoKSB7CiAgICAgIGluaXRpYWwgPSB7fTsKICAgICAgYWNjdW11bGF0b3IgPSBmdW5jdGlvbihyZXN1bHQsIGtleSwgdmFsdWUpIHsKICAgICAgICBpZiAoa2V5IGluIHJlc3VsdCkgewogICAgICAgICAgaWYgKCFPYmplY3QuaXNBcnJheShyZXN1bHRba2V5XSkpIHJlc3VsdFtrZXldID0gW3Jlc3VsdFtrZXldXTsKICAgICAgICAgIHJlc3VsdFtrZXldID0gcmVzdWx0W2tleV0uY29uY2F0KHZhbHVlKTsKICAgICAgICB9IGVsc2UgcmVzdWx0W2tleV0gPSB2YWx1ZTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgaW5pdGlhbCA9ICcnOwogICAgICBhY2N1bXVsYXRvciA9IGZ1bmN0aW9uKHJlc3VsdCwga2V5LCB2YWx1ZXMpIHsKICAgICAgICBpZiAoIU9iamVjdC5pc0FycmF5KHZhbHVlcykpIHt2YWx1ZXMgPSBbdmFsdWVzXTt9CiAgICAgICAgaWYgKCF2YWx1ZXMubGVuZ3RoKSB7cmV0dXJuIHJlc3VsdDt9CiAgICAgICAgdmFyIGVuY29kZWRLZXkgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KS5nc3ViKC8lMjAvLCAnKycpOwogICAgICAgIHJldHVybiByZXN1bHQgKyAocmVzdWx0ID8gIiYiIDogIiIpICsgdmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIHZhbHVlID0gdmFsdWUuZ3N1YigvKFxyKT9cbi8sICdcclxuJyk7CiAgICAgICAgICB2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7CiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmdzdWIoLyUyMC8sICcrJyk7CiAgICAgICAgICByZXR1cm4gZW5jb2RlZEtleSArICI9IiArIHZhbHVlOwogICAgICAgIH0pLmpvaW4oIiYiKTsKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gZWxlbWVudHMuaW5qZWN0KGluaXRpYWwsIGZ1bmN0aW9uKHJlc3VsdCwgZWxlbWVudCkgewogICAgICBpZiAoIWVsZW1lbnQuZGlzYWJsZWQgJiYgZWxlbWVudC5uYW1lKSB7CiAgICAgICAga2V5ID0gZWxlbWVudC5uYW1lOyB2YWx1ZSA9ICQoZWxlbWVudCkuZ2V0VmFsdWUoKTsKICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiBlbGVtZW50LnR5cGUgIT0gJ2ZpbGUnICYmIChlbGVtZW50LnR5cGUgIT0gJ3N1Ym1pdCcgfHwgKCFzdWJtaXR0ZWQgJiYKICAgICAgICAgICAgc3VibWl0ICE9PSBmYWxzZSAmJiAoIXN1Ym1pdCB8fCBrZXkgPT0gc3VibWl0KSAmJiAoc3VibWl0dGVkID0gdHJ1ZSkpKSkgewogICAgICAgICAgcmVzdWx0ID0gYWNjdW11bGF0b3IocmVzdWx0LCBrZXksIHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0pOwogIH0KfTsKCkZvcm0uTWV0aG9kcyA9IHsKICBzZXJpYWxpemU6IGZ1bmN0aW9uKGZvcm0sIG9wdGlvbnMpIHsKICAgIHJldHVybiBGb3JtLnNlcmlhbGl6ZUVsZW1lbnRzKEZvcm0uZ2V0RWxlbWVudHMoZm9ybSksIG9wdGlvbnMpOwogIH0sCgoKICBnZXRFbGVtZW50czogZnVuY3Rpb24oZm9ybSkgewogICAgdmFyIGVsZW1lbnRzID0gJChmb3JtKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpOwogICAgdmFyIGVsZW1lbnQsIHJlc3VsdHMgPSBbXSwgc2VyaWFsaXplcnMgPSBGb3JtLkVsZW1lbnQuU2VyaWFsaXplcnM7CgogICAgZm9yICh2YXIgaSA9IDA7IGVsZW1lbnQgPSBlbGVtZW50c1tpXTsgaSsrKSB7CiAgICAgIGlmIChzZXJpYWxpemVyc1tlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKV0pCiAgICAgICAgcmVzdWx0cy5wdXNoKEVsZW1lbnQuZXh0ZW5kKGVsZW1lbnQpKTsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH0sCgogIGdldElucHV0czogZnVuY3Rpb24oZm9ybSwgdHlwZU5hbWUsIG5hbWUpIHsKICAgIGZvcm0gPSAkKGZvcm0pOwogICAgdmFyIGlucHV0cyA9IGZvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0Jyk7CgogICAgaWYgKCF0eXBlTmFtZSAmJiAhbmFtZSkgcmV0dXJuICRBKGlucHV0cykubWFwKEVsZW1lbnQuZXh0ZW5kKTsKCiAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hpbmdJbnB1dHMgPSBbXSwgbGVuZ3RoID0gaW5wdXRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBpbnB1dCA9IGlucHV0c1tpXTsKICAgICAgaWYgKCh0eXBlTmFtZSAmJiBpbnB1dC50eXBlICE9IHR5cGVOYW1lKSB8fCAobmFtZSAmJiBpbnB1dC5uYW1lICE9IG5hbWUpKQogICAgICAgIGNvbnRpbnVlOwogICAgICBtYXRjaGluZ0lucHV0cy5wdXNoKEVsZW1lbnQuZXh0ZW5kKGlucHV0KSk7CiAgICB9CgogICAgcmV0dXJuIG1hdGNoaW5nSW5wdXRzOwogIH0sCgogIGRpc2FibGU6IGZ1bmN0aW9uKGZvcm0pIHsKICAgIGZvcm0gPSAkKGZvcm0pOwogICAgRm9ybS5nZXRFbGVtZW50cyhmb3JtKS5pbnZva2UoJ2Rpc2FibGUnKTsKICAgIHJldHVybiBmb3JtOwogIH0sCgogIGVuYWJsZTogZnVuY3Rpb24oZm9ybSkgewogICAgZm9ybSA9ICQoZm9ybSk7CiAgICBGb3JtLmdldEVsZW1lbnRzKGZvcm0pLmludm9rZSgnZW5hYmxlJyk7CiAgICByZXR1cm4gZm9ybTsKICB9LAoKICBmaW5kRmlyc3RFbGVtZW50OiBmdW5jdGlvbihmb3JtKSB7CiAgICB2YXIgZWxlbWVudHMgPSAkKGZvcm0pLmdldEVsZW1lbnRzKCkuZmluZEFsbChmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiAnaGlkZGVuJyAhPSBlbGVtZW50LnR5cGUgJiYgIWVsZW1lbnQuZGlzYWJsZWQ7CiAgICB9KTsKICAgIHZhciBmaXJzdEJ5SW5kZXggPSBlbGVtZW50cy5maW5kQWxsKGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIGVsZW1lbnQuaGFzQXR0cmlidXRlKCd0YWJJbmRleCcpICYmIGVsZW1lbnQudGFiSW5kZXggPj0gMDsKICAgIH0pLnNvcnRCeShmdW5jdGlvbihlbGVtZW50KSB7IHJldHVybiBlbGVtZW50LnRhYkluZGV4IH0pLmZpcnN0KCk7CgogICAgcmV0dXJuIGZpcnN0QnlJbmRleCA/IGZpcnN0QnlJbmRleCA6IGVsZW1lbnRzLmZpbmQoZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLnRlc3QoZWxlbWVudC50YWdOYW1lKTsKICAgIH0pOwogIH0sCgogIGZvY3VzRmlyc3RFbGVtZW50OiBmdW5jdGlvbihmb3JtKSB7CiAgICBmb3JtID0gJChmb3JtKTsKICAgIHZhciBlbGVtZW50ID0gZm9ybS5maW5kRmlyc3RFbGVtZW50KCk7CiAgICBpZiAoZWxlbWVudCkgZWxlbWVudC5hY3RpdmF0ZSgpOwogICAgcmV0dXJuIGZvcm07CiAgfSwKCiAgcmVxdWVzdDogZnVuY3Rpb24oZm9ybSwgb3B0aW9ucykgewogICAgZm9ybSA9ICQoZm9ybSksIG9wdGlvbnMgPSBPYmplY3QuY2xvbmUob3B0aW9ucyB8fCB7IH0pOwoKICAgIHZhciBwYXJhbXMgPSBvcHRpb25zLnBhcmFtZXRlcnMsIGFjdGlvbiA9IGZvcm0ucmVhZEF0dHJpYnV0ZSgnYWN0aW9uJykgfHwgJyc7CiAgICBpZiAoYWN0aW9uLmJsYW5rKCkpIGFjdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgb3B0aW9ucy5wYXJhbWV0ZXJzID0gZm9ybS5zZXJpYWxpemUodHJ1ZSk7CgogICAgaWYgKHBhcmFtcykgewogICAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKHBhcmFtcykpIHBhcmFtcyA9IHBhcmFtcy50b1F1ZXJ5UGFyYW1zKCk7CiAgICAgIE9iamVjdC5leHRlbmQob3B0aW9ucy5wYXJhbWV0ZXJzLCBwYXJhbXMpOwogICAgfQoKICAgIGlmIChmb3JtLmhhc0F0dHJpYnV0ZSgnbWV0aG9kJykgJiYgIW9wdGlvbnMubWV0aG9kKQogICAgICBvcHRpb25zLm1ldGhvZCA9IGZvcm0ubWV0aG9kOwoKICAgIHJldHVybiBuZXcgQWpheC5SZXF1ZXN0KGFjdGlvbiwgb3B0aW9ucyk7CiAgfQp9OwoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgoKRm9ybS5FbGVtZW50ID0gewogIGZvY3VzOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAkKGVsZW1lbnQpLmZvY3VzKCk7CiAgICByZXR1cm4gZWxlbWVudDsKICB9LAoKICBzZWxlY3Q6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICQoZWxlbWVudCkuc2VsZWN0KCk7CiAgICByZXR1cm4gZWxlbWVudDsKICB9Cn07CgpGb3JtLkVsZW1lbnQuTWV0aG9kcyA9IHsKCiAgc2VyaWFsaXplOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGlmICghZWxlbWVudC5kaXNhYmxlZCAmJiBlbGVtZW50Lm5hbWUpIHsKICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC5nZXRWYWx1ZSgpOwogICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIHBhaXIgPSB7IH07CiAgICAgICAgcGFpcltlbGVtZW50Lm5hbWVdID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIE9iamVjdC50b1F1ZXJ5U3RyaW5nKHBhaXIpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gJyc7CiAgfSwKCiAgZ2V0VmFsdWU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIG1ldGhvZCA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgcmV0dXJuIEZvcm0uRWxlbWVudC5TZXJpYWxpemVyc1ttZXRob2RdKGVsZW1lbnQpOwogIH0sCgogIHNldFZhbHVlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgbWV0aG9kID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICBGb3JtLkVsZW1lbnQuU2VyaWFsaXplcnNbbWV0aG9kXShlbGVtZW50LCB2YWx1ZSk7CiAgICByZXR1cm4gZWxlbWVudDsKICB9LAoKICBjbGVhcjogZnVuY3Rpb24oZWxlbWVudCkgewogICAgJChlbGVtZW50KS52YWx1ZSA9ICcnOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfSwKCiAgcHJlc2VudDogZnVuY3Rpb24oZWxlbWVudCkgewogICAgcmV0dXJuICQoZWxlbWVudCkudmFsdWUgIT0gJyc7CiAgfSwKCiAgYWN0aXZhdGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdHJ5IHsKICAgICAgZWxlbWVudC5mb2N1cygpOwogICAgICBpZiAoZWxlbWVudC5zZWxlY3QgJiYgKGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9ICdpbnB1dCcgfHwKICAgICAgICAgICEoL14oPzpidXR0b258cmVzZXR8c3VibWl0KSQvaS50ZXN0KGVsZW1lbnQudHlwZSkpKSkKICAgICAgICBlbGVtZW50LnNlbGVjdCgpOwogICAgfSBjYXRjaCAoZSkgeyB9CiAgICByZXR1cm4gZWxlbWVudDsKICB9LAoKICBkaXNhYmxlOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfSwKCiAgZW5hYmxlOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTsKICAgIHJldHVybiBlbGVtZW50OwogIH0KfTsKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKdmFyIEZpZWxkID0gRm9ybS5FbGVtZW50OwoKdmFyICRGID0gRm9ybS5FbGVtZW50Lk1ldGhvZHMuZ2V0VmFsdWU7CgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCkZvcm0uRWxlbWVudC5TZXJpYWxpemVycyA9IChmdW5jdGlvbigpIHsKICBmdW5jdGlvbiBpbnB1dChlbGVtZW50LCB2YWx1ZSkgewogICAgc3dpdGNoIChlbGVtZW50LnR5cGUudG9Mb3dlckNhc2UoKSkgewogICAgICBjYXNlICdjaGVja2JveCc6CiAgICAgIGNhc2UgJ3JhZGlvJzoKICAgICAgICByZXR1cm4gaW5wdXRTZWxlY3RvcihlbGVtZW50LCB2YWx1ZSk7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIHZhbHVlU2VsZWN0b3IoZWxlbWVudCwgdmFsdWUpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaW5wdXRTZWxlY3RvcihlbGVtZW50LCB2YWx1ZSkgewogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZCh2YWx1ZSkpCiAgICAgIHJldHVybiBlbGVtZW50LmNoZWNrZWQgPyBlbGVtZW50LnZhbHVlIDogbnVsbDsKICAgIGVsc2UgZWxlbWVudC5jaGVja2VkID0gISF2YWx1ZTsKICB9CgogIGZ1bmN0aW9uIHZhbHVlU2VsZWN0b3IoZWxlbWVudCwgdmFsdWUpIHsKICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpKSByZXR1cm4gZWxlbWVudC52YWx1ZTsKICAgIGVsc2UgZWxlbWVudC52YWx1ZSA9IHZhbHVlOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0KGVsZW1lbnQsIHZhbHVlKSB7CiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHZhbHVlKSkKICAgICAgcmV0dXJuIChlbGVtZW50LnR5cGUgPT09ICdzZWxlY3Qtb25lJyA/IHNlbGVjdE9uZSA6IHNlbGVjdE1hbnkpKGVsZW1lbnQpOwoKICAgIHZhciBvcHQsIGN1cnJlbnRWYWx1ZSwgc2luZ2xlID0gIU9iamVjdC5pc0FycmF5KHZhbHVlKTsKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIG9wdCA9IGVsZW1lbnQub3B0aW9uc1tpXTsKICAgICAgY3VycmVudFZhbHVlID0gdGhpcy5vcHRpb25WYWx1ZShvcHQpOwogICAgICBpZiAoc2luZ2xlKSB7CiAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA9PSB2YWx1ZSkgewogICAgICAgICAgb3B0LnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZWxzZSBvcHQuc2VsZWN0ZWQgPSB2YWx1ZS5pbmNsdWRlKGN1cnJlbnRWYWx1ZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzZWxlY3RPbmUoZWxlbWVudCkgewogICAgdmFyIGluZGV4ID0gZWxlbWVudC5zZWxlY3RlZEluZGV4OwogICAgcmV0dXJuIGluZGV4ID49IDAgPyBvcHRpb25WYWx1ZShlbGVtZW50Lm9wdGlvbnNbaW5kZXhdKSA6IG51bGw7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3RNYW55KGVsZW1lbnQpIHsKICAgIHZhciB2YWx1ZXMsIGxlbmd0aCA9IGVsZW1lbnQubGVuZ3RoOwogICAgaWYgKCFsZW5ndGgpIHJldHVybiBudWxsOwoKICAgIGZvciAodmFyIGkgPSAwLCB2YWx1ZXMgPSBbXTsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBvcHQgPSBlbGVtZW50Lm9wdGlvbnNbaV07CiAgICAgIGlmIChvcHQuc2VsZWN0ZWQpIHZhbHVlcy5wdXNoKG9wdGlvblZhbHVlKG9wdCkpOwogICAgfQogICAgcmV0dXJuIHZhbHVlczsKICB9CgogIGZ1bmN0aW9uIG9wdGlvblZhbHVlKG9wdCkgewogICAgcmV0dXJuIEVsZW1lbnQuaGFzQXR0cmlidXRlKG9wdCwgJ3ZhbHVlJykgPyBvcHQudmFsdWUgOiBvcHQudGV4dDsKICB9CgogIHJldHVybiB7CiAgICBpbnB1dDogICAgICAgICBpbnB1dCwKICAgIGlucHV0U2VsZWN0b3I6IGlucHV0U2VsZWN0b3IsCiAgICB0ZXh0YXJlYTogICAgICB2YWx1ZVNlbGVjdG9yLAogICAgc2VsZWN0OiAgICAgICAgc2VsZWN0LAogICAgc2VsZWN0T25lOiAgICAgc2VsZWN0T25lLAogICAgc2VsZWN0TWFueTogICAgc2VsZWN0TWFueSwKICAgIG9wdGlvblZhbHVlOiAgIG9wdGlvblZhbHVlLAogICAgYnV0dG9uOiAgICAgICAgdmFsdWVTZWxlY3RvcgogIH07Cn0pKCk7CgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCgpBYnN0cmFjdC5UaW1lZE9ic2VydmVyID0gQ2xhc3MuY3JlYXRlKFBlcmlvZGljYWxFeGVjdXRlciwgewogIGluaXRpYWxpemU6IGZ1bmN0aW9uKCRzdXBlciwgZWxlbWVudCwgZnJlcXVlbmN5LCBjYWxsYmFjaykgewogICAgJHN1cGVyKGNhbGxiYWNrLCBmcmVxdWVuY3kpOwogICAgdGhpcy5lbGVtZW50ICAgPSAkKGVsZW1lbnQpOwogICAgdGhpcy5sYXN0VmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7CiAgfSwKCiAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7CiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKHRoaXMubGFzdFZhbHVlKSAmJiBPYmplY3QuaXNTdHJpbmcodmFsdWUpID8KICAgICAgICB0aGlzLmxhc3RWYWx1ZSAhPSB2YWx1ZSA6IFN0cmluZyh0aGlzLmxhc3RWYWx1ZSkgIT0gU3RyaW5nKHZhbHVlKSkgewogICAgICB0aGlzLmNhbGxiYWNrKHRoaXMuZWxlbWVudCwgdmFsdWUpOwogICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlOwogICAgfQogIH0KfSk7CgpGb3JtLkVsZW1lbnQuT2JzZXJ2ZXIgPSBDbGFzcy5jcmVhdGUoQWJzdHJhY3QuVGltZWRPYnNlcnZlciwgewogIGdldFZhbHVlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBGb3JtLkVsZW1lbnQuZ2V0VmFsdWUodGhpcy5lbGVtZW50KTsKICB9Cn0pOwoKRm9ybS5PYnNlcnZlciA9IENsYXNzLmNyZWF0ZShBYnN0cmFjdC5UaW1lZE9ic2VydmVyLCB7CiAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIEZvcm0uc2VyaWFsaXplKHRoaXMuZWxlbWVudCk7CiAgfQp9KTsKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKQWJzdHJhY3QuRXZlbnRPYnNlcnZlciA9IENsYXNzLmNyZWF0ZSh7CiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZWxlbWVudCwgY2FsbGJhY2spIHsKICAgIHRoaXMuZWxlbWVudCAgPSAkKGVsZW1lbnQpOwogICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrOwoKICAgIHRoaXMubGFzdFZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpOwogICAgaWYgKHRoaXMuZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ2Zvcm0nKQogICAgICB0aGlzLnJlZ2lzdGVyRm9ybUNhbGxiYWNrcygpOwogICAgZWxzZQogICAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2sodGhpcy5lbGVtZW50KTsKICB9LAoKICBvbkVsZW1lbnRFdmVudDogZnVuY3Rpb24oKSB7CiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7CiAgICBpZiAodGhpcy5sYXN0VmFsdWUgIT0gdmFsdWUpIHsKICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLmVsZW1lbnQsIHZhbHVlKTsKICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTsKICAgIH0KICB9LAoKICByZWdpc3RlckZvcm1DYWxsYmFja3M6IGZ1bmN0aW9uKCkgewogICAgRm9ybS5nZXRFbGVtZW50cyh0aGlzLmVsZW1lbnQpLmVhY2godGhpcy5yZWdpc3RlckNhbGxiYWNrLCB0aGlzKTsKICB9LAoKICByZWdpc3RlckNhbGxiYWNrOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICBpZiAoZWxlbWVudC50eXBlKSB7CiAgICAgIHN3aXRjaCAoZWxlbWVudC50eXBlLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICBjYXNlICdjaGVja2JveCc6CiAgICAgICAgY2FzZSAncmFkaW8nOgogICAgICAgICAgRXZlbnQub2JzZXJ2ZShlbGVtZW50LCAnY2xpY2snLCB0aGlzLm9uRWxlbWVudEV2ZW50LmJpbmQodGhpcykpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIEV2ZW50Lm9ic2VydmUoZWxlbWVudCwgJ2NoYW5nZScsIHRoaXMub25FbGVtZW50RXZlbnQuYmluZCh0aGlzKSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0KfSk7CgpGb3JtLkVsZW1lbnQuRXZlbnRPYnNlcnZlciA9IENsYXNzLmNyZWF0ZShBYnN0cmFjdC5FdmVudE9ic2VydmVyLCB7CiAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIEZvcm0uRWxlbWVudC5nZXRWYWx1ZSh0aGlzLmVsZW1lbnQpOwogIH0KfSk7CgpGb3JtLkV2ZW50T2JzZXJ2ZXIgPSBDbGFzcy5jcmVhdGUoQWJzdHJhY3QuRXZlbnRPYnNlcnZlciwgewogIGdldFZhbHVlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBGb3JtLnNlcmlhbGl6ZSh0aGlzLmVsZW1lbnQpOwogIH0KfSk7CihmdW5jdGlvbihHTE9CQUwpIHsKICB2YXIgRElWID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogIHZhciBNT1VTRUVOVEVSX01PVVNFTEVBVkVfRVZFTlRTX1NVUFBPUlRFRCA9ICdvbm1vdXNlZW50ZXInIGluIGRvY0VsCiAgICYmICdvbm1vdXNlbGVhdmUnIGluIGRvY0VsOwoKICB2YXIgRXZlbnQgPSB7CiAgICBLRVlfQkFDS1NQQUNFOiA4LAogICAgS0VZX1RBQjogICAgICAgOSwKICAgIEtFWV9SRVRVUk46ICAgMTMsCiAgICBLRVlfRVNDOiAgICAgIDI3LAogICAgS0VZX0xFRlQ6ICAgICAzNywKICAgIEtFWV9VUDogICAgICAgMzgsCiAgICBLRVlfUklHSFQ6ICAgIDM5LAogICAgS0VZX0RPV046ICAgICA0MCwKICAgIEtFWV9ERUxFVEU6ICAgNDYsCiAgICBLRVlfSE9NRTogICAgIDM2LAogICAgS0VZX0VORDogICAgICAzNSwKICAgIEtFWV9QQUdFVVA6ICAgMzMsCiAgICBLRVlfUEFHRURPV046IDM0LAogICAgS0VZX0lOU0VSVDogICA0NQogIH07CgoKICB2YXIgaXNJRUxlZ2FjeUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHsgcmV0dXJuIGZhbHNlOyB9OwoKICBpZiAod2luZG93LmF0dGFjaEV2ZW50KSB7CiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgaXNJRUxlZ2FjeUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICByZXR1cm4gIShldmVudCBpbnN0YW5jZW9mIHdpbmRvdy5FdmVudCk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBpc0lFTGVnYWN5RXZlbnQgPSBmdW5jdGlvbihldmVudCkgeyByZXR1cm4gdHJ1ZTsgfTsKICAgIH0KICB9CgogIHZhciBfaXNCdXR0b247CgogIGZ1bmN0aW9uIF9pc0J1dHRvbkZvckRPTUV2ZW50cyhldmVudCwgY29kZSkgewogICAgcmV0dXJuIGV2ZW50LndoaWNoID8gKGV2ZW50LndoaWNoID09PSBjb2RlICsgMSkgOiAoZXZlbnQuYnV0dG9uID09PSBjb2RlKTsKICB9CgogIHZhciBsZWdhY3lCdXR0b25NYXAgPSB7IDA6IDEsIDE6IDQsIDI6IDIgfTsKICBmdW5jdGlvbiBfaXNCdXR0b25Gb3JMZWdhY3lFdmVudHMoZXZlbnQsIGNvZGUpIHsKICAgIHJldHVybiBldmVudC5idXR0b24gPT09IGxlZ2FjeUJ1dHRvbk1hcFtjb2RlXTsKICB9CgogIGZ1bmN0aW9uIF9pc0J1dHRvbkZvcldlYktpdChldmVudCwgY29kZSkgewogICAgc3dpdGNoIChjb2RlKSB7CiAgICAgIGNhc2UgMDogcmV0dXJuIGV2ZW50LndoaWNoID09IDEgJiYgIWV2ZW50Lm1ldGFLZXk7CiAgICAgIGNhc2UgMTogcmV0dXJuIGV2ZW50LndoaWNoID09IDIgfHwgKGV2ZW50LndoaWNoID09IDEgJiYgZXZlbnQubWV0YUtleSk7CiAgICAgIGNhc2UgMjogcmV0dXJuIGV2ZW50LndoaWNoID09IDM7CiAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIGlmICh3aW5kb3cuYXR0YWNoRXZlbnQpIHsKICAgIGlmICghd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgX2lzQnV0dG9uID0gX2lzQnV0dG9uRm9yTGVnYWN5RXZlbnRzOwogICAgfSBlbHNlIHsKICAgICAgX2lzQnV0dG9uID0gZnVuY3Rpb24oZXZlbnQsIGNvZGUpIHsKICAgICAgICByZXR1cm4gaXNJRUxlZ2FjeUV2ZW50KGV2ZW50KSA/IF9pc0J1dHRvbkZvckxlZ2FjeUV2ZW50cyhldmVudCwgY29kZSkgOgogICAgICAgICBfaXNCdXR0b25Gb3JET01FdmVudHMoZXZlbnQsIGNvZGUpOwogICAgICB9CiAgICB9CiAgfSBlbHNlIGlmIChQcm90b3R5cGUuQnJvd3Nlci5XZWJLaXQpIHsKICAgIF9pc0J1dHRvbiA9IF9pc0J1dHRvbkZvcldlYktpdDsKICB9IGVsc2UgewogICAgX2lzQnV0dG9uID0gX2lzQnV0dG9uRm9yRE9NRXZlbnRzOwogIH0KCiAgZnVuY3Rpb24gaXNMZWZ0Q2xpY2soZXZlbnQpICAgeyByZXR1cm4gX2lzQnV0dG9uKGV2ZW50LCAwKSB9CgogIGZ1bmN0aW9uIGlzTWlkZGxlQ2xpY2soZXZlbnQpIHsgcmV0dXJuIF9pc0J1dHRvbihldmVudCwgMSkgfQoKICBmdW5jdGlvbiBpc1JpZ2h0Q2xpY2soZXZlbnQpICB7IHJldHVybiBfaXNCdXR0b24oZXZlbnQsIDIpIH0KCiAgZnVuY3Rpb24gZWxlbWVudChldmVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuZXh0ZW5kKF9lbGVtZW50KGV2ZW50KSk7CiAgfQoKICBmdW5jdGlvbiBfZWxlbWVudChldmVudCkgewogICAgZXZlbnQgPSBFdmVudC5leHRlbmQoZXZlbnQpOwoKICAgIHZhciBub2RlID0gZXZlbnQudGFyZ2V0LCB0eXBlID0gZXZlbnQudHlwZSwKICAgICBjdXJyZW50VGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDsKCiAgICBpZiAoY3VycmVudFRhcmdldCAmJiBjdXJyZW50VGFyZ2V0LnRhZ05hbWUpIHsKICAgICAgaWYgKHR5cGUgPT09ICdsb2FkJyB8fCB0eXBlID09PSAnZXJyb3InIHx8CiAgICAgICAgKHR5cGUgPT09ICdjbGljaycgJiYgY3VycmVudFRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcKICAgICAgICAgICYmIGN1cnJlbnRUYXJnZXQudHlwZSA9PT0gJ3JhZGlvJykpCiAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50VGFyZ2V0OwogICAgfQoKICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09IE5vZGUuVEVYVF9OT0RFID8gbm9kZS5wYXJlbnROb2RlIDogbm9kZTsKICB9CgogIGZ1bmN0aW9uIGZpbmRFbGVtZW50KGV2ZW50LCBleHByZXNzaW9uKSB7CiAgICB2YXIgZWxlbWVudCA9IF9lbGVtZW50KGV2ZW50KSwgc2VsZWN0b3IgPSBQcm90b3R5cGUuU2VsZWN0b3I7CiAgICBpZiAoIWV4cHJlc3Npb24pIHJldHVybiBFbGVtZW50LmV4dGVuZChlbGVtZW50KTsKICAgIHdoaWxlIChlbGVtZW50KSB7CiAgICAgIGlmIChPYmplY3QuaXNFbGVtZW50KGVsZW1lbnQpICYmIHNlbGVjdG9yLm1hdGNoKGVsZW1lbnQsIGV4cHJlc3Npb24pKQogICAgICAgIHJldHVybiBFbGVtZW50LmV4dGVuZChlbGVtZW50KTsKICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHBvaW50ZXIoZXZlbnQpIHsKICAgIHJldHVybiB7IHg6IHBvaW50ZXJYKGV2ZW50KSwgeTogcG9pbnRlclkoZXZlbnQpIH07CiAgfQoKICBmdW5jdGlvbiBwb2ludGVyWChldmVudCkgewogICAgdmFyIGRvY0VsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsCiAgICAgYm9keSA9IGRvY3VtZW50LmJvZHkgfHwgeyBzY3JvbGxMZWZ0OiAwIH07CgogICAgcmV0dXJuIGV2ZW50LnBhZ2VYIHx8IChldmVudC5jbGllbnRYICsKICAgICAgKGRvY0VsZW1lbnQuc2Nyb2xsTGVmdCB8fCBib2R5LnNjcm9sbExlZnQpIC0KICAgICAgKGRvY0VsZW1lbnQuY2xpZW50TGVmdCB8fCAwKSk7CiAgfQoKICBmdW5jdGlvbiBwb2ludGVyWShldmVudCkgewogICAgdmFyIGRvY0VsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsCiAgICAgYm9keSA9IGRvY3VtZW50LmJvZHkgfHwgeyBzY3JvbGxUb3A6IDAgfTsKCiAgICByZXR1cm4gIGV2ZW50LnBhZ2VZIHx8IChldmVudC5jbGllbnRZICsKICAgICAgIChkb2NFbGVtZW50LnNjcm9sbFRvcCB8fCBib2R5LnNjcm9sbFRvcCkgLQogICAgICAgKGRvY0VsZW1lbnQuY2xpZW50VG9wIHx8IDApKTsKICB9CgoKICBmdW5jdGlvbiBzdG9wKGV2ZW50KSB7CiAgICBFdmVudC5leHRlbmQoZXZlbnQpOwogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoKICAgIGV2ZW50LnN0b3BwZWQgPSB0cnVlOwogIH0KCgogIEV2ZW50Lk1ldGhvZHMgPSB7CiAgICBpc0xlZnRDbGljazogICBpc0xlZnRDbGljaywKICAgIGlzTWlkZGxlQ2xpY2s6IGlzTWlkZGxlQ2xpY2ssCiAgICBpc1JpZ2h0Q2xpY2s6ICBpc1JpZ2h0Q2xpY2ssCgogICAgZWxlbWVudDogICAgIGVsZW1lbnQsCiAgICBmaW5kRWxlbWVudDogZmluZEVsZW1lbnQsCgogICAgcG9pbnRlcjogIHBvaW50ZXIsCiAgICBwb2ludGVyWDogcG9pbnRlclgsCiAgICBwb2ludGVyWTogcG9pbnRlclksCgogICAgc3RvcDogc3RvcAogIH07CgogIHZhciBtZXRob2RzID0gT2JqZWN0LmtleXMoRXZlbnQuTWV0aG9kcykuaW5qZWN0KHsgfSwgZnVuY3Rpb24obSwgbmFtZSkgewogICAgbVtuYW1lXSA9IEV2ZW50Lk1ldGhvZHNbbmFtZV0ubWV0aG9kaXplKCk7CiAgICByZXR1cm4gbTsKICB9KTsKCiAgaWYgKHdpbmRvdy5hdHRhY2hFdmVudCkgewogICAgZnVuY3Rpb24gX3JlbGF0ZWRUYXJnZXQoZXZlbnQpIHsKICAgICAgdmFyIGVsZW1lbnQ7CiAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkgewogICAgICAgIGNhc2UgJ21vdXNlb3Zlcic6CiAgICAgICAgY2FzZSAnbW91c2VlbnRlcic6CiAgICAgICAgICBlbGVtZW50ID0gZXZlbnQuZnJvbUVsZW1lbnQ7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdtb3VzZW91dCc6CiAgICAgICAgY2FzZSAnbW91c2VsZWF2ZSc6CiAgICAgICAgICBlbGVtZW50ID0gZXZlbnQudG9FbGVtZW50OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiBFbGVtZW50LmV4dGVuZChlbGVtZW50KTsKICAgIH0KCiAgICB2YXIgYWRkaXRpb25hbE1ldGhvZHMgPSB7CiAgICAgIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7IHRoaXMuY2FuY2VsQnViYmxlID0gdHJ1ZSB9LAogICAgICBwcmV2ZW50RGVmYXVsdDogIGZ1bmN0aW9uKCkgeyB0aGlzLnJldHVyblZhbHVlID0gZmFsc2UgfSwKICAgICAgaW5zcGVjdDogZnVuY3Rpb24oKSB7IHJldHVybiAnW29iamVjdCBFdmVudF0nIH0KICAgIH07CgogICAgRXZlbnQuZXh0ZW5kID0gZnVuY3Rpb24oZXZlbnQsIGVsZW1lbnQpIHsKICAgICAgaWYgKCFldmVudCkgcmV0dXJuIGZhbHNlOwoKICAgICAgaWYgKCFpc0lFTGVnYWN5RXZlbnQoZXZlbnQpKSByZXR1cm4gZXZlbnQ7CgogICAgICBpZiAoZXZlbnQuX2V4dGVuZGVkQnlQcm90b3R5cGUpIHJldHVybiBldmVudDsKICAgICAgZXZlbnQuX2V4dGVuZGVkQnlQcm90b3R5cGUgPSBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbjsKCiAgICAgIHZhciBwb2ludGVyID0gRXZlbnQucG9pbnRlcihldmVudCk7CgogICAgICBPYmplY3QuZXh0ZW5kKGV2ZW50LCB7CiAgICAgICAgdGFyZ2V0OiBldmVudC5zcmNFbGVtZW50IHx8IGVsZW1lbnQsCiAgICAgICAgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRUYXJnZXQoZXZlbnQpLAogICAgICAgIHBhZ2VYOiAgcG9pbnRlci54LAogICAgICAgIHBhZ2VZOiAgcG9pbnRlci55CiAgICAgIH0pOwoKICAgICAgT2JqZWN0LmV4dGVuZChldmVudCwgbWV0aG9kcyk7CiAgICAgIE9iamVjdC5leHRlbmQoZXZlbnQsIGFkZGl0aW9uYWxNZXRob2RzKTsKCiAgICAgIHJldHVybiBldmVudDsKICAgIH07CiAgfSBlbHNlIHsKICAgIEV2ZW50LmV4dGVuZCA9IFByb3RvdHlwZS5LOwogIH0KCiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICBFdmVudC5wcm90b3R5cGUgPSB3aW5kb3cuRXZlbnQucHJvdG90eXBlIHx8IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJykuX19wcm90b19fOwogICAgT2JqZWN0LmV4dGVuZChFdmVudC5wcm90b3R5cGUsIG1ldGhvZHMpOwogIH0KCiAgdmFyIEVWRU5UX1RSQU5TTEFUSU9OUyA9IHsKICAgIG1vdXNlZW50ZXI6ICdtb3VzZW92ZXInLAogICAgbW91c2VsZWF2ZTogJ21vdXNlb3V0JwogIH07CgogIGZ1bmN0aW9uIGdldERPTUV2ZW50TmFtZShldmVudE5hbWUpIHsKICAgIHJldHVybiBFVkVOVF9UUkFOU0xBVElPTlNbZXZlbnROYW1lXSB8fCBldmVudE5hbWU7CiAgfQoKICBpZiAoTU9VU0VFTlRFUl9NT1VTRUxFQVZFX0VWRU5UU19TVVBQT1JURUQpCiAgICBnZXRET01FdmVudE5hbWUgPSBQcm90b3R5cGUuSzsKCiAgZnVuY3Rpb24gZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpIHsKICAgIGlmIChlbGVtZW50ID09PSB3aW5kb3cpIHJldHVybiAwOwoKICAgIGlmICh0eXBlb2YgZWxlbWVudC5fcHJvdG90eXBlVUlEID09PSAndW5kZWZpbmVkJykKICAgICAgZWxlbWVudC5fcHJvdG90eXBlVUlEID0gRWxlbWVudC5TdG9yYWdlLlVJRCsrOwogICAgcmV0dXJuIGVsZW1lbnQuX3Byb3RvdHlwZVVJRDsKICB9CgogIGZ1bmN0aW9uIGdldFVuaXF1ZUVsZW1lbnRJRF9JRShlbGVtZW50KSB7CiAgICBpZiAoZWxlbWVudCA9PT0gd2luZG93KSByZXR1cm4gMDsKICAgIGlmIChlbGVtZW50ID09IGRvY3VtZW50KSByZXR1cm4gMTsKICAgIHJldHVybiBlbGVtZW50LnVuaXF1ZUlEOwogIH0KCiAgaWYgKCd1bmlxdWVJRCcgaW4gRElWKQogICAgZ2V0VW5pcXVlRWxlbWVudElEID0gZ2V0VW5pcXVlRWxlbWVudElEX0lFOwoKICBmdW5jdGlvbiBpc0N1c3RvbUV2ZW50KGV2ZW50TmFtZSkgewogICAgcmV0dXJuIGV2ZW50TmFtZS5pbmNsdWRlKCc6Jyk7CiAgfQoKICBFdmVudC5faXNDdXN0b21FdmVudCA9IGlzQ3VzdG9tRXZlbnQ7CgogIGZ1bmN0aW9uIGdldFJlZ2lzdHJ5Rm9yRWxlbWVudChlbGVtZW50LCB1aWQpIHsKICAgIHZhciBDQUNIRSA9IEdMT0JBTC5FdmVudC5jYWNoZTsKICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQodWlkKSkKICAgICAgdWlkID0gZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpOwogICAgaWYgKCFDQUNIRVt1aWRdKSBDQUNIRVt1aWRdID0geyBlbGVtZW50OiBlbGVtZW50IH07CiAgICByZXR1cm4gQ0FDSEVbdWlkXTsKICB9CgogIGZ1bmN0aW9uIGRlc3Ryb3lSZWdpc3RyeUZvckVsZW1lbnQoZWxlbWVudCwgdWlkKSB7CiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHVpZCkpCiAgICAgIHVpZCA9IGdldFVuaXF1ZUVsZW1lbnRJRChlbGVtZW50KTsKICAgIGRlbGV0ZSBHTE9CQUwuRXZlbnQuY2FjaGVbdWlkXTsKICB9CgoKICBmdW5jdGlvbiByZWdpc3RlcihlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIHZhciByZWdpc3RyeSA9IGdldFJlZ2lzdHJ5Rm9yRWxlbWVudChlbGVtZW50KTsKICAgIGlmICghcmVnaXN0cnlbZXZlbnROYW1lXSkgcmVnaXN0cnlbZXZlbnROYW1lXSA9IFtdOwogICAgdmFyIGVudHJpZXMgPSByZWdpc3RyeVtldmVudE5hbWVdOwoKICAgIHZhciBpID0gZW50cmllcy5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKQogICAgICBpZiAoZW50cmllc1tpXS5oYW5kbGVyID09PSBoYW5kbGVyKSByZXR1cm4gbnVsbDsKCiAgICB2YXIgdWlkID0gZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpOwogICAgdmFyIHJlc3BvbmRlciA9IEdMT0JBTC5FdmVudC5fY3JlYXRlUmVzcG9uZGVyKHVpZCwgZXZlbnROYW1lLCBoYW5kbGVyKTsKICAgIHZhciBlbnRyeSA9IHsKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIGhhbmRsZXI6ICAgaGFuZGxlcgogICAgfTsKCiAgICBlbnRyaWVzLnB1c2goZW50cnkpOwogICAgcmV0dXJuIGVudHJ5OwogIH0KCiAgZnVuY3Rpb24gdW5yZWdpc3RlcihlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIHZhciByZWdpc3RyeSA9IGdldFJlZ2lzdHJ5Rm9yRWxlbWVudChlbGVtZW50KTsKICAgIHZhciBlbnRyaWVzID0gcmVnaXN0cnlbZXZlbnROYW1lXTsKICAgIGlmICghZW50cmllcykgcmV0dXJuOwoKICAgIHZhciBpID0gZW50cmllcy5sZW5ndGgsIGVudHJ5OwogICAgd2hpbGUgKGktLSkgewogICAgICBpZiAoZW50cmllc1tpXS5oYW5kbGVyID09PSBoYW5kbGVyKSB7CiAgICAgICAgZW50cnkgPSBlbnRyaWVzW2ldOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgaWYgKCFlbnRyeSkgcmV0dXJuOwoKICAgIHZhciBpbmRleCA9IGVudHJpZXMuaW5kZXhPZihlbnRyeSk7CiAgICBlbnRyaWVzLnNwbGljZShpbmRleCwgMSk7CgogICAgcmV0dXJuIGVudHJ5OwogIH0KCgogIGZ1bmN0aW9uIG9ic2VydmUoZWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciBlbnRyeSA9IHJlZ2lzdGVyKGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcik7CgogICAgaWYgKGVudHJ5ID09PSBudWxsKSByZXR1cm4gZWxlbWVudDsKCiAgICB2YXIgcmVzcG9uZGVyID0gZW50cnkucmVzcG9uZGVyOwogICAgaWYgKGlzQ3VzdG9tRXZlbnQoZXZlbnROYW1lKSkKICAgICAgb2JzZXJ2ZUN1c3RvbUV2ZW50KGVsZW1lbnQsIGV2ZW50TmFtZSwgcmVzcG9uZGVyKTsKICAgIGVsc2UKICAgICAgb2JzZXJ2ZVN0YW5kYXJkRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCByZXNwb25kZXIpOwoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gb2JzZXJ2ZVN0YW5kYXJkRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCByZXNwb25kZXIpIHsKICAgIHZhciBhY3R1YWxFdmVudE5hbWUgPSBnZXRET01FdmVudE5hbWUoZXZlbnROYW1lKTsKICAgIGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGFjdHVhbEV2ZW50TmFtZSwgcmVzcG9uZGVyLCBmYWxzZSk7CiAgICB9IGVsc2UgewogICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCdvbicgKyBhY3R1YWxFdmVudE5hbWUsIHJlc3BvbmRlcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvYnNlcnZlQ3VzdG9tRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCByZXNwb25kZXIpIHsKICAgIGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkYXRhYXZhaWxhYmxlJywgcmVzcG9uZGVyLCBmYWxzZSk7CiAgICB9IGVsc2UgewogICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCdvbmRhdGFhdmFpbGFibGUnLCByZXNwb25kZXIpOwogICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCdvbmxvc2VjYXB0dXJlJywgICByZXNwb25kZXIpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gc3RvcE9ic2VydmluZyhlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIGhhbmRsZXJHaXZlbiA9ICFPYmplY3QuaXNVbmRlZmluZWQoaGFuZGxlciksCiAgICAgZXZlbnROYW1lR2l2ZW4gPSAhT2JqZWN0LmlzVW5kZWZpbmVkKGV2ZW50TmFtZSk7CgogICAgaWYgKCFldmVudE5hbWVHaXZlbiAmJiAhaGFuZGxlckdpdmVuKSB7CiAgICAgIHN0b3BPYnNlcnZpbmdFbGVtZW50KGVsZW1lbnQpOwogICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICBpZiAoIWhhbmRsZXJHaXZlbikgewogICAgICBzdG9wT2JzZXJ2aW5nRXZlbnROYW1lKGVsZW1lbnQsIGV2ZW50TmFtZSk7CiAgICAgIHJldHVybiBlbGVtZW50OwogICAgfQoKICAgIHZhciBlbnRyeSA9IHVucmVnaXN0ZXIoZWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKTsKCiAgICBpZiAoIWVudHJ5KSByZXR1cm4gZWxlbWVudDsKICAgIHJlbW92ZUV2ZW50KGVsZW1lbnQsIGV2ZW50TmFtZSwgZW50cnkucmVzcG9uZGVyKTsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gc3RvcE9ic2VydmluZ1N0YW5kYXJkRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCByZXNwb25kZXIpIHsKICAgIHZhciBhY3R1YWxFdmVudE5hbWUgPSBnZXRET01FdmVudE5hbWUoZXZlbnROYW1lKTsKICAgIGlmIChlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHsKICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGFjdHVhbEV2ZW50TmFtZSwgcmVzcG9uZGVyLCBmYWxzZSk7CiAgICB9IGVsc2UgewogICAgICBlbGVtZW50LmRldGFjaEV2ZW50KCdvbicgKyBhY3R1YWxFdmVudE5hbWUsIHJlc3BvbmRlcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzdG9wT2JzZXJ2aW5nQ3VzdG9tRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCByZXNwb25kZXIpIHsKICAgIGlmIChlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHsKICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkYXRhYXZhaWxhYmxlJywgcmVzcG9uZGVyLCBmYWxzZSk7CiAgICB9IGVsc2UgewogICAgICBlbGVtZW50LmRldGFjaEV2ZW50KCdvbmRhdGFhdmFpbGFibGUnLCByZXNwb25kZXIpOwogICAgICBlbGVtZW50LmRldGFjaEV2ZW50KCdvbmxvc2VjYXB0dXJlJywgICByZXNwb25kZXIpOwogICAgfQogIH0KCgoKICBmdW5jdGlvbiBzdG9wT2JzZXJ2aW5nRWxlbWVudChlbGVtZW50KSB7CiAgICB2YXIgdWlkID0gZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpLCByZWdpc3RyeSA9IEdMT0JBTC5FdmVudC5jYWNoZVt1aWRdOwogICAgaWYgKCFyZWdpc3RyeSkgcmV0dXJuOwoKICAgIGRlc3Ryb3lSZWdpc3RyeUZvckVsZW1lbnQoZWxlbWVudCwgdWlkKTsKCiAgICB2YXIgZW50cmllcywgaTsKICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiByZWdpc3RyeSkgewogICAgICBpZiAoZXZlbnROYW1lID09PSAnZWxlbWVudCcpIGNvbnRpbnVlOwoKICAgICAgZW50cmllcyA9IHJlZ2lzdHJ5W2V2ZW50TmFtZV07CiAgICAgIGkgPSBlbnRyaWVzLmxlbmd0aDsKICAgICAgd2hpbGUgKGktLSkKICAgICAgICByZW1vdmVFdmVudChlbGVtZW50LCBldmVudE5hbWUsIGVudHJpZXNbaV0ucmVzcG9uZGVyKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHN0b3BPYnNlcnZpbmdFdmVudE5hbWUoZWxlbWVudCwgZXZlbnROYW1lKSB7CiAgICB2YXIgcmVnaXN0cnkgPSBnZXRSZWdpc3RyeUZvckVsZW1lbnQoZWxlbWVudCk7CiAgICB2YXIgZW50cmllcyA9IHJlZ2lzdHJ5W2V2ZW50TmFtZV07CiAgICBpZiAoIWVudHJpZXMpIHJldHVybjsKICAgIGRlbGV0ZSByZWdpc3RyeVtldmVudE5hbWVdOwoKICAgIHZhciBpID0gZW50cmllcy5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKQogICAgICByZW1vdmVFdmVudChlbGVtZW50LCBldmVudE5hbWUsIGVudHJpZXNbaV0ucmVzcG9uZGVyKTsKICB9CgoKICBmdW5jdGlvbiByZW1vdmVFdmVudChlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIGlmIChpc0N1c3RvbUV2ZW50KGV2ZW50TmFtZSkpCiAgICAgIHN0b3BPYnNlcnZpbmdDdXN0b21FdmVudChlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpOwogICAgZWxzZQogICAgICBzdG9wT2JzZXJ2aW5nU3RhbmRhcmRFdmVudChlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpOwogIH0KCgoKICBmdW5jdGlvbiBnZXRGaXJlVGFyZ2V0KGVsZW1lbnQpIHsKICAgIGlmIChlbGVtZW50ICE9PSBkb2N1bWVudCkgcmV0dXJuIGVsZW1lbnQ7CiAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQgJiYgIWVsZW1lbnQuZGlzcGF0Y2hFdmVudCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gZmlyZShlbGVtZW50LCBldmVudE5hbWUsIG1lbW8sIGJ1YmJsZSkgewogICAgZWxlbWVudCA9IGdldEZpcmVUYXJnZXQoJChlbGVtZW50KSk7CiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKGJ1YmJsZSkpIGJ1YmJsZSA9IHRydWU7CiAgICBtZW1vID0gbWVtbyB8fCB7fTsKCiAgICB2YXIgZXZlbnQgPSBmaXJlRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCBtZW1vLCBidWJibGUpOwogICAgcmV0dXJuIEV2ZW50LmV4dGVuZChldmVudCk7CiAgfQoKICBmdW5jdGlvbiBmaXJlRXZlbnRfRE9NKGVsZW1lbnQsIGV2ZW50TmFtZSwgbWVtbywgYnViYmxlKSB7CiAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpOwogICAgZXZlbnQuaW5pdEV2ZW50KCdkYXRhYXZhaWxhYmxlJywgYnViYmxlLCB0cnVlKTsKCiAgICBldmVudC5ldmVudE5hbWUgPSBldmVudE5hbWU7CiAgICBldmVudC5tZW1vID0gbWVtbzsKCiAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgcmV0dXJuIGV2ZW50OwogIH0KCiAgZnVuY3Rpb24gZmlyZUV2ZW50X0lFKGVsZW1lbnQsIGV2ZW50TmFtZSwgbWVtbywgYnViYmxlKSB7CiAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpOwogICAgZXZlbnQuZXZlbnRUeXBlID0gYnViYmxlID8gJ29uZGF0YWF2YWlsYWJsZScgOiAnb25sb3NlY2FwdHVyZSc7CgogICAgZXZlbnQuZXZlbnROYW1lID0gZXZlbnROYW1lOwogICAgZXZlbnQubWVtbyA9IG1lbW87CgogICAgZWxlbWVudC5maXJlRXZlbnQoZXZlbnQuZXZlbnRUeXBlLCBldmVudCk7CiAgICByZXR1cm4gZXZlbnQ7CiAgfQoKICB2YXIgZmlyZUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQgPyBmaXJlRXZlbnRfRE9NIDogZmlyZUV2ZW50X0lFOwoKCgogIEV2ZW50LkhhbmRsZXIgPSBDbGFzcy5jcmVhdGUoewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spIHsKICAgICAgdGhpcy5lbGVtZW50ICAgPSAkKGVsZW1lbnQpOwogICAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTsKICAgICAgdGhpcy5zZWxlY3RvciAgPSBzZWxlY3RvcjsKICAgICAgdGhpcy5jYWxsYmFjayAgPSBjYWxsYmFjazsKICAgICAgdGhpcy5oYW5kbGVyICAgPSB0aGlzLmhhbmRsZUV2ZW50LmJpbmQodGhpcyk7CiAgICB9LAoKCiAgICBzdGFydDogZnVuY3Rpb24oKSB7CiAgICAgIEV2ZW50Lm9ic2VydmUodGhpcy5lbGVtZW50LCB0aGlzLmV2ZW50TmFtZSwgdGhpcy5oYW5kbGVyKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAoKICAgIHN0b3A6IGZ1bmN0aW9uKCkgewogICAgICBFdmVudC5zdG9wT2JzZXJ2aW5nKHRoaXMuZWxlbWVudCwgdGhpcy5ldmVudE5hbWUsIHRoaXMuaGFuZGxlcik7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSwKCiAgICBoYW5kbGVFdmVudDogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgdmFyIGVsZW1lbnQgPSBFdmVudC5maW5kRWxlbWVudChldmVudCwgdGhpcy5zZWxlY3Rvcik7CiAgICAgIGlmIChlbGVtZW50KSB0aGlzLmNhbGxiYWNrLmNhbGwodGhpcy5lbGVtZW50LCBldmVudCwgZWxlbWVudCk7CiAgICB9CiAgfSk7CgogIGZ1bmN0aW9uIG9uKGVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihzZWxlY3RvcikgJiYgT2JqZWN0LmlzVW5kZWZpbmVkKGNhbGxiYWNrKSkgewogICAgICBjYWxsYmFjayA9IHNlbGVjdG9yLCBzZWxlY3RvciA9IG51bGw7CiAgICB9CgogICAgcmV0dXJuIG5ldyBFdmVudC5IYW5kbGVyKGVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKS5zdGFydCgpOwogIH0KCiAgT2JqZWN0LmV4dGVuZChFdmVudCwgRXZlbnQuTWV0aG9kcyk7CgogIE9iamVjdC5leHRlbmQoRXZlbnQsIHsKICAgIGZpcmU6ICAgICAgICAgIGZpcmUsCiAgICBvYnNlcnZlOiAgICAgICBvYnNlcnZlLAogICAgc3RvcE9ic2VydmluZzogc3RvcE9ic2VydmluZywKICAgIG9uOiAgICAgICAgICAgIG9uCiAgfSk7CgogIEVsZW1lbnQuYWRkTWV0aG9kcyh7CiAgICBmaXJlOiAgICAgICAgICBmaXJlLAoKICAgIG9ic2VydmU6ICAgICAgIG9ic2VydmUsCgogICAgc3RvcE9ic2VydmluZzogc3RvcE9ic2VydmluZywKCiAgICBvbjogICAgICAgICAgICBvbgogIH0pOwoKICBPYmplY3QuZXh0ZW5kKGRvY3VtZW50LCB7CiAgICBmaXJlOiAgICAgICAgICBmaXJlLm1ldGhvZGl6ZSgpLAoKICAgIG9ic2VydmU6ICAgICAgIG9ic2VydmUubWV0aG9kaXplKCksCgogICAgc3RvcE9ic2VydmluZzogc3RvcE9ic2VydmluZy5tZXRob2RpemUoKSwKCiAgICBvbjogICAgICAgICAgICBvbi5tZXRob2RpemUoKSwKCiAgICBsb2FkZWQ6ICAgICAgICBmYWxzZQogIH0pOwoKICBpZiAoR0xPQkFMLkV2ZW50KSBPYmplY3QuZXh0ZW5kKHdpbmRvdy5FdmVudCwgRXZlbnQpOwogIGVsc2UgR0xPQkFMLkV2ZW50ID0gRXZlbnQ7CgogIEdMT0JBTC5FdmVudC5jYWNoZSA9IHt9OwoKICBmdW5jdGlvbiBkZXN0cm95Q2FjaGVfSUUoKSB7CiAgICBHTE9CQUwuRXZlbnQuY2FjaGUgPSBudWxsOwogIH0KCiAgaWYgKHdpbmRvdy5hdHRhY2hFdmVudCkKICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb251bmxvYWQnLCBkZXN0cm95Q2FjaGVfSUUpOwoKICBESVYgPSBudWxsOwogIGRvY0VsID0gbnVsbDsKfSkodGhpcyk7CgooZnVuY3Rpb24oR0xPQkFMKSB7CiAgLyogQ29kZSBmb3IgY3JlYXRpbmcgbGVhay1mcmVlIGV2ZW50IHJlc3BvbmRlcnMgaXMgYmFzZWQgb24gd29yayBieQogICBKb2huLURhdmlkIERhbHRvbi4gKi8KCiAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogIHZhciBNT1VTRUVOVEVSX01PVVNFTEVBVkVfRVZFTlRTX1NVUFBPUlRFRCA9ICdvbm1vdXNlZW50ZXInIGluIGRvY0VsCiAgICAmJiAnb25tb3VzZWxlYXZlJyBpbiBkb2NFbDsKCiAgZnVuY3Rpb24gaXNTaW11bGF0ZWRNb3VzZUVudGVyTGVhdmVFdmVudChldmVudE5hbWUpIHsKICAgIHJldHVybiAhTU9VU0VFTlRFUl9NT1VTRUxFQVZFX0VWRU5UU19TVVBQT1JURUQgJiYKICAgICAoZXZlbnROYW1lID09PSAnbW91c2VlbnRlcicgfHwgZXZlbnROYW1lID09PSAnbW91c2VsZWF2ZScpOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlUmVzcG9uZGVyKHVpZCwgZXZlbnROYW1lLCBoYW5kbGVyKSB7CiAgICBpZiAoRXZlbnQuX2lzQ3VzdG9tRXZlbnQoZXZlbnROYW1lKSkKICAgICAgcmV0dXJuIGNyZWF0ZVJlc3BvbmRlckZvckN1c3RvbUV2ZW50KHVpZCwgZXZlbnROYW1lLCBoYW5kbGVyKTsKICAgIGlmIChpc1NpbXVsYXRlZE1vdXNlRW50ZXJMZWF2ZUV2ZW50KGV2ZW50TmFtZSkpCiAgICAgIHJldHVybiBjcmVhdGVNb3VzZUVudGVyTGVhdmVSZXNwb25kZXIodWlkLCBldmVudE5hbWUsIGhhbmRsZXIpOwoKICAgIHJldHVybiBmdW5jdGlvbihldmVudCkgewogICAgICBpZiAoIUV2ZW50LmNhY2hlKSByZXR1cm47CgogICAgICB2YXIgZWxlbWVudCA9IEV2ZW50LmNhY2hlW3VpZF0uZWxlbWVudDsKICAgICAgRXZlbnQuZXh0ZW5kKGV2ZW50LCBlbGVtZW50KTsKICAgICAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2ZW50KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVSZXNwb25kZXJGb3JDdXN0b21FdmVudCh1aWQsIGV2ZW50TmFtZSwgaGFuZGxlcikgewogICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIHZhciBlbGVtZW50ID0gRXZlbnQuY2FjaGVbdWlkXS5lbGVtZW50OwoKICAgICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChldmVudC5ldmVudE5hbWUpKQogICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgIGlmIChldmVudC5ldmVudE5hbWUgIT09IGV2ZW50TmFtZSkKICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICBFdmVudC5leHRlbmQoZXZlbnQsIGVsZW1lbnQpOwogICAgICBoYW5kbGVyLmNhbGwoZWxlbWVudCwgZXZlbnQpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZU1vdXNlRW50ZXJMZWF2ZVJlc3BvbmRlcih1aWQsIGV2ZW50TmFtZSwgaGFuZGxlcikgewogICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIHZhciBlbGVtZW50ID0gRXZlbnQuY2FjaGVbdWlkXS5lbGVtZW50OwoKICAgICAgRXZlbnQuZXh0ZW5kKGV2ZW50LCBlbGVtZW50KTsKICAgICAgdmFyIHBhcmVudCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7CgogICAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudCAhPT0gZWxlbWVudCkgewogICAgICAgIHRyeSB7IHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlOyB9CiAgICAgICAgY2F0Y2goZSkgeyBwYXJlbnQgPSBlbGVtZW50OyB9CiAgICAgIH0KCiAgICAgIGlmIChwYXJlbnQgPT09IGVsZW1lbnQpIHJldHVybjsKICAgICAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2ZW50KTsKICAgIH0KICB9CgogIEdMT0JBTC5FdmVudC5fY3JlYXRlUmVzcG9uZGVyID0gY3JlYXRlUmVzcG9uZGVyOwogIGRvY0VsID0gbnVsbDsKfSkodGhpcyk7CgooZnVuY3Rpb24oR0xPQkFMKSB7CiAgLyogU3VwcG9ydCBmb3IgdGhlIERPTUNvbnRlbnRMb2FkZWQgZXZlbnQgaXMgYmFzZWQgb24gd29yayBieSBEYW4gV2ViYiwKICAgICBNYXR0aGlhcyBNaWxsZXIsIERlYW4gRWR3YXJkcywgSm9obiBSZXNpZywgYW5kIERpZWdvIFBlcmluaS4gKi8KCiAgdmFyIFRJTUVSOwoKICBmdW5jdGlvbiBmaXJlQ29udGVudExvYWRlZEV2ZW50KCkgewogICAgaWYgKGRvY3VtZW50LmxvYWRlZCkgcmV0dXJuOwogICAgaWYgKFRJTUVSKSB3aW5kb3cuY2xlYXJUaW1lb3V0KFRJTUVSKTsKICAgIGRvY3VtZW50LmxvYWRlZCA9IHRydWU7CiAgICBkb2N1bWVudC5maXJlKCdkb206bG9hZGVkJyk7CiAgfQoKICBmdW5jdGlvbiBjaGVja1JlYWR5U3RhdGUoKSB7CiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykgewogICAgICBkb2N1bWVudC5kZXRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgY2hlY2tSZWFkeVN0YXRlKTsKICAgICAgZmlyZUNvbnRlbnRMb2FkZWRFdmVudCgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcG9sbERvU2Nyb2xsKCkgewogICAgdHJ5IHsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKCdsZWZ0Jyk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIFRJTUVSID0gcG9sbERvU2Nyb2xsLmRlZmVyKCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBmaXJlQ29udGVudExvYWRlZEV2ZW50KCk7CiAgfQoKCiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHsKICAgIGZpcmVDb250ZW50TG9hZGVkRXZlbnQoKTsKICAgIHJldHVybjsKICB9CgogIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZmlyZUNvbnRlbnRMb2FkZWRFdmVudCwgZmFsc2UpOwogIH0gZWxzZSB7CiAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgY2hlY2tSZWFkeVN0YXRlKTsKICAgIGlmICh3aW5kb3cgPT0gdG9wKSBUSU1FUiA9IHBvbGxEb1Njcm9sbC5kZWZlcigpOwogIH0KCiAgRXZlbnQub2JzZXJ2ZSh3aW5kb3csICdsb2FkJywgZmlyZUNvbnRlbnRMb2FkZWRFdmVudCk7Cn0pKHRoaXMpOwoKCkVsZW1lbnQuYWRkTWV0aG9kcygpOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gREVQUkVDQVRFRCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCkhhc2gudG9RdWVyeVN0cmluZyA9IE9iamVjdC50b1F1ZXJ5U3RyaW5nOwoKdmFyIFRvZ2dsZSA9IHsgZGlzcGxheTogRWxlbWVudC50b2dnbGUgfTsKCkVsZW1lbnQuTWV0aG9kcy5jaGlsZE9mID0gRWxlbWVudC5NZXRob2RzLmRlc2NlbmRhbnRPZjsKCnZhciBJbnNlcnRpb24gPSB7CiAgQmVmb3JlOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50KSB7CiAgICByZXR1cm4gRWxlbWVudC5pbnNlcnQoZWxlbWVudCwge2JlZm9yZTpjb250ZW50fSk7CiAgfSwKCiAgVG9wOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50KSB7CiAgICByZXR1cm4gRWxlbWVudC5pbnNlcnQoZWxlbWVudCwge3RvcDpjb250ZW50fSk7CiAgfSwKCiAgQm90dG9tOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50KSB7CiAgICByZXR1cm4gRWxlbWVudC5pbnNlcnQoZWxlbWVudCwge2JvdHRvbTpjb250ZW50fSk7CiAgfSwKCiAgQWZ0ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIGNvbnRlbnQpIHsKICAgIHJldHVybiBFbGVtZW50Lmluc2VydChlbGVtZW50LCB7YWZ0ZXI6Y29udGVudH0pOwogIH0KfTsKCnZhciAkY29udGludWUgPSBuZXcgRXJyb3IoJyJ0aHJvdyAkY29udGludWUiIGlzIGRlcHJlY2F0ZWQsIHVzZSAicmV0dXJuIiBpbnN0ZWFkJyk7Cgp2YXIgUG9zaXRpb24gPSB7CiAgaW5jbHVkZVNjcm9sbE9mZnNldHM6IGZhbHNlLAoKICBwcmVwYXJlOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuZGVsdGFYID0gIHdpbmRvdy5wYWdlWE9mZnNldAogICAgICAgICAgICAgICAgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQKICAgICAgICAgICAgICAgIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdAogICAgICAgICAgICAgICAgfHwgMDsKICAgIHRoaXMuZGVsdGFZID0gIHdpbmRvdy5wYWdlWU9mZnNldAogICAgICAgICAgICAgICAgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcAogICAgICAgICAgICAgICAgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AKICAgICAgICAgICAgICAgIHx8IDA7CiAgfSwKCiAgd2l0aGluOiBmdW5jdGlvbihlbGVtZW50LCB4LCB5KSB7CiAgICBpZiAodGhpcy5pbmNsdWRlU2Nyb2xsT2Zmc2V0cykKICAgICAgcmV0dXJuIHRoaXMud2l0aGluSW5jbHVkaW5nU2Nyb2xsb2Zmc2V0cyhlbGVtZW50LCB4LCB5KTsKICAgIHRoaXMueGNvbXAgPSB4OwogICAgdGhpcy55Y29tcCA9IHk7CiAgICB0aGlzLm9mZnNldCA9IEVsZW1lbnQuY3VtdWxhdGl2ZU9mZnNldChlbGVtZW50KTsKCiAgICByZXR1cm4gKHkgPj0gdGhpcy5vZmZzZXRbMV0gJiYKICAgICAgICAgICAgeSA8ICB0aGlzLm9mZnNldFsxXSArIGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICYmCiAgICAgICAgICAgIHggPj0gdGhpcy5vZmZzZXRbMF0gJiYKICAgICAgICAgICAgeCA8ICB0aGlzLm9mZnNldFswXSArIGVsZW1lbnQub2Zmc2V0V2lkdGgpOwogIH0sCgogIHdpdGhpbkluY2x1ZGluZ1Njcm9sbG9mZnNldHM6IGZ1bmN0aW9uKGVsZW1lbnQsIHgsIHkpIHsKICAgIHZhciBvZmZzZXRjYWNoZSA9IEVsZW1lbnQuY3VtdWxhdGl2ZVNjcm9sbE9mZnNldChlbGVtZW50KTsKCiAgICB0aGlzLnhjb21wID0geCArIG9mZnNldGNhY2hlWzBdIC0gdGhpcy5kZWx0YVg7CiAgICB0aGlzLnljb21wID0geSArIG9mZnNldGNhY2hlWzFdIC0gdGhpcy5kZWx0YVk7CiAgICB0aGlzLm9mZnNldCA9IEVsZW1lbnQuY3VtdWxhdGl2ZU9mZnNldChlbGVtZW50KTsKCiAgICByZXR1cm4gKHRoaXMueWNvbXAgPj0gdGhpcy5vZmZzZXRbMV0gJiYKICAgICAgICAgICAgdGhpcy55Y29tcCA8ICB0aGlzLm9mZnNldFsxXSArIGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICYmCiAgICAgICAgICAgIHRoaXMueGNvbXAgPj0gdGhpcy5vZmZzZXRbMF0gJiYKICAgICAgICAgICAgdGhpcy54Y29tcCA8ICB0aGlzLm9mZnNldFswXSArIGVsZW1lbnQub2Zmc2V0V2lkdGgpOwogIH0sCgogIG92ZXJsYXA6IGZ1bmN0aW9uKG1vZGUsIGVsZW1lbnQpIHsKICAgIGlmICghbW9kZSkgcmV0dXJuIDA7CiAgICBpZiAobW9kZSA9PSAndmVydGljYWwnKQogICAgICByZXR1cm4gKCh0aGlzLm9mZnNldFsxXSArIGVsZW1lbnQub2Zmc2V0SGVpZ2h0KSAtIHRoaXMueWNvbXApIC8KICAgICAgICBlbGVtZW50Lm9mZnNldEhlaWdodDsKICAgIGlmIChtb2RlID09ICdob3Jpem9udGFsJykKICAgICAgcmV0dXJuICgodGhpcy5vZmZzZXRbMF0gKyBlbGVtZW50Lm9mZnNldFdpZHRoKSAtIHRoaXMueGNvbXApIC8KICAgICAgICBlbGVtZW50Lm9mZnNldFdpZHRoOwogIH0sCgoKICBjdW11bGF0aXZlT2Zmc2V0OiBFbGVtZW50Lk1ldGhvZHMuY3VtdWxhdGl2ZU9mZnNldCwKCiAgcG9zaXRpb25lZE9mZnNldDogRWxlbWVudC5NZXRob2RzLnBvc2l0aW9uZWRPZmZzZXQsCgogIGFic29sdXRpemU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIFBvc2l0aW9uLnByZXBhcmUoKTsKICAgIHJldHVybiBFbGVtZW50LmFic29sdXRpemUoZWxlbWVudCk7CiAgfSwKCiAgcmVsYXRpdml6ZTogZnVuY3Rpb24oZWxlbWVudCkgewogICAgUG9zaXRpb24ucHJlcGFyZSgpOwogICAgcmV0dXJuIEVsZW1lbnQucmVsYXRpdml6ZShlbGVtZW50KTsKICB9LAoKICByZWFsT2Zmc2V0OiBFbGVtZW50Lk1ldGhvZHMuY3VtdWxhdGl2ZVNjcm9sbE9mZnNldCwKCiAgb2Zmc2V0UGFyZW50OiBFbGVtZW50Lk1ldGhvZHMuZ2V0T2Zmc2V0UGFyZW50LAoKICBwYWdlOiBFbGVtZW50Lk1ldGhvZHMudmlld3BvcnRPZmZzZXQsCgogIGNsb25lOiBmdW5jdGlvbihzb3VyY2UsIHRhcmdldCwgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyB9OwogICAgcmV0dXJuIEVsZW1lbnQuY2xvbmVQb3NpdGlvbih0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucyk7CiAgfQp9OwoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgppZiAoIWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBmdW5jdGlvbihpbnN0YW5jZU1ldGhvZHMpewogIGZ1bmN0aW9uIGl0ZXIobmFtZSkgewogICAgcmV0dXJuIG5hbWUuYmxhbmsoKSA/IG51bGwgOiAiW2NvbnRhaW5zKGNvbmNhdCgnICcsIEBjbGFzcywgJyAnKSwgJyAiICsgbmFtZSArICIgJyldIjsKICB9CgogIGluc3RhbmNlTWV0aG9kcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gUHJvdG90eXBlLkJyb3dzZXJGZWF0dXJlcy5YUGF0aCA/CiAgZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lKSB7CiAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUudG9TdHJpbmcoKS5zdHJpcCgpOwogICAgdmFyIGNvbmQgPSAvXHMvLnRlc3QoY2xhc3NOYW1lKSA/ICR3KGNsYXNzTmFtZSkubWFwKGl0ZXIpLmpvaW4oJycpIDogaXRlcihjbGFzc05hbWUpOwogICAgcmV0dXJuIGNvbmQgPyBkb2N1bWVudC5fZ2V0RWxlbWVudHNCeVhQYXRoKCcuLy8qJyArIGNvbmQsIGVsZW1lbnQpIDogW107CiAgfSA6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSkgewogICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnRvU3RyaW5nKCkuc3RyaXAoKTsKICAgIHZhciBlbGVtZW50cyA9IFtdLCBjbGFzc05hbWVzID0gKC9ccy8udGVzdChjbGFzc05hbWUpID8gJHcoY2xhc3NOYW1lKSA6IG51bGwpOwogICAgaWYgKCFjbGFzc05hbWVzICYmICFjbGFzc05hbWUpIHJldHVybiBlbGVtZW50czsKCiAgICB2YXIgbm9kZXMgPSAkKGVsZW1lbnQpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJyk7CiAgICBjbGFzc05hbWUgPSAnICcgKyBjbGFzc05hbWUgKyAnICc7CgogICAgZm9yICh2YXIgaSA9IDAsIGNoaWxkLCBjbjsgY2hpbGQgPSBub2Rlc1tpXTsgaSsrKSB7CiAgICAgIGlmIChjaGlsZC5jbGFzc05hbWUgJiYgKGNuID0gJyAnICsgY2hpbGQuY2xhc3NOYW1lICsgJyAnKSAmJiAoY24uaW5jbHVkZShjbGFzc05hbWUpIHx8CiAgICAgICAgICAoY2xhc3NOYW1lcyAmJiBjbGFzc05hbWVzLmFsbChmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiAhbmFtZS50b1N0cmluZygpLmJsYW5rKCkgJiYgY24uaW5jbHVkZSgnICcgKyBuYW1lICsgJyAnKTsKICAgICAgICAgIH0pKSkpCiAgICAgICAgZWxlbWVudHMucHVzaChFbGVtZW50LmV4dGVuZChjaGlsZCkpOwogICAgfQogICAgcmV0dXJuIGVsZW1lbnRzOwogIH07CgogIHJldHVybiBmdW5jdGlvbihjbGFzc05hbWUsIHBhcmVudEVsZW1lbnQpIHsKICAgIHJldHVybiAkKHBhcmVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpOwogIH07Cn0oRWxlbWVudC5NZXRob2RzKTsKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKRWxlbWVudC5DbGFzc05hbWVzID0gQ2xhc3MuY3JlYXRlKCk7CkVsZW1lbnQuQ2xhc3NOYW1lcy5wcm90b3R5cGUgPSB7CiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZWxlbWVudCkgewogICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KTsKICB9LAoKICBfZWFjaDogZnVuY3Rpb24oaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoL1xzKy8pLnNlbGVjdChmdW5jdGlvbihuYW1lKSB7CiAgICAgIHJldHVybiBuYW1lLmxlbmd0aCA+IDA7CiAgICB9KS5fZWFjaChpdGVyYXRvciwgY29udGV4dCk7CiAgfSwKCiAgc2V0OiBmdW5jdGlvbihjbGFzc05hbWUpIHsKICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7CiAgfSwKCiAgYWRkOiBmdW5jdGlvbihjbGFzc05hbWVUb0FkZCkgewogICAgaWYgKHRoaXMuaW5jbHVkZShjbGFzc05hbWVUb0FkZCkpIHJldHVybjsKICAgIHRoaXMuc2V0KCRBKHRoaXMpLmNvbmNhdChjbGFzc05hbWVUb0FkZCkuam9pbignICcpKTsKICB9LAoKICByZW1vdmU6IGZ1bmN0aW9uKGNsYXNzTmFtZVRvUmVtb3ZlKSB7CiAgICBpZiAoIXRoaXMuaW5jbHVkZShjbGFzc05hbWVUb1JlbW92ZSkpIHJldHVybjsKICAgIHRoaXMuc2V0KCRBKHRoaXMpLndpdGhvdXQoY2xhc3NOYW1lVG9SZW1vdmUpLmpvaW4oJyAnKSk7CiAgfSwKCiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuICRBKHRoaXMpLmpvaW4oJyAnKTsKICB9Cn07CgpPYmplY3QuZXh0ZW5kKEVsZW1lbnQuQ2xhc3NOYW1lcy5wcm90b3R5cGUsIEVudW1lcmFibGUpOwoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgooZnVuY3Rpb24oKSB7CiAgd2luZG93LlNlbGVjdG9yID0gQ2xhc3MuY3JlYXRlKHsKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHsKICAgICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbi5zdHJpcCgpOwogICAgfSwKCiAgICBmaW5kRWxlbWVudHM6IGZ1bmN0aW9uKHJvb3RFbGVtZW50KSB7CiAgICAgIHJldHVybiBQcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0KHRoaXMuZXhwcmVzc2lvbiwgcm9vdEVsZW1lbnQpOwogICAgfSwKCiAgICBtYXRjaDogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gUHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoKGVsZW1lbnQsIHRoaXMuZXhwcmVzc2lvbik7CiAgICB9LAoKICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbjsKICAgIH0sCgogICAgaW5zcGVjdDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAiIzxTZWxlY3RvcjogIiArIHRoaXMuZXhwcmVzc2lvbiArICI+IjsKICAgIH0KICB9KTsKCiAgT2JqZWN0LmV4dGVuZChTZWxlY3RvciwgewogICAgbWF0Y2hFbGVtZW50czogZnVuY3Rpb24oZWxlbWVudHMsIGV4cHJlc3Npb24pIHsKICAgICAgdmFyIG1hdGNoID0gUHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoLAogICAgICAgICAgcmVzdWx0cyA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTsKICAgICAgICBpZiAobWF0Y2goZWxlbWVudCwgZXhwcmVzc2lvbikpIHsKICAgICAgICAgIHJlc3VsdHMucHVzaChFbGVtZW50LmV4dGVuZChlbGVtZW50KSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHRzOwogICAgfSwKCiAgICBmaW5kRWxlbWVudDogZnVuY3Rpb24oZWxlbWVudHMsIGV4cHJlc3Npb24sIGluZGV4KSB7CiAgICAgIGluZGV4ID0gaW5kZXggfHwgMDsKICAgICAgdmFyIG1hdGNoSW5kZXggPSAwLCBlbGVtZW50OwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBlbGVtZW50ID0gZWxlbWVudHNbaV07CiAgICAgICAgaWYgKFByb3RvdHlwZS5TZWxlY3Rvci5tYXRjaChlbGVtZW50LCBleHByZXNzaW9uKSAmJiBpbmRleCA9PT0gbWF0Y2hJbmRleCsrKSB7CiAgICAgICAgICByZXR1cm4gRWxlbWVudC5leHRlbmQoZWxlbWVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGZpbmRDaGlsZEVsZW1lbnRzOiBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9ucykgewogICAgICB2YXIgc2VsZWN0b3IgPSBleHByZXNzaW9ucy50b0FycmF5KCkuam9pbignLCAnKTsKICAgICAgcmV0dXJuIFByb3RvdHlwZS5TZWxlY3Rvci5zZWxlY3Qoc2VsZWN0b3IsIGVsZW1lbnQgfHwgZG9jdW1lbnQpOwogICAgfQogIH0pOwp9KSgpOwo="></script>
  <script type="text/javascript"
    src="data:text/javascript;base64,Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtCi8vIGR1bmdlb24vbWFwX3N0eWxlLmpzCi8vCi8vIGNvcHlyaWdodCAoYykgMjAxMS0yMDE3IGRyb3cgPGRyb3dAYmluLnNoPgovLyBhbGwgcmlnaHRzIHJlc2VydmVkLgoKLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtCi8vIHVwZGF0ZSBpbWFnZQoKICBmdW5jdGlvbiB1cGRhdGVfaW1nIChmaWVsZCkgewogICAgdmFyIHF1ZXJ5ID0gewogICAgICAnY2FjaGVfaWQnOiAgICAgICAkKCdpbi1jYWNoZV9pZCcpLnZhbHVlLAogICAgICAnbWFwX3N0eWxlJzogICAgICAkKCdpbi1tYXBfc3R5bGUnKS5nZXRWYWx1ZSgpLAogICAgICAnZ3JpZCc6ICAgICAgICAgICAkKCdpbi1ncmlkJykuZ2V0VmFsdWUoKQogICAgfTsKICAgIHZhciBvcHRzID0geyAnbWV0aG9kJzogJ2dldCcsICdwYXJhbWV0ZXJzJzogcXVlcnksCiAgICAgICdvblN1Y2Nlc3MnOiBmdW5jdGlvbiAocmVxKSB7IHVwZGF0ZV9pbWdfc3JjKHJlcSk7IH0sCiAgICAgICdvbkZhaWx1cmUnOiBmdW5jdGlvbiAocmVxKSB7IHVwZGF0ZV9pbWdfZXJyb3IocmVxLnN0YXR1c1RleHQpOyB9LAogICAgICAnb25FeGNlcHRpb24nOiBmdW5jdGlvbiAocmVxLGVycikgeyB1cGRhdGVfaW1nX2Vycm9yKCdTeXN0ZW0gRXJyb3InKTsgfQogICAgfTsKICAgIG5ldyBBamF4LlJlcXVlc3QoJy9mYW50YXN5L2R1bmdlb24vbGliL2ltYWdlLmNnaScsb3B0cyk7CiAgICAkKCd3b3JraW5nJykuc2hvdygpOyAkKCd2YXJpYW50cycpLmhpZGUoKTsKICAgIHJldHVybiB0cnVlOwogIH0KICBmdW5jdGlvbiB1cGRhdGVfaW1nX3NyYyAocmVxKSB7CiAgICBpZiAocmVxLnJlc3BvbnNlSlNPTikgewogICAgICB1cGRhdGUgPSByZXEucmVzcG9uc2VKU09OOwogICAgfSBlbHNlIGlmIChyZXEucmVzcG9uc2VUZXh0KSB7CiAgICAgIHVwZGF0ZSA9IHJlcS5yZXNwb25zZVRleHQuZXZhbEpTT04oKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB1cGRhdGVfaW1nX2Vycm9yKCdObyByZXNwb25zZScpOwogICAgfQogICAgJCgnbWFwX2ltZycpLnNyYyA9IHVwZGF0ZS51cmk7CiAgICAkKCd3b3JraW5nJykuaGlkZSgpOyAkKCd2YXJpYW50cycpLnNob3coKTsKICB9CiAgZnVuY3Rpb24gdXBkYXRlX2ltZ19lcnJvciAodGV4dCkgewogICAgYWxlcnQodGV4dCk7ICQoJ3dvcmtpbmcnKS5oaWRlKCk7ICQoJ3ZhcmlhbnRzJykuc2hvdygpOwogIH0KCi8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLQovLyBkb3dubG9hZCBmaWxlCgogIGZ1bmN0aW9uIGRvd25sb2FkX2ZpbGUgKGZvcm0pIHsKICAgIHZhciBxdWVyeSA9IHsKICAgICAgJ2NhY2hlX2lkJzogJCgnaW4tY2FjaGVfaWQnKS52YWx1ZSwKICAgIH07CiAgICB2YXIgb3B0cyA9IHsgJ21ldGhvZCc6ICdnZXQnLCAncGFyYW1ldGVycyc6IHF1ZXJ5LAogICAgICAnb25TdWNjZXNzJzogZnVuY3Rpb24gKHJlcSkgeyBkb3dubG9hZF9maWxlX3NyYyhyZXEpOyB9LAogICAgICAnb25GYWlsdXJlJzogZnVuY3Rpb24gKHJlcSkgeyBkb3dubG9hZF9maWxlX2Vycm9yKHJlcS5zdGF0dXNUZXh0KTsgfSwKICAgICAgJ29uRXhjZXB0aW9uJzogZnVuY3Rpb24gKHJlcSxlcnIpIHsgZG93bmxvYWRfZmlsZV9lcnJvcignU3lzdGVtIEVycm9yJyk7IH0KICAgIH07CiAgICBuZXcgQWpheC5SZXF1ZXN0KGZvcm0uYWN0aW9uLG9wdHMpOwogICAgJCgnd29ya2luZycpLnNob3coKTsgJCgndmFyaWFudHMnKS5oaWRlKCk7CiAgfQogIGZ1bmN0aW9uIGRvd25sb2FkX2ZpbGVfc3JjIChyZXEpIHsKICAgIGlmIChyZXEucmVzcG9uc2VKU09OKSB7CiAgICAgIHJlc3BvbnNlID0gcmVxLnJlc3BvbnNlSlNPTjsKICAgIH0gZWxzZSBpZiAocmVxLnJlc3BvbnNlVGV4dCkgewogICAgICByZXNwb25zZSA9IHJlcS5yZXNwb25zZVRleHQuZXZhbEpTT04oKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBkb3dubG9hZF9maWxlX2Vycm9yKCdObyByZXNwb25zZScpOwogICAgfQogICAgd2luZG93LmxvY2F0aW9uID0gcmVzcG9uc2UudXJpOwogICAgJCgnd29ya2luZycpLmhpZGUoKTsgJCgndmFyaWFudHMnKS5zaG93KCk7CiAgfQogIGZ1bmN0aW9uIGRvd25sb2FkX2ZpbGVfZXJyb3IgKHRleHQpIHsKICAgIGFsZXJ0KHRleHQpOyAkKCd3b3JraW5nJykuaGlkZSgpOyAkKCd2YXJpYW50cycpLnNob3coKTsKICB9CgovLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0K"></script>
</head>
<body>
<h1>The Undercrypt of Cesa</h1><h2 class="center">Level 5</h2><p class="map"><img id="map_img" src="data:image/png;base64,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" alt="" usemap="#dungeon" /></p><div><map id="dungeon" name="dungeon"><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="690,220,790,320" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="690,230,790,330" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="720,210,790,280" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="680,260,750,330" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="730,260,800,330" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="640,270,710,340" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="630,270,700,340" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="620,270,690,340" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="610,270,680,340" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="610,280,680,350" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="720,200,780,260" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="610,300,670,360" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="760,280,810,330" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="720,190,770,240" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="770,300,810,340" /><area href="#1" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="780,290,820,330" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="140,90,230,180" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="130,90,210,170" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="120,90,200,170" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="110,90,190,170" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="150,110,230,190" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="170,120,240,190" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="100,120,150,170" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="70,130,120,180" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="60,140,110,190" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="200,140,250,190" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="160,150,210,200" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="60,150,110,200" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="50,140,90,180" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="120,80,160,120" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="160,170,200,210" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="70,170,110,210" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="160,180,200,220" /><area href="#2" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="220,150,260,190" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="950,350,1040,440" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="940,360,1030,450" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="950,360,1040,450" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="930,370,1010,450" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="970,370,1050,450" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="980,370,1060,450" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="930,380,1010,460" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="930,390,1010,470" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="970,340,1040,410" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="930,410,1000,480" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="930,430,990,490" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="930,450,980,500" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="920,460,970,510" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="910,460,960,510" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="900,460,950,510" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="920,370,960,410" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="910,370,950,410" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="890,470,930,510" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="1030,370,1070,410" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="880,470,920,510" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="1040,370,1080,410" /><area href="#3" alt="Complex, 12 x Kobold Zombie" title="Complex, 12 x Kobold Zombie" shape="rect" coords="880,480,920,520" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="450,830,540,920" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="440,840,510,910" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="460,820,520,880" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="430,850,480,900" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="460,810,510,860" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="520,900,570,950" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="510,830,550,870" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="510,890,550,930" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="540,900,580,940" /><area href="#4" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="530,920,570,960" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="140,860,230,950" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="170,860,240,930" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="140,850,210,920" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="130,850,180,900" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="120,850,160,890" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="110,850,150,890" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="100,850,140,890" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="90,850,130,890" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="210,890,250,930" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="60,880,100,920" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="50,890,90,930" /><area href="#5" alt="Complex, 3 x Kobold Zombie" title="Complex, 3 x Kobold Zombie" shape="rect" coords="190,920,230,960" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="970,220,1050,300" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="960,230,1040,310" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="970,230,1050,310" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="970,240,1050,320" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="990,220,1060,290" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="980,260,1050,330" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="980,270,1050,340" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="950,240,1010,300" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1010,220,1070,280" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1020,220,1080,280" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="940,250,990,300" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="930,250,980,300" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1040,220,1090,270" /><area href="#6" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1050,210,1090,250" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="550,560,630,640" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="540,570,620,650" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="550,570,630,650" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="560,550,630,620" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="530,580,600,650" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="520,580,560,620" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="510,580,550,620" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="560,540,600,580" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="560,530,600,570" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="560,520,600,560" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="590,620,630,660" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="600,550,640,590" /><area href="#7" alt="Complex, 7 x Kobold Zombie, Rune of Confusion" title="Complex, 7 x Kobold Zombie, Rune of Confusion" shape="rect" coords="610,550,650,590" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="940,660,1020,740" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="940,670,1020,750" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="930,680,1010,760" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="940,680,1020,760" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="920,690,990,760" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="950,650,1020,720" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="910,690,970,750" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="970,650,1030,710" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="960,710,1020,770" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="960,720,1020,780" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="960,730,1020,790" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="970,730,1030,790" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="960,740,1020,800" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="900,690,950,740" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="990,740,1040,790" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="890,690,930,730" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="1010,740,1050,780" /><area href="#8" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="1020,740,1060,780" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="260,770,340,850" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="270,760,340,830" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="280,760,350,830" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="300,760,360,820" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="250,790,310,850" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="310,750,370,810" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="320,740,380,800" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="330,740,390,800" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="330,730,390,790" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="330,720,390,780" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="330,710,390,770" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="330,700,390,760" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="330,690,390,750" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="340,690,400,750" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="330,680,390,740" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="360,690,410,740" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="370,690,420,740" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="380,690,430,740" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="390,690,440,740" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="320,670,370,720" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="330,670,380,720" /><area href="#9" alt="Complex, 7 x Ghoul" title="Complex, 7 x Ghoul" shape="rect" coords="400,680,440,720" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="720,810,800,890" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="710,820,790,900" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="700,820,780,900" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="720,820,800,900" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="690,820,750,880" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="750,840,810,900" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="760,850,820,910" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="770,860,830,920" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="790,870,840,920" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="680,830,720,870" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="730,800,770,840" /><area href="#10" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="800,890,840,930" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="280,1110,360,1190" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="280,1120,360,1200" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="280,1130,360,1210" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="290,1100,360,1170" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="300,1100,370,1170" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="290,1150,360,1220" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="290,1160,360,1230" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="310,1090,370,1150" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="300,1180,360,1240" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="270,1150,320,1200" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="260,1150,310,1200" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="250,1150,300,1200" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="320,1190,370,1240" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="240,1150,280,1190" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="330,1080,370,1120" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="340,1070,380,1110" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="340,1200,380,1240" /><area href="#11" alt="Complex, 5 x Ghast" title="Complex, 5 x Ghast" shape="rect" coords="350,1200,390,1240" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="720,90,790,160" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="690,110,760,180" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="680,110,750,180" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="670,110,740,180" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="660,110,730,180" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="650,110,720,180" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="710,100,770,160" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="630,160,680,210" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="710,140,760,190" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="740,80,790,130" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="640,150,680,190" /><area href="#12" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="750,70,790,110" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="450,210,520,280" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="460,200,520,260" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="450,230,510,290" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="440,240,500,300" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="440,250,500,310" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="440,260,500,320" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="430,260,490,320" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="470,190,520,240" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="480,170,530,220" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="480,160,530,210" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="480,150,520,190" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="480,140,520,180" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="470,130,510,170" /><area href="#13" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="500,170,540,210" /><area href="#14" alt="Complex, 8 x Kobold Zombie, Hidden Treasure" title="Complex, 8 x Kobold Zombie, Hidden Treasure" shape="rect" coords="30,260,100,330" /><area href="#14" alt="Complex, 8 x Kobold Zombie, Hidden Treasure" title="Complex, 8 x Kobold Zombie, Hidden Treasure" shape="rect" coords="40,250,100,310" /><area href="#14" alt="Complex, 8 x Kobold Zombie, Hidden Treasure" title="Complex, 8 x Kobold Zombie, Hidden Treasure" shape="rect" coords="50,240,90,280" /><area href="#15" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="130,390,200,460" /><area href="#15" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="140,390,210,460" /><area href="#15" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="120,390,180,450" /><area href="#15" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="170,420,220,470" /><area href="#15" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="180,430,230,480" /><area href="#15" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="110,390,150,430" /><area href="#15" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="180,450,220,490" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="830,390,900,460" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="830,400,900,470" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="820,390,870,440" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,390,910,440" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="810,380,860,430" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="810,370,860,420" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="870,380,910,420" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="810,360,850,400" /><area href="#16" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="810,350,850,390" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="430,410,500,480" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="430,420,500,490" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="430,400,490,460" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="430,390,490,450" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="430,380,490,440" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="420,380,470,430" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="450,450,500,500" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="460,460,510,510" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="480,470,530,520" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="490,470,540,520" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="500,470,550,520" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="510,470,560,520" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="520,470,570,520" /><area href="#17" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="540,480,580,520" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="350,450,420,520" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="360,450,430,520" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="350,460,420,530" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="340,470,400,530" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="330,480,390,540" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="320,480,380,540" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="310,480,370,540" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="350,440,400,490" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="300,490,350,540" /><area href="#18" alt="Complex, 7 x Troglodyte Zombie" title="Complex, 7 x Troglodyte Zombie" shape="rect" coords="350,430,390,470" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="590,970,660,1040" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="580,1030,650,1100" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="580,1040,650,1110" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="580,1050,650,1120" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="580,1060,650,1130" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="590,1060,660,1130" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="590,1070,660,1140" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="590,1080,660,1150" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="590,1090,660,1160" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="590,1100,660,1170" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="610,1070,670,1130" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="620,1070,680,1130" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="590,1120,650,1180" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="570,1030,620,1080" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="600,960,650,1010" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="560,1030,600,1070" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="580,1150,620,1190" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="590,1150,630,1190" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="570,1160,610,1200" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="560,1170,600,1210" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="550,1180,590,1220" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="540,1180,580,1220" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="520,1190,560,1230" /><area href="#19" alt="Complex, 4 x Bugbear Zombie" title="Complex, 4 x Bugbear Zombie" shape="rect" coords="540,1190,580,1230" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="860,1020,930,1090" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="860,1010,920,1070" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="870,1040,930,1100" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="890,1030,940,1080" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="850,1000,900,1050" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="890,1070,930,1110" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="900,1100,940,1140" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="900,1110,940,1150" /><area href="#20" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="910,1110,950,1150" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="120,1040,190,1110" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="130,1040,200,1110" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="130,1050,200,1120" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="150,1050,210,1110" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="140,1070,200,1130" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="110,1060,160,1110" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="150,1090,200,1140" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="160,1130,210,1180" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="160,1140,210,1190" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="100,1070,140,1110" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="90,1070,130,1110" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="120,1030,160,1070" /><area href="#21" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="180,1060,220,1100" /><area href="#22" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="700,1070,770,1140" /><area href="#22" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="710,1070,780,1140" /><area href="#22" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="720,1070,790,1140" /><area href="#22" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="730,1070,800,1140" /><area href="#22" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="740,1090,800,1150" /><area href="#22" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="690,1100,730,1140" /><area href="#22" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="770,1110,810,1150" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1140,1090,1210,1160" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1150,1090,1220,1160" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1130,1100,1200,1170" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1120,1100,1180,1160" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1110,1100,1160,1150" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1100,1100,1150,1150" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1090,1100,1140,1150" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1080,1100,1130,1150" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1180,1100,1230,1150" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1070,1090,1110,1130" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1060,1090,1100,1130" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1180,1080,1220,1120" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1150,1140,1190,1180" /><area href="#23" alt="Complex, 4 x Troglodyte Zombie, Hidden Treasure" title="Complex, 4 x Troglodyte Zombie, Hidden Treasure" shape="rect" coords="1030,1080,1070,1120" /><area href="#24" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="800,40,860,100" /><area href="#24" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="810,40,870,100" /><area href="#24" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="810,30,860,80" /><area href="#24" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="790,60,840,110" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="990,60,1050,120" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="1000,60,1060,120" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="1000,70,1060,130" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="980,60,1030,110" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="1020,70,1070,120" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="1010,90,1060,140" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="1010,100,1060,150" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="1010,110,1060,160" /><area href="#25" alt="Complex, 14 x Human Commoner Zombie" title="Complex, 14 x Human Commoner Zombie" shape="rect" coords="970,60,1010,100" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1180,120,1240,180" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1170,130,1230,190" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1180,130,1240,190" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1180,140,1240,200" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1180,150,1240,210" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1180,160,1240,220" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1180,170,1240,230" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1160,130,1210,180" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1190,110,1240,160" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1190,100,1240,150" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1180,190,1230,240" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1150,140,1190,180" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1200,90,1240,130" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1170,210,1210,250" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1180,210,1220,250" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1200,80,1240,120" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1170,220,1210,260" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1200,70,1240,110" /><area href="#26" alt="Complex, 14 x Kobold Zombie" title="Complex, 14 x Kobold Zombie" shape="rect" coords="1210,80,1250,120" /><area href="#27" alt="Complex, 8 x Kobold Zombie" title="Complex, 8 x Kobold Zombie" shape="rect" coords="570,360,630,420" /><area href="#27" alt="Complex, 8 x Kobold Zombie" title="Complex, 8 x Kobold Zombie" shape="rect" coords="560,370,610,420" /><area href="#27" alt="Complex, 8 x Kobold Zombie" title="Complex, 8 x Kobold Zombie" shape="rect" coords="550,380,590,420" /><area href="#27" alt="Complex, 8 x Kobold Zombie" title="Complex, 8 x Kobold Zombie" shape="rect" coords="590,390,630,430" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="830,540,890,600" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,540,900,600" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,550,900,610" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="850,560,910,620" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,570,920,630" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,580,920,640" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="870,580,930,640" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,590,920,650" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="850,530,900,580" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,610,910,660" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,520,900,560" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,630,900,670" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,640,900,680" /><area href="#28" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,650,900,690" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1110,550,1170,610" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1120,550,1180,610" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1120,560,1180,620" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1140,550,1190,600" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1120,580,1170,630" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1120,590,1170,640" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1180,540,1230,590" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1100,560,1140,600" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1090,560,1130,600" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1190,530,1230,570" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1190,520,1230,560" /><area href="#29" alt="Complex, Hidden Treasure" title="Complex, Hidden Treasure" shape="rect" coords="1130,610,1170,650" /><area href="#30" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="490,650,550,710" /><area href="#30" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="480,650,530,700" /><area href="#30" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="500,670,550,720" /><area href="#30" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="470,650,510,690" /><area href="#31" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1150,650,1210,710" /><area href="#31" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1160,650,1220,710" /><area href="#31" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1170,650,1230,710" /><area href="#31" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1190,650,1240,700" /><area href="#31" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1180,680,1220,720" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="290,850,350,910" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="290,860,350,920" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="300,860,360,920" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="310,860,370,920" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="320,860,380,920" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="310,870,370,930" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="280,870,330,920" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="320,890,370,940" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="320,900,370,950" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="270,880,310,920" /><area href="#32" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="350,870,390,910" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="610,850,670,910" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="610,860,670,920" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="620,840,670,890" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="600,870,650,920" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="600,880,650,930" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="590,880,640,930" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="580,890,620,930" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="640,840,680,880" /><area href="#33" alt="Complex, 5 x Owlbear Skeleton" title="Complex, 5 x Owlbear Skeleton" shape="rect" coords="600,900,640,940" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,890,900,950" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,900,900,960" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,910,900,970" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,890,910,940" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="870,880,920,930" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="880,880,930,930" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="880,870,930,920" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="890,870,940,920" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="890,860,940,910" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,930,890,980" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,940,890,990" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,950,890,1000" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="930,840,970,880" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="940,840,980,880" /><area href="#34" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="950,840,990,880" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="310,950,370,1010" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="310,960,370,1020" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="320,960,380,1020" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="340,970,390,1020" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="350,970,400,1020" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="360,970,410,1020" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="370,970,420,1020" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="370,980,420,1030" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="300,960,340,1000" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="310,990,350,1030" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="390,970,430,1010" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="380,1000,420,1040" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="380,1010,420,1050" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="380,1020,420,1060" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="390,1020,430,1060" /><area href="#35" alt="Complex, 10 x Troglodyte Zombie" title="Complex, 10 x Troglodyte Zombie" shape="rect" coords="380,1030,420,1070" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="460,1000,520,1060" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="450,1020,510,1080" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="450,1030,510,1090" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="450,1040,510,1100" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="450,1050,510,1110" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="440,1020,490,1070" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="460,990,510,1040" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="460,980,510,1030" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="460,1070,510,1120" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="460,970,500,1010" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="450,960,490,1000" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="440,960,480,1000" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="430,960,470,1000" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="490,1010,530,1050" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="470,1090,510,1130" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="480,1090,520,1130" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="480,1100,520,1140" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="490,1100,530,1140" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="500,1010,540,1050" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="510,1010,550,1050" /><area href="#36" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="500,1110,540,1150" /><area href="#37" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="900,130,950,180" /><area href="#37" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="920,130,960,170" /><area href="#37" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="900,120,940,160" /><area href="#37" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="900,150,940,190" /><area href="#37" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="890,150,930,190" /><area href="#37" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="890,160,930,200" /><area href="#37" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="880,160,920,200" /><area href="#38" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="260,180,310,230" /><area href="#38" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="270,180,320,230" /><area href="#38" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="260,190,310,240" /><area href="#38" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="260,200,310,250" /><area href="#38" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="260,170,300,210" /><area href="#38" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="260,220,300,260" /><area href="#38" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="250,230,290,270" /><area href="#39" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1090,370,1140,420" /><area href="#39" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1100,370,1150,420" /><area href="#39" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1080,370,1120,410" /><area href="#40" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="720,430,770,480" /><area href="#40" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="710,430,750,470" /><area href="#40" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="730,420,770,460" /><area href="#40" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="730,450,770,490" /><area href="#40" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="680,420,720,460" /><area href="#41" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1060,450,1110,500" /><area href="#41" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1060,460,1110,510" /><area href="#41" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1070,460,1120,510" /><area href="#41" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1090,470,1130,510" /><area href="#41" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1100,470,1140,510" /><area href="#42" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="730,510,780,560" /><area href="#42" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="730,520,780,570" /><area href="#42" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="740,500,780,540" /><area href="#42" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="740,490,780,530" /><area href="#42" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="720,530,760,570" /><area href="#42" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="750,530,790,570" /><area href="#43" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="270,610,320,660" /><area href="#43" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="260,620,310,670" /><area href="#43" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="250,620,300,670" /><area href="#43" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="270,620,320,670" /><area href="#43" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="270,630,320,680" /><area href="#43" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="280,660,320,700" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="660,640,710,690" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="690,670,740,720" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="700,670,750,720" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="710,670,760,720" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="710,680,760,730" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="680,660,720,700" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="670,660,710,700" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="680,670,720,710" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="650,650,690,690" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="640,650,680,690" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="630,650,670,690" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="730,670,770,710" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="670,630,710,670" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="750,650,790,690" /><area href="#44" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="740,660,780,700" /><area href="#45" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="130,750,180,800" /><area href="#45" alt="Complex, 1 x Ettin Skeleton" title="Complex, 1 x Ettin Skeleton" shape="rect" coords="120,750,160,790" /><area href="#46" alt="Complex, 11 x Human Commoner Zombie" title="Complex, 11 x Human Commoner Zombie" shape="rect" coords="790,750,840,800" /><area href="#46" alt="Complex, 11 x Human Commoner Zombie" title="Complex, 11 x Human Commoner Zombie" shape="rect" coords="830,770,880,820" /><area href="#46" alt="Complex, 11 x Human Commoner Zombie" title="Complex, 11 x Human Commoner Zombie" shape="rect" coords="810,760,850,800" /><area href="#46" alt="Complex, 11 x Human Commoner Zombie" title="Complex, 11 x Human Commoner Zombie" shape="rect" coords="820,770,860,810" /><area href="#46" alt="Complex, 11 x Human Commoner Zombie" title="Complex, 11 x Human Commoner Zombie" shape="rect" coords="850,780,890,820" /><area href="#46" alt="Complex, 11 x Human Commoner Zombie" title="Complex, 11 x Human Commoner Zombie" shape="rect" coords="840,790,880,830" /><area href="#47" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1130,850,1180,900" /><area href="#47" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1120,850,1160,890" /><area href="#47" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1110,850,1150,890" /><area href="#48" alt="Complex, 4 x Owlbear Skeleton" title="Complex, 4 x Owlbear Skeleton" shape="rect" coords="1010,910,1060,960" /><area href="#48" alt="Complex, 4 x Owlbear Skeleton" title="Complex, 4 x Owlbear Skeleton" shape="rect" coords="1020,930,1060,970" /><area href="#48" alt="Complex, 4 x Owlbear Skeleton" title="Complex, 4 x Owlbear Skeleton" shape="rect" coords="1020,940,1060,980" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1170,930,1220,980" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1170,940,1220,990" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1170,950,1220,1000" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1160,960,1210,1010" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1170,960,1220,1010" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1120,970,1170,1020" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1120,990,1160,1030" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1120,1000,1160,1040" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1120,1010,1160,1050" /><area href="#49" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1120,1020,1160,1060" /><area href="#50" alt="Complex, 9 x Human Commoner Zombie" title="Complex, 9 x Human Commoner Zombie" shape="rect" coords="30,990,80,1040" /><area href="#50" alt="Complex, 9 x Human Commoner Zombie" title="Complex, 9 x Human Commoner Zombie" shape="rect" coords="30,980,70,1020" /><area href="#50" alt="Complex, 9 x Human Commoner Zombie" title="Complex, 9 x Human Commoner Zombie" shape="rect" coords="30,970,70,1010" /><area href="#50" alt="Complex, 9 x Human Commoner Zombie" title="Complex, 9 x Human Commoner Zombie" shape="rect" coords="30,960,70,1000" /><area href="#51" alt="Complex, 4 x Human Commoner Zombie" title="Complex, 4 x Human Commoner Zombie" shape="rect" coords="400,1150,450,1200" /><area href="#51" alt="Complex, 4 x Human Commoner Zombie" title="Complex, 4 x Human Commoner Zombie" shape="rect" coords="400,1160,450,1210" /><area href="#51" alt="Complex, 4 x Human Commoner Zombie" title="Complex, 4 x Human Commoner Zombie" shape="rect" coords="400,1170,450,1220" /><area href="#51" alt="Complex, 4 x Human Commoner Zombie" title="Complex, 4 x Human Commoner Zombie" shape="rect" coords="400,1180,450,1230" /><area href="#51" alt="Complex, 4 x Human Commoner Zombie" title="Complex, 4 x Human Commoner Zombie" shape="rect" coords="400,1140,440,1180" /><area href="#51" alt="Complex, 4 x Human Commoner Zombie" title="Complex, 4 x Human Commoner Zombie" shape="rect" coords="390,1190,430,1230" /><area href="#51" alt="Complex, 4 x Human Commoner Zombie" title="Complex, 4 x Human Commoner Zombie" shape="rect" coords="420,1190,460,1230" /><area href="#52" alt="Complex, 10 x Kobold Zombie" title="Complex, 10 x Kobold Zombie" shape="rect" coords="80,1180,130,1230" /><area href="#52" alt="Complex, 10 x Kobold Zombie" title="Complex, 10 x Kobold Zombie" shape="rect" coords="90,1180,140,1230" /><area href="#52" alt="Complex, 10 x Kobold Zombie" title="Complex, 10 x Kobold Zombie" shape="rect" coords="100,1180,150,1230" /><area href="#52" alt="Complex, 10 x Kobold Zombie" title="Complex, 10 x Kobold Zombie" shape="rect" coords="90,1190,140,1240" /><area href="#52" alt="Complex, 10 x Kobold Zombie" title="Complex, 10 x Kobold Zombie" shape="rect" coords="70,1180,110,1220" /><area href="#52" alt="Complex, 10 x Kobold Zombie" title="Complex, 10 x Kobold Zombie" shape="rect" coords="70,1170,110,1210" /><area href="#52" alt="Complex, 10 x Kobold Zombie" title="Complex, 10 x Kobold Zombie" shape="rect" coords="60,1160,100,1200" /><area href="#53" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="930,1180,980,1230" /><area href="#53" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="940,1180,990,1230" /><area href="#53" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="950,1180,1000,1230" /><area href="#53" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="920,1190,960,1230" /><area href="#53" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="970,1190,1010,1230" /><area href="#53" alt="Complex, 9 x Kobold Zombie" title="Complex, 9 x Kobold Zombie" shape="rect" coords="970,1200,1010,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="810,1190,860,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="820,1190,870,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="830,1190,880,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="840,1190,890,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="850,1190,900,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="860,1190,910,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="870,1190,920,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="820,1180,860,1220" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="800,1200,840,1240" /><area href="#54" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="790,1200,830,1240" /><area href="#55" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="150,230,190,270" /><area href="#55" alt="Complex, 4 x Ghoul" title="Complex, 4 x Ghoul" shape="rect" coords="120,250,160,290" /><area href="#56" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1170,290,1210,330" /><area href="#57" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="30,400,70,440" /><area href="#57" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="30,410,70,450" /><area href="#57" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="30,420,70,460" /><area href="#58" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="630,490,670,530" /><area href="#58" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="630,500,670,540" /><area href="#59" alt="Complex, 13 x Human Commoner Zombie" title="Complex, 13 x Human Commoner Zombie" shape="rect" coords="240,520,280,560" /><area href="#59" alt="Complex, 13 x Human Commoner Zombie" title="Complex, 13 x Human Commoner Zombie" shape="rect" coords="250,520,290,560" /><area href="#59" alt="Complex, 13 x Human Commoner Zombie" title="Complex, 13 x Human Commoner Zombie" shape="rect" coords="260,520,300,560" /><area href="#60" alt="Complex, 13 x Human Commoner Zombie, Lightning Bolt Trap, Hidden Treasure" title="Complex, 13 x Human Commoner Zombie, Lightning Bolt Trap, Hidden Treasure" shape="rect" coords="180,590,220,630" /><area href="#61" alt="Complex, 5 x Bugbear Zombie" title="Complex, 5 x Bugbear Zombie" shape="rect" coords="680,590,720,630" /><area href="#62" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1010,600,1050,640" /><area href="#63" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1080,680,1120,720" /><area href="#63" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1080,690,1120,730" /><area href="#63" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1090,690,1130,730" /><area href="#63" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1100,690,1140,730" /><area href="#63" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="1110,690,1150,730" /><area href="#64" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1170,740,1210,780" /><area href="#64" alt="Complex, 1 x Wraith" title="Complex, 1 x Wraith" shape="rect" coords="1180,740,1220,780" /><area href="#65" alt="Complex, Empty" title="Complex, Empty" shape="rect" coords="210,980,250,1020" /><area href="#66" alt="Complex, 1 x Mummy" title="Complex, 1 x Mummy" shape="rect" coords="770,980,810,1020" /><area href="#67" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="1010,1010,1050,1050" /><area href="#67" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="1010,1020,1050,1060" /><area href="#67" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="1020,1020,1060,1060" /><area href="#67" alt="Complex, 3 x Bugbear Zombie" title="Complex, 3 x Bugbear Zombie" shape="rect" coords="1020,1030,1060,1070" /></map></div>

<table class="stats standard">
    <tr>
        <td class="section">General</td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Dungeon Walls</td>
                    <td class="value">Natural Stone (Climb DC 15)</td>
                </tr>
                <tr>
                    <td class="key">Dungeon Floor</td>
                    <td class="value">Smooth Stone</td>
                </tr>
                <tr>
                    <td class="key">Temperature</td>
                    <td class="value">Cold (unprotected creatures must succeed on a Fortitude saving throw every hour (DC 15, +1 per previous check) or take 1d6 points of non-lethal damage; a creature that takes any non-lethal damage from cold exposure suffers from hypothermia and is fatigued)</td>
                </tr>
                <tr>
                    <td class="key">Illumination</td>
                    <td class="value">Shadowy (witchlight every 20 ft.)</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section">Wandering<br />Monsters</td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">1</td>
                    <td class="value">8 x Human Commoner Zombie, investigating a strange noise</td>
                </tr>
                <tr>
                    <td class="key">2</td>
                    <td class="value">10 x Human Commoner Zombie, returning to their lair with plunder</td>
                </tr>
                <tr>
                    <td class="key">3</td>
                    <td class="value">1 x Mummy, trying to lure the party into an ambush</td>
                </tr>
                <tr>
                    <td class="key">4</td>
                    <td class="value">12 x Kobold Zombie, lost and desperate</td>
                </tr>
                <tr>
                    <td class="key">5</td>
                    <td class="value">16 x Human Commoner Zombie, investigating a strange noise</td>
                </tr>
                <tr>
                    <td class="key">6</td>
                    <td class="value">1 x Ghast (ghoul), trying to lure the party into an ambush</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="1" name="1">Room #1</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">The north and west walls have been engraved with glowing runes, The south and west walls are covered with mould</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="2" name="2">Room #2</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A narrow shaft descends from the room into a magical cyst below, A workbench and large table sit in the north-west corner of the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="3" name="3">Room #3</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Spirals of green stones cover the floor, Numerous monstrous skulls lie within niches in the north wall</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">12 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="4" name="4">Room #4</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Empty</td>
                    <td class="value">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="5" name="5">Room #5</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A narrow shaft descends from the room into a midden chamber below, Burning torches in iron sconces line the south and west walls</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">3 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="6" name="6">Room #6</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Wraith<hr /><p>Wraith: CR 5; Medium undead (incorporeal); HD 5d12; hp 32; Init +7; Spd Fly 60 ft. (good) (12 squares); AC 15 (+3 dex, +2 deflection), touch 15, flat-footed 12; Base Atk +2; Grp -; Atk +5 melee (1d4 plus 1d6 Constitution drain, incorporeal touch); Full Atk +5 melee (1d4 plus 1d6 Constitution drain, incorporeal touch); Space/Reach 5 ft./5 ft.; SA Constitution drain, create spawn; SQ Darkvision 60 ft., daylight powerlessness, incorporeal traits, +2 turn resistance, undead traits, unnatural aura; AL LE; SV Fort +1, Ref +4, Will +6; Str -, Dex 16, Con -, Int 14, Wis 14, Cha 15</p><p>Skills and Feats: Diplomacy +6, Hide +11, Intimidate +10, Listen +12, Search +10, Sense Motive +8, Spot +12, Survival +2 (+4 following tracks); Alertness, Blind-Fight, Combat Reflexes, Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="7" name="7">Room #7</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">7 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
                <tr>
                    <td class="key">Trap</td>
                    <td class="value">Rune of Confusion: CR 7; magic device; proximity trigger (alarm); no reset; confusion (confused for 1d4 rounds, DC 14 Will save negates); multiple targets (all targets in a 10 ft. radius burst); Search DC 24; Disable Device DC 24</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="8" name="8">Room #8</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Someone has scrawled "The dwarf will betray you" on the north wall, A mouldy odor fills the south-west corner of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">4 x Ghoul<hr /><p>Ghoul: CR 1; Medium undead; HD 2d12; hp 13; Init +2; Spd 30 ft. (6 squares); AC 14 (+2 dex, +2 natural), touch 12, flat-footed 12; Base Atk +1; Grp +2; Atk +2 melee (1d6+1 plus paralysis, bite); Full Atk +2 melee (1d6+1 plus paralysis, bite) and +0 melee (1d3 plus paralysis, 2 claws); Space/Reach 5 ft./5 ft.; SA Ghoul fever, paralysis; SQ Darkvision 60 ft., undead traits, +2 turn resistance; AL CE; SV Fort +0, Ref +2, Will +5; Str 13, Dex 15, Con -, Int 13, Wis 14, Cha 12</p><p>Skills and Feats: Balance +6, Climb +5, Hide +6, Jump +5, Move Silently +6, Spot +7; Multiattack</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="9" name="9">Room #9</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A narrow shaft falls into the room from above, The floor is covered in square tiles, alternating white and black</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">7 x Ghoul<hr /><p>Ghoul: CR 1; Medium undead; HD 2d12; hp 13; Init +2; Spd 30 ft. (6 squares); AC 14 (+2 dex, +2 natural), touch 12, flat-footed 12; Base Atk +1; Grp +2; Atk +2 melee (1d6+1 plus paralysis, bite); Full Atk +2 melee (1d6+1 plus paralysis, bite) and +0 melee (1d3 plus paralysis, 2 claws); Space/Reach 5 ft./5 ft.; SA Ghoul fever, paralysis; SQ Darkvision 60 ft., undead traits, +2 turn resistance; AL CE; SV Fort +0, Ref +2, Will +5; Str 13, Dex 15, Con -, Int 13, Wis 14, Cha 12</p><p>Skills and Feats: Balance +6, Climb +5, Hide +6, Jump +5, Move Silently +6, Spot +7; Multiattack</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="10" name="10">Room #10</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A stone dais sits in the north-east corner of the room, Several wax blobs are scattered throughout the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">4 x Ghoul<hr /><p>Ghoul: CR 1; Medium undead; HD 2d12; hp 13; Init +2; Spd 30 ft. (6 squares); AC 14 (+2 dex, +2 natural), touch 12, flat-footed 12; Base Atk +1; Grp +2; Atk +2 melee (1d6+1 plus paralysis, bite); Full Atk +2 melee (1d6+1 plus paralysis, bite) and +0 melee (1d3 plus paralysis, 2 claws); Space/Reach 5 ft./5 ft.; SA Ghoul fever, paralysis; SQ Darkvision 60 ft., undead traits, +2 turn resistance; AL CE; SV Fort +0, Ref +2, Will +5; Str 13, Dex 15, Con -, Int 13, Wis 14, Cha 12</p><p>Skills and Feats: Balance +6, Climb +5, Hide +6, Jump +5, Move Silently +6, Spot +7; Multiattack</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="11" name="11">Room #11</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Several square holes are cut into the south and east walls, A pair of boots lies in the east side of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">5 x Ghast (ghoul)<hr /><p>Ghast: CR 3; Medium undead; HD 4d12+3; hp 29; Init +3; Spd 30 ft. (6 squares); AC 17 (+3 dex, +4 natural), touch 12, flat-footed 14; Base Atk +2; Grp +5; Atk +5 melee (1d8+3 plus paralysis, bite); Full Atk +5 melee (1d8+3 plus paralysis, bite) and +3 melee (1d4+1 plus paralysis, 2 claws); Space/Reach 5 ft./5 ft.; SA Ghoul fever, paralyis, stench; SQ Darkvision 60 ft., undead traits, +2 turn resistance; AL CE; SV Fort +1, Ref +4, Will +6; Str 17, Dex 17, Con -, Int 13, Wis 14, Cha 16</p><p>Skills and Feats: Balance +7, Climb +9, Hide +8, Jump +9, Move Silently +8, Spot +8; Multiattack, Toughness</p><p>Treasure: 600 gp; Black Pearl (200 gp), Jet (110 gp); hoard total 910 gp</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="12" name="12">Room #12</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A narrow shaft descends from the room into a natural cavern below, A group of draconic faces have been carved into the east wall</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="13" name="13">Room #13</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Someone has scrawled "Stay low" on the east wall, The floor is covered with mould</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="14" name="14">Room #14</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Numerous pillars line the east wall, A pile of blood-soaked clothing lies in the south-west corner of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">8 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
                <tr>
                    <td class="key">Hidden Treasure</td>
                    <td class="value">Hidden (Search DC 30) Trapped and Locked Iron Chest (Open Lock DC 30, break DC 28; hard 10, 60 hp)<p>Poisoned Arrow Trap: CR 3; mechanical; touch trigger; manual reset; lock bypass (Open Lock DC 30); Atk +12 ranged (1d8 plus poison, arrow); poison (large scorpion venom [injury, Fort DC 18, 1d6 Str/1d6 Str]); Search DC 19; Disable Device DC 15</p><hr /><p>300 gp; hoard total 300 gp</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="15" name="15">Room #15</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A well lies in the south side of the room, Several pieces of rotten bread are scattered throughout the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Ettin Skeleton<hr /><p>Ettin skeleton: CR 5; Large undead; HD 10d12; hp 65; Init +4; Spd 40 ft. (8 squares); AC 11 (-1 size, +2 natural), touch 9, flat-footed 11; Base Atk +5; Grp +15; Atk +10 melee (2d6+6, morningstar) or +10 melee (1d6+6, claw) or +4 ranged (1d8+6, javelin); Full Atk +10 melee (2d6+6, 2 morningstars) or +10 melee (1d6+6, 2 claws) or +4 ranged (1d8+6, 2 javelins); Space/Reach 10 ft./10 ft.; SA -; SQ Damage reduction 5/bludgeoning, darkvision 60 ft., darkvision 60 ft., immunity to cold, superior twoweapon; AL NE; SV Fort +3, Ref +3, Will +7; Str 23, Dex 10, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: ; Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="16" name="16">Room #16</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A narrow shaft descends from the room into a natural cavern below, The ceiling is covered with crystalline stalactites</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="17" name="17">Room #17</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A ladder ascends to a catwalk hanging between the east and west walls, The floor is covered in perfect hexagonal tiles</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">3 x Bugbear Zombie<hr /><p>Bugbear zombie: CR 2; Medium undead; HD 6d12+3; hp 42; Init +0; Spd 30 ft. (6 squares; can't run); AC 16 (+5 natural, +1 light wooden shield), touch 10, flat-footed 16; Base Atk +3; Grp +6; Atk +6 melee (1d8+3, morningstar) or +6 melee (1d6+3, slam) or +3 ranged (1d6+2, javelin); Full Atk +6 melee (1d8+3, morningstar) or +6 melee (1d6+3, slam) or +3 ranged (1d6+2, javelin); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +2, Ref +2, Will +5; Str 17, Dex 10, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="18" name="18">Room #18</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A toppled statue lies in the east side of the room, Mournful weeping can be faintly heard near the north wall</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">7 x Troglodyte Zombie<hr /><p>Troglodyte zombie: CR 1; Medium undead; HD 4d12+3; hp 29; Init -2; Spd 30 ft. (6 squares; can't run); AC 16 (-2 dex, +8 natural), touch 8, flat-footed 16; Base Atk +2; Grp +3; Atk +3 melee (1d10+1, greatclub) or +3 melee (1d4+1, bite) or +3 melee (1d6+1, slam) or +0 ranged (1d6+1, javelin); Full Atk +3 melee (1d10+1, greatclub) or +3 melee (1d4+1, bite) or +3 melee (1d6+1, slam) or +0 ranged (1d6+1, javelin); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +1, Ref -1, Will +4; Str 12, Dex 7, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="19" name="19">Room #19</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">4 x Bugbear Zombie<hr /><p>Bugbear zombie: CR 2; Medium undead; HD 6d12+3; hp 42; Init +0; Spd 30 ft. (6 squares; can't run); AC 16 (+5 natural, +1 light wooden shield), touch 10, flat-footed 16; Base Atk +3; Grp +6; Atk +6 melee (1d8+3, morningstar) or +6 melee (1d6+3, slam) or +3 ranged (1d6+2, javelin); Full Atk +6 melee (1d8+3, morningstar) or +6 melee (1d6+3, slam) or +3 ranged (1d6+2, javelin); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +2, Ref +2, Will +5; Str 17, Dex 10, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="20" name="20">Room #20</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Spirals of red stones cover the floor, A rusted gauntlet lies in the north-west corner of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Ettin Skeleton<hr /><p>Ettin skeleton: CR 5; Large undead; HD 10d12; hp 65; Init +4; Spd 40 ft. (8 squares); AC 11 (-1 size, +2 natural), touch 9, flat-footed 11; Base Atk +5; Grp +15; Atk +10 melee (2d6+6, morningstar) or +10 melee (1d6+6, claw) or +4 ranged (1d8+6, javelin); Full Atk +10 melee (2d6+6, 2 morningstars) or +10 melee (1d6+6, 2 claws) or +4 ranged (1d8+6, 2 javelins); Space/Reach 10 ft./10 ft.; SA -; SQ Damage reduction 5/bludgeoning, darkvision 60 ft., darkvision 60 ft., immunity to cold, superior twoweapon; AL NE; SV Fort +3, Ref +3, Will +7; Str 23, Dex 10, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: ; Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="21" name="21">Room #21</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">The floor is covered in perfect hexagonal tiles, A ruined gauntlet lies in the east side of the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="22" name="22">Room #22</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A narrow shaft falls into the room from above, A wooden ladder rests against the north wall</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="23" name="23">Room #23</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">4 x Troglodyte Zombie<hr /><p>Troglodyte zombie: CR 1; Medium undead; HD 4d12+3; hp 29; Init -2; Spd 30 ft. (6 squares; can't run); AC 16 (-2 dex, +8 natural), touch 8, flat-footed 16; Base Atk +2; Grp +3; Atk +3 melee (1d10+1, greatclub) or +3 melee (1d4+1, bite) or +3 melee (1d6+1, slam) or +0 ranged (1d6+1, javelin); Full Atk +3 melee (1d10+1, greatclub) or +3 melee (1d4+1, bite) or +3 melee (1d6+1, slam) or +0 ranged (1d6+1, javelin); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +1, Ref -1, Will +4; Str 12, Dex 7, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
                <tr>
                    <td class="key">Hidden Treasure</td>
                    <td class="value">Hidden (Search DC 20) Locked Good Wooden Chest (Open Lock DC 30, break DC 18; hard 5, 15 hp)<hr /><p>500 gp; Aquamarine (400 gp), Golden Yellow Topaz (600 gp), Peridot (40 gp), Star Rose Quartz (50 gp); hoard total 1590 gp</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="24" name="24">Room #24</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Someone has scrawled "The curse can never be broken" on the east wall, A pile of rotten leather lies in the south side of the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="25" name="25">Room #25</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A tile mosaic of geometric patterns covers the floor, An acrid odor fills the north-east corner of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">14 x Human Commoner Zombie<hr /><p>Human commoner zombie: CR 1/2; Medium undead; HD 2d12+3; hp 16; Init -1; Spd 30 ft. (6 squares; can't run); AC 11 (-1 dex, +2 natural), touch 9, flat-footed 11; Base Atk +1; Grp +2; Atk +2 melee (1d6+1, slam) or +2 melee (1d6+1, club); Full Atk +2 melee (slam) and (1d6+1) or +2 melee (1d6+1, club); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref -1, Will +3; Str 12, Dex 8, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="26" name="26">Room #26</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">The walls have been engraved with endless spirals, A scratching sound fills the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">14 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="27" name="27">Room #27</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A group of monstrous faces have been carved into the east wall, A cube of solid stone stands in the west side of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">8 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="28" name="28">Room #28</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A magical mosaic on the north wall can be used to scry upon any known individual within the dungeon, A fountain decorated with three gargoyles sits in the east side of the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="29" name="29">Room #29</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A simple fireplace sits against the north wall, Someone has scrawled "ruby, emerald" on the west wall</td>
                </tr>
                <tr>
                    <td class="key">Hidden Treasure</td>
                    <td class="value">Hidden (Search DC 20) Trapped and Locked Iron Chest (Open Lock DC 20, break DC 28; hard 10, 60 hp)<p>Hail of Needles: CR 3; mechanical; location trigger; manual reset; Atk +20 ranged (2d4); Search DC 22; Disable Device DC 22</p><hr /><p>300 gp; Bloodstone (40 gp), Blue-white Diamond (4000 gp), Red Garnet (120 gp), Zircon (20 gp); hoard total 4480 gp</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="30" name="30">Room #30</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Burning torches in iron sconces line the north and south walls, The scent of smoke fills the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="31" name="31">Room #31</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Wraith<hr /><p>Wraith: CR 5; Medium undead (incorporeal); HD 5d12; hp 32; Init +7; Spd Fly 60 ft. (good) (12 squares); AC 15 (+3 dex, +2 deflection), touch 15, flat-footed 12; Base Atk +2; Grp -; Atk +5 melee (1d4 plus 1d6 Constitution drain, incorporeal touch); Full Atk +5 melee (1d4 plus 1d6 Constitution drain, incorporeal touch); Space/Reach 5 ft./5 ft.; SA Constitution drain, create spawn; SQ Darkvision 60 ft., daylight powerlessness, incorporeal traits, +2 turn resistance, undead traits, unnatural aura; AL LE; SV Fort +1, Ref +4, Will +6; Str -, Dex 16, Con -, Int 14, Wis 14, Cha 15</p><p>Skills and Feats: Diplomacy +6, Hide +11, Intimidate +10, Listen +12, Search +10, Sense Motive +8, Spot +12, Survival +2 (+4 following tracks); Alertness, Blind-Fight, Combat Reflexes, Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="32" name="32">Room #32</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A group of draconic faces have been carved into the south wall, A pile of spoiled meat lies in the north-west corner of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Mummy<hr /><p>Mummy: CR 5; Medium undead; HD 8d12+3; hp 55; Init +0; Spd 20 ft. (4 squares); AC 20 (+10 natural), touch 10, flat-footed 20; Base Atk +4; Grp +11; Atk +11 melee (1d6+10 plus mummy rot, slam); Full Atk +11 melee (1d6+10 plus mummy rot, slam); Space/Reach 5 ft./5 ft.; SA Despair, mummy rot; SQ Damage reduction 5/-, darkvision 60 ft., undead traits, vulnerability to fire; AL LE; SV Fort +4, Ref +2, Will +8; Str 24, Dex 10, Con -, Int 6, Wis 14, Cha 15</p><p>Skills and Feats: Hide +7, Listen +8, Move Silently +7, Spot +8; Alertness, Great Fortitude, Toughness</p><p>Treasure: 400 gp; Chrysoprase Rod set with Golden Pearl (1900 gp), Painted Glass Mask (90 gp), Silver Framed Painting (4000 gp), Small Bag of Spices (90 gp); Potion of Magic Fang (50 gp); hoard total 6530 gp</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="33" name="33">Room #33</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">5 x Owlbear Skeleton<hr /><p>Owlbear skeleton: CR 2; Large undead; HD 5d12; hp 32; Init +6; Spd 30 ft. (6 squares); AC 13 (-1 size, +2 dex, +2 natural), touch 11, flat-footed 11; Base Atk +2; Grp +11; Atk +6 melee (1d6+5, claw); Full Atk +6 melee (1d6+5, 2 claws) and +1 melee (1d8+2, bite); Space/Reach 10 ft./5 ft.; SA -; SQ Damage reduction 5/bludgeoning, darkvision 60 ft., immunity to cold, undead traits; AL NE; SV Fort +1, Ref +3, Will +4; Str 21, Dex 14, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: ; Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="34" name="34">Room #34</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Empty</td>
                    <td class="value">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="35" name="35">Room #35</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">10 x Troglodyte Zombie<hr /><p>Troglodyte zombie: CR 1; Medium undead; HD 4d12+3; hp 29; Init -2; Spd 30 ft. (6 squares; can't run); AC 16 (-2 dex, +8 natural), touch 8, flat-footed 16; Base Atk +2; Grp +3; Atk +3 melee (1d10+1, greatclub) or +3 melee (1d4+1, bite) or +3 melee (1d6+1, slam) or +0 ranged (1d6+1, javelin); Full Atk +3 melee (1d10+1, greatclub) or +3 melee (1d4+1, bite) or +3 melee (1d6+1, slam) or +0 ranged (1d6+1, javelin); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +1, Ref -1, Will +4; Str 12, Dex 7, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="36" name="36">Room #36</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Someone has scrawled "This is not a secret door" on the north wall, A jingling sound fills the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="37" name="37">Room #37</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Wraith<hr /><p>Wraith: CR 5; Medium undead (incorporeal); HD 5d12; hp 32; Init +7; Spd Fly 60 ft. (good) (12 squares); AC 15 (+3 dex, +2 deflection), touch 15, flat-footed 12; Base Atk +2; Grp -; Atk +5 melee (1d4 plus 1d6 Constitution drain, incorporeal touch); Full Atk +5 melee (1d4 plus 1d6 Constitution drain, incorporeal touch); Space/Reach 5 ft./5 ft.; SA Constitution drain, create spawn; SQ Darkvision 60 ft., daylight powerlessness, incorporeal traits, +2 turn resistance, undead traits, unnatural aura; AL LE; SV Fort +1, Ref +4, Will +6; Str -, Dex 16, Con -, Int 14, Wis 14, Cha 15</p><p>Skills and Feats: Diplomacy +6, Hide +11, Intimidate +10, Listen +12, Search +10, Sense Motive +8, Spot +12, Survival +2 (+4 following tracks); Alertness, Blind-Fight, Combat Reflexes, Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="38" name="38">Room #38</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">9 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="39" name="39">Room #39</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A carved stone statue stands in the north-east corner of the room, A pile of rotten bread lies in the south-east corner of the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="40" name="40">Room #40</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Empty</td>
                    <td class="value">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="41" name="41">Room #41</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Empty</td>
                    <td class="value">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="42" name="42">Room #42</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">The floor is covered in perfect hexagonal tiles, Several bent copper coins are scattered throughout the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Ettin Skeleton<hr /><p>Ettin skeleton: CR 5; Large undead; HD 10d12; hp 65; Init +4; Spd 40 ft. (8 squares); AC 11 (-1 size, +2 natural), touch 9, flat-footed 11; Base Atk +5; Grp +15; Atk +10 melee (2d6+6, morningstar) or +10 melee (1d6+6, claw) or +4 ranged (1d8+6, javelin); Full Atk +10 melee (2d6+6, 2 morningstars) or +10 melee (1d6+6, 2 claws) or +4 ranged (1d8+6, 2 javelins); Space/Reach 10 ft./10 ft.; SA -; SQ Damage reduction 5/bludgeoning, darkvision 60 ft., darkvision 60 ft., immunity to cold, superior twoweapon; AL NE; SV Fort +3, Ref +3, Will +7; Str 23, Dex 10, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: ; Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="43" name="43">Room #43</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">The floor is covered in square tiles, alternating white and black, The north and west walls are covered with slime</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="44" name="44">Room #44</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Someone has scrawled "You cannot kill it with wizardry" in dwarvish runes on the north wall, Several candles are scattered throughout the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="45" name="45">Room #45</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Several square holes are cut into the ceiling and floor, A tile mosaic of a goddess of ice covers the floor</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Ettin Skeleton<hr /><p>Ettin skeleton: CR 5; Large undead; HD 10d12; hp 65; Init +4; Spd 40 ft. (8 squares); AC 11 (-1 size, +2 natural), touch 9, flat-footed 11; Base Atk +5; Grp +15; Atk +10 melee (2d6+6, morningstar) or +10 melee (1d6+6, claw) or +4 ranged (1d8+6, javelin); Full Atk +10 melee (2d6+6, 2 morningstars) or +10 melee (1d6+6, 2 claws) or +4 ranged (1d8+6, 2 javelins); Space/Reach 10 ft./10 ft.; SA -; SQ Damage reduction 5/bludgeoning, darkvision 60 ft., darkvision 60 ft., immunity to cold, superior twoweapon; AL NE; SV Fort +3, Ref +3, Will +7; Str 23, Dex 10, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: ; Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="46" name="46">Room #46</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">11 x Human Commoner Zombie<hr /><p>Human commoner zombie: CR 1/2; Medium undead; HD 2d12+3; hp 16; Init -1; Spd 30 ft. (6 squares; can't run); AC 11 (-1 dex, +2 natural), touch 9, flat-footed 11; Base Atk +1; Grp +2; Atk +2 melee (1d6+1, slam) or +2 melee (1d6+1, club); Full Atk +2 melee (slam) and (1d6+1) or +2 melee (1d6+1, club); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref -1, Will +3; Str 12, Dex 8, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="47" name="47">Room #47</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A corroded iron key hangs from a hook on the east and west walls, A rusted breastplate lies in the north-east corner of the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="48" name="48">Room #48</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Several square holes are cut into the ceiling and floor, Someone has scrawled "They ate Adonwel" on the east wall</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">4 x Owlbear Skeleton<hr /><p>Owlbear skeleton: CR 2; Large undead; HD 5d12; hp 32; Init +6; Spd 30 ft. (6 squares); AC 13 (-1 size, +2 dex, +2 natural), touch 11, flat-footed 11; Base Atk +2; Grp +11; Atk +6 melee (1d6+5, claw); Full Atk +6 melee (1d6+5, 2 claws) and +1 melee (1d8+2, bite); Space/Reach 10 ft./5 ft.; SA -; SQ Damage reduction 5/bludgeoning, darkvision 60 ft., immunity to cold, undead traits; AL NE; SV Fort +1, Ref +3, Will +4; Str 21, Dex 14, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: ; Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="49" name="49">Room #49</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A mural of a legendary battle covers the ceiling, Someone has scrawled "The Company of the Iron Thorn looted this place" in orcish runes on the west wall</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="50" name="50">Room #50</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">9 x Human Commoner Zombie<hr /><p>Human commoner zombie: CR 1/2; Medium undead; HD 2d12+3; hp 16; Init -1; Spd 30 ft. (6 squares; can't run); AC 11 (-1 dex, +2 natural), touch 9, flat-footed 11; Base Atk +1; Grp +2; Atk +2 melee (1d6+1, slam) or +2 melee (1d6+1, club); Full Atk +2 melee (slam) and (1d6+1) or +2 melee (1d6+1, club); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref -1, Will +3; Str 12, Dex 8, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="51" name="51">Room #51</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A sour odor fills the north-west corner of the room, A rusted gauntlet lies in the north side of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">4 x Human Commoner Zombie<hr /><p>Human commoner zombie: CR 1/2; Medium undead; HD 2d12+3; hp 16; Init -1; Spd 30 ft. (6 squares; can't run); AC 11 (-1 dex, +2 natural), touch 9, flat-footed 11; Base Atk +1; Grp +2; Atk +2 melee (1d6+1, slam) or +2 melee (1d6+1, club); Full Atk +2 melee (slam) and (1d6+1) or +2 melee (1d6+1, club); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref -1, Will +3; Str 12, Dex 8, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="52" name="52">Room #52</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A shallow pit lies in the west side of the room, The sound of rushing water can be faintly heard near the east wall</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">10 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="53" name="53">Room #53</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A large kiln and coal bin sit in the east side of the room, Someone has scrawled a basic map of the dungeon on the east wall</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">9 x Kobold Zombie<hr /><p>Kobold zombie: CR 1/2; Small undead; HD 2d12+3; hp 16; Init +0; Spd 30 ft. (6 squares; can't run); AC 13 (+1 size, +2 natural), touch 11, flat-footed 13; Base Atk +1; Grp -4; Atk +1 melee (1d6-1/x3, spear) or +1 melee (1d4-1, slam) or +2 ranged (1d6/19-20, light crossbow); Full Atk +0 melee (1d6-1/x3, spear) or +0 melee (1d4-1, slam) or +1 ranged (1d6/19-20, light crossbow); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref +0, Will +3; Str 8, Dex 11, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="54" name="54">Room #54</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Empty</td>
                    <td class="value">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="55" name="55">Room #55</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">4 x Ghoul<hr /><p>Ghoul: CR 1; Medium undead; HD 2d12; hp 13; Init +2; Spd 30 ft. (6 squares); AC 14 (+2 dex, +2 natural), touch 12, flat-footed 12; Base Atk +1; Grp +2; Atk +2 melee (1d6+1 plus paralysis, bite); Full Atk +2 melee (1d6+1 plus paralysis, bite) and +0 melee (1d3 plus paralysis, 2 claws); Space/Reach 5 ft./5 ft.; SA Ghoul fever, paralysis; SQ Darkvision 60 ft., undead traits, +2 turn resistance; AL CE; SV Fort +0, Ref +2, Will +5; Str 13, Dex 15, Con -, Int 13, Wis 14, Cha 12</p><p>Skills and Feats: Balance +6, Climb +5, Hide +6, Jump +5, Move Silently +6, Spot +7; Multiattack</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="56" name="56">Room #56</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Empty</td>
                    <td class="value">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="57" name="57">Room #57</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Lit candles are scattered across the floor, A sundered shield lies in the east side of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Mummy<hr /><p>Mummy: CR 5; Medium undead; HD 8d12+3; hp 55; Init +0; Spd 20 ft. (4 squares); AC 20 (+10 natural), touch 10, flat-footed 20; Base Atk +4; Grp +11; Atk +11 melee (1d6+10 plus mummy rot, slam); Full Atk +11 melee (1d6+10 plus mummy rot, slam); Space/Reach 5 ft./5 ft.; SA Despair, mummy rot; SQ Damage reduction 5/-, darkvision 60 ft., undead traits, vulnerability to fire; AL LE; SV Fort +4, Ref +2, Will +8; Str 24, Dex 10, Con -, Int 6, Wis 14, Cha 15</p><p>Skills and Feats: Hide +7, Listen +8, Move Silently +7, Spot +8; Alertness, Great Fortitude, Toughness</p><p>Treasure: 500 gp; hoard total 500 gp</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="58" name="58">Room #58</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Someone has scrawled "Death is the only exit" in dwarvish runes on the west wall, A corroded mace lies in the north-east corner of the room</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="59" name="59">Room #59</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">Sporadic knocking can be heard in the east side of the room, A charred blanket lies in the west side of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">13 x Human Commoner Zombie<hr /><p>Human commoner zombie: CR 1/2; Medium undead; HD 2d12+3; hp 16; Init -1; Spd 30 ft. (6 squares; can't run); AC 11 (-1 dex, +2 natural), touch 9, flat-footed 11; Base Atk +1; Grp +2; Atk +2 melee (1d6+1, slam) or +2 melee (1d6+1, club); Full Atk +2 melee (slam) and (1d6+1) or +2 melee (1d6+1, club); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref -1, Will +3; Str 12, Dex 8, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="60" name="60">Room #60</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A narrow ledge runs along the south and east walls, A rusted breastplate lies in the north side of the room</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">13 x Human Commoner Zombie<hr /><p>Human commoner zombie: CR 1/2; Medium undead; HD 2d12+3; hp 16; Init -1; Spd 30 ft. (6 squares; can't run); AC 11 (-1 dex, +2 natural), touch 9, flat-footed 11; Base Atk +1; Grp +2; Atk +2 melee (1d6+1, slam) or +2 melee (1d6+1, club); Full Atk +2 melee (slam) and (1d6+1) or +2 melee (1d6+1, club); Space/Reach 5 ft./5 ft; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +0, Ref -1, Will +3; Str 12, Dex 8, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
                <tr>
                    <td class="key">Trap</td>
                    <td class="value">Lightning Bolt Trap: CR 4; magic device; proximity trigger (alarm); automatic reset; spell effect (Lightning Bolt, 5th level wizard, 5d6 electricity, DC 14 Reflex save half damage); Search DC 28; Disable Device DC 28</td>
                </tr>
                <tr>
                    <td class="key">Hidden Treasure</td>
                    <td class="value">Hidden (Search DC 25) Unlocked Iron Chest (hard 10, 60 hp)<hr /><p>400 gp; hoard total 400 gp</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="61" name="61">Room #61</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">5 x Bugbear Zombie<hr /><p>Bugbear zombie: CR 2; Medium undead; HD 6d12+3; hp 42; Init +0; Spd 30 ft. (6 squares; can't run); AC 16 (+5 natural, +1 light wooden shield), touch 10, flat-footed 16; Base Atk +3; Grp +6; Atk +6 melee (1d8+3, morningstar) or +6 melee (1d6+3, slam) or +3 ranged (1d6+2, javelin); Full Atk +6 melee (1d8+3, morningstar) or +6 melee (1d6+3, slam) or +3 ranged (1d6+2, javelin); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +2, Ref +2, Will +5; Str 17, Dex 10, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="62" name="62">Room #62</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Empty</td>
                    <td class="value">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="63" name="63">Room #63</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">An iron sarcophagus sits in the center of the room, Someone has scrawled "The Elven Blade is lost" on the east wall</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="64" name="64">Room #64</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Wraith<hr /><p>Wraith: CR 5; Medium undead (incorporeal); HD 5d12; hp 32; Init +7; Spd Fly 60 ft. (good) (12 squares); AC 15 (+3 dex, +2 deflection), touch 15, flat-footed 12; Base Atk +2; Grp -; Atk +5 melee (1d4 plus 1d6 Constitution drain, incorporeal touch); Full Atk +5 melee (1d4 plus 1d6 Constitution drain, incorporeal touch); Space/Reach 5 ft./5 ft.; SA Constitution drain, create spawn; SQ Darkvision 60 ft., daylight powerlessness, incorporeal traits, +2 turn resistance, undead traits, unnatural aura; AL LE; SV Fort +1, Ref +4, Will +6; Str -, Dex 16, Con -, Int 14, Wis 14, Cha 15</p><p>Skills and Feats: Diplomacy +6, Hide +11, Intimidate +10, Listen +12, Search +10, Sense Motive +8, Spot +12, Survival +2 (+4 following tracks); Alertness, Blind-Fight, Combat Reflexes, Improved Initiative</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="65" name="65">Room #65</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Empty</td>
                    <td class="value">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="66" name="66">Room #66</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">A set of demonic war masks hangs on the east wall, Someone has scrawled "Gauwilh's Guild looted this place" on the south wall</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">1 x Mummy<hr /><p>Mummy: CR 5; Medium undead; HD 8d12+3; hp 55; Init +0; Spd 20 ft. (4 squares); AC 20 (+10 natural), touch 10, flat-footed 20; Base Atk +4; Grp +11; Atk +11 melee (1d6+10 plus mummy rot, slam); Full Atk +11 melee (1d6+10 plus mummy rot, slam); Space/Reach 5 ft./5 ft.; SA Despair, mummy rot; SQ Damage reduction 5/-, darkvision 60 ft., undead traits, vulnerability to fire; AL LE; SV Fort +4, Ref +2, Will +8; Str 24, Dex 10, Con -, Int 6, Wis 14, Cha 15</p><p>Skills and Feats: Hide +7, Listen +8, Move Silently +7, Spot +8; Alertness, Great Fortitude, Toughness</p><p>Treasure: 400 gp; hoard total 400 gp</p></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="section"><a id="67" name="67">Room #67</a></td>
        <td>
            <table class="section">
                <tr>
                    <td class="key">Room Features</td>
                    <td class="value">The north and west walls have been engraved with alien symbols, Someone has scrawled "Kill them with lightning" on the north wall</td>
                </tr>
                <tr>
                    <td class="key">Monster</td>
                    <td class="value">3 x Bugbear Zombie<hr /><p>Bugbear zombie: CR 2; Medium undead; HD 6d12+3; hp 42; Init +0; Spd 30 ft. (6 squares; can't run); AC 16 (+5 natural, +1 light wooden shield), touch 10, flat-footed 16; Base Atk +3; Grp +6; Atk +6 melee (1d8+3, morningstar) or +6 melee (1d6+3, slam) or +3 ranged (1d6+2, javelin); Full Atk +6 melee (1d8+3, morningstar) or +6 melee (1d6+3, slam) or +3 ranged (1d6+2, javelin); Space/Reach 5 ft./5 ft.; SA -; SQ Single actions only, damage reduction 5/slashing, darkvision 60 ft., undead traits; AL NE; SV Fort +2, Ref +2, Will +5; Str 17, Dex 10, Con -, Int -, Wis 10, Cha 1</p><p>Skills and Feats: -; Toughness</p></td>
                </tr>
            </table>
        </td>
    </tr>
</table>

  <!-- END OF CONTENT -->

  <div class="footnotes">
    <p>The Undercrypt of Cesa
    <br />http://donjon.bin.sh/</p>

    <p>Some content used under the terms of the
      <a href="data:text/html;base64,PCEtLSNpbmNsdWRlIHZpcnR1YWw9Ii9za2luL2h0bWw1Lmh0bWwiLS0+CiAgPHRpdGxlPmRvbmpvbjsgT3BlbiBHYW1pbmcgTGljZW5zZTwvdGl0bGU+CjwhLS0jaW5jbHVkZSB2aXJ0dWFsPSIvc2tpbi9iZWdpbi5odG1sIi0tPgoKICA8aDE+T1BFTiBHQU1FIExJQ0VOU0UgVmVyc2lvbiAxLjBhPC9oMT4KCiAgPHA+VGhlIGZvbGxvd2luZyB0ZXh0IGlzIHRoZSBwcm9wZXJ0eSBvZiBXaXphcmRzIG9mIHRoZSBDb2FzdCwgSW5jLiAKICBhbmQgaXMgQ29weXJpZ2h0IDIwMDAgV2l6YXJkcyBvZiB0aGUgQ29hc3QsIEluYyAoIldpemFyZHMiKS4gIEFsbAogIFJpZ2h0cyBSZXNlcnZlZC48L3A+CgogIDxwPjEuICBEZWZpbml0aW9uczoKICAgIChhKSAiQ29udHJpYnV0b3JzIiBtZWFucyB0aGUgY29weXJpZ2h0IGFuZC9vciB0cmFkZW1hcmsgb3duZXJzIHdobwogICAgICAgIGhhdmUgY29udHJpYnV0ZWQgT3BlbiBHYW1lIENvbnRlbnQ7CiAgICAoYikgIkRlcml2YXRpdmUgTWF0ZXJpYWwiIG1lYW5zIGNvcHlyaWdodGVkIG1hdGVyaWFsIGluY2x1ZGluZwogICAgICAgIGRlcml2YXRpdmUgd29ya3MgYW5kIHRyYW5zbGF0aW9ucyAoaW5jbHVkaW5nIGludG8gb3RoZXIKICAgICAgICBjb21wdXRlciBsYW5ndWFnZXMpLCBwb3RhdGlvbiwgbW9kaWZpY2F0aW9uLCBjb3JyZWN0aW9uLAogICAgICAgIGFkZGl0aW9uLCBleHRlbnNpb24sIHVwZ3JhZGUsIGltcHJvdmVtZW50LCBjb21waWxhdGlvbiwKICAgICAgICBhYnJpZGdtZW50IG9yIG90aGVyIGZvcm0gaW4gd2hpY2ggYW4gZXhpc3Rpbmcgd29yayBtYXkgYmUKICAgICAgICByZWNhc3QsIHRyYW5zZm9ybWVkIG9yIGFkYXB0ZWQ7CiAgICAoYykgIkRpc3RyaWJ1dGUiIG1lYW5zIHRvIHJlcHJvZHVjZSwgbGljZW5zZSwgcmVudCwgbGVhc2UsIHNlbGwsCiAgICAgICAgYnJvYWRjYXN0LCBwdWJsaWNseSBkaXNwbGF5LCB0cmFuc21pdCBvciBvdGhlcndpc2UgZGlzdHJpYnV0ZTsKICAgIChkKSAiT3BlbiBHYW1lIENvbnRlbnQiIG1lYW5zIHRoZSBnYW1lIG1lY2hhbmljIGFuZCBpbmNsdWRlcyB0aGUKICAgICAgICBtZXRob2RzLCBwcm9jZWR1cmVzLCBwcm9jZXNzZXMgYW5kIHJvdXRpbmVzIHRvIHRoZSBleHRlbnQgc3VjaAogICAgICAgIGNvbnRlbnQgZG9lcyBub3QgZW1ib2R5IHRoZSBQcm9kdWN0IElkZW50aXR5IGFuZCBpcyBhbgogICAgICAgIGVuaGFuY2VtZW50IG92ZXIgdGhlIHByaW9yIGFydCBhbmQgYW55IGFkZGl0aW9uYWwgY29udGVudAogICAgICAgIGNsZWFybHkgaWRlbnRpZmllZCBhcyBPcGVuIEdhbWUgQ29udGVudCBieSB0aGUgQ29udHJpYnV0b3IsIGFuZAogICAgICAgIG1lYW5zIGFueSB3b3JrIGNvdmVyZWQgYnkgdGhpcyBMaWNlbnNlLCBpbmNsdWRpbmcgdHJhbnNsYXRpb25zCiAgICAgICAgYW5kIGRlcml2YXRpdmUgd29ya3MgdW5kZXIgY29weXJpZ2h0IGxhdywgYnV0IHNwZWNpZmljYWxseQogICAgICAgIGV4Y2x1ZGVzIFByb2R1Y3QgSWRlbnRpdHkuCiAgICAoZSkgIlByb2R1Y3QgSWRlbnRpdHkiIG1lYW5zIHByb2R1Y3QgYW5kIHByb2R1Y3QgbGluZSBuYW1lcywgbG9nb3MKICAgICAgICBhbmQgaWRlbnRpZnlpbmcgbWFya3MgaW5jbHVkaW5nIHRyYWRlIGRyZXNzOyBhcnRpZmFjdHM7CiAgICAgICAgY3JlYXR1cmVzIGNoYXJhY3RlcnM7IHN0b3JpZXMsIHN0b3J5bGluZXMsIHBsb3RzLCB0aGVtYXRpYwogICAgICAgIGVsZW1lbnRzLCBkaWFsb2d1ZSwgaW5jaWRlbnRzLCBsYW5ndWFnZSwgYXJ0d29yaywgc3ltYm9scywKICAgICAgICBkZXNpZ25zLCBkZXBpY3Rpb25zLCBsaWtlbmVzc2VzLCBmb3JtYXRzLCBwb3NlcywgY29uY2VwdHMsCiAgICAgICAgdGhlbWVzIGFuZCBncmFwaGljLCBwaG90b2dyYXBoaWMgYW5kIG90aGVyIHZpc3VhbCBvciBhdWRpbwogICAgICAgIHJlcHJlc2VudGF0aW9uczsgbmFtZXMgYW5kIGRlc2NyaXB0aW9ucyBvZiBjaGFyYWN0ZXJzLCBzcGVsbHMsCiAgICAgICAgZW5jaGFudG1lbnRzLCBwZXJzb25hbGl0aWVzLCB0ZWFtcywgcGVyc29uYXMsIGxpa2VuZXNzZXMgYW5kCiAgICAgICAgc3BlY2lhbCBhYmlsaXRpZXM7IHBsYWNlcywgbG9jYXRpb25zLCBlbnZpcm9ubWVudHMsIGNyZWF0dXJlcywKICAgICAgICBlcXVpcG1lbnQsIG1hZ2ljYWwgb3Igc3VwZXJuYXR1cmFsIGFiaWxpdGllcyBvciBlZmZlY3RzLCBsb2dvcywKICAgICAgICBzeW1ib2xzLCBvciBncmFwaGljIGRlc2lnbnM7IGFuZCBhbnkgb3RoZXIgdHJhZGVtYXJrIG9yCiAgICAgICAgcmVnaXN0ZXJlZCB0cmFkZW1hcmsgY2xlYXJseSBpZGVudGlmaWVkIGFzIFByb2R1Y3QgaWRlbnRpdHkgYnkKICAgICAgICB0aGUgb3duZXIgb2YgdGhlIFByb2R1Y3QgSWRlbnRpdHksIGFuZCB3aGljaCBzcGVjaWZpY2FsbHkKICAgICAgICBleGNsdWRlcyB0aGUgT3BlbiBHYW1lIENvbnRlbnQ7CiAgICAoZikgIlRyYWRlbWFyayIgbWVhbnMgdGhlIGxvZ29zLCBuYW1lcywgbWFyaywgc2lnbiwgbW90dG8sIGRlc2lnbnMKICAgICAgICB0aGF0IGFyZSB1c2VkIGJ5IGEgQ29udHJpYnV0b3IgdG8gaWRlbnRpZnkgaXRzZWxmIG9yIGl0cwogICAgICAgIHByb2R1Y3RzIG9yIHRoZSBhc3NvY2lhdGVkIHByb2R1Y3RzIGNvbnRyaWJ1dGVkIHRvIHRoZSBPcGVuCiAgICAgICAgR2FtZSBMaWNlbnNlIGJ5IHRoZSBDb250cmlidXRvcgogICAgKGcpICJVc2UiLCAiVXNlZCIgb3IgIlVzaW5nIiBtZWFucyB0byB1c2UsIERpc3RyaWJ1dGUsIGNvcHksIGVkaXQsCiAgICAgICAgZm9ybWF0LCBtb2RpZnksIHRyYW5zbGF0ZSBhbmQgb3RoZXJ3aXNlIGNyZWF0ZSBEZXJpdmF0aXZlCiAgICAgICAgTWF0ZXJpYWwgb2YgT3BlbiBHYW1lIENvbnRlbnQuCiAgICAoaCkgIllvdSIgb3IgIllvdXIiIG1lYW5zIHRoZSBsaWNlbnNlZSBpbiB0ZXJtcyBvZiB0aGlzIGFncmVlbWVudC48L3A+CgogIDxwPjIuICBUaGUgTGljZW5zZToKICAgIFRoaXMgTGljZW5zZSBhcHBsaWVzIHRvIGFueSBPcGVuIEdhbWUgQ29udGVudCB0aGF0IGNvbnRhaW5zIGEKICAgIG5vdGljZSBpbmRpY2F0aW5nIHRoYXQgdGhlIE9wZW4gR2FtZSBDb250ZW50IG1heSBvbmx5IGJlIFVzZWQgdW5kZXIKICAgIGFuZCBpbiB0ZXJtcyBvZiB0aGlzIExpY2Vuc2UuICBZb3UgbXVzdCBhZmZpeCBzdWNoIGEgbm90aWNlIHRvIGFueQogICAgT3BlbiBHYW1lIENvbnRlbnQgdGhhdCB5b3UgVXNlLiAgTm8gdGVybXMgbWF5IGJlIGFkZGVkIHRvIG9yCiAgICBzdWJ0cmFjdGVkIGZyb20gdGhpcyBMaWNlbnNlIGV4Y2VwdCBhcyBkZXNjcmliZWQgYnkgdGhlIExpY2Vuc2UKICAgIGl0c2VsZi4gIE5vIG90aGVyIHRlcm1zIG9yIGNvbmRpdGlvbnMgbWF5IGJlIGFwcGxpZWQgdG8gYW55IE9wZW4KICAgIEdhbWUgQ29udGVudCBkaXN0cmlidXRlZCB1c2luZyB0aGlzIExpY2Vuc2UuPC9wPgoKICA8cD4zLiAgT2ZmZXIgYW5kIEFjY2VwdGFuY2U6CiAgICBCeSBVc2luZyB0aGUgT3BlbiBHYW1lIENvbnRlbnQgWW91IGluZGljYXRlIFlvdXIgYWNjZXB0YW5jZSBvZiB0aGUKICAgIHRlcm1zIG9mIHRoaXMgTGljZW5zZS48L3A+CgogIDxwPjQuICBHcmFudCBhbmQgQ29uc2lkZXJhdGlvbjoKICAgIEluIGNvbnNpZGVyYXRpb24gZm9yIGFncmVlaW5nIHRvIHVzZSB0aGlzIExpY2Vuc2UsIHRoZSBDb250cmlidXRvcnMKICAgIGdyYW50IFlvdSBhIHBlcnBldHVhbCwgd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1leGNsdXNpdmUKICAgIGxpY2Vuc2Ugd2l0aCB0aGUgZXhhY3QgdGVybXMgb2YgdGhpcyBMaWNlbnNlIHRvIFVzZSwgdGhlIE9wZW4gR2FtZQogICAgQ29udGVudC48L3A+CgogIDxwPjUuICBSZXByZXNlbnRhdGlvbiBvZiBBdXRob3JpdHkgdG8gQ29udHJpYnV0ZToKICAgIElmIFlvdSBhcmUgY29udHJpYnV0aW5nIG9yaWdpbmFsIG1hdGVyaWFsIGFzIE9wZW4gR2FtZSBDb250ZW50LCBZb3UKICAgIHJlcHJlc2VudCB0aGF0IFlvdXIgQ29udHJpYnV0aW9ucyBhcmUgWW91ciBvcmlnaW5hbCBjcmVhdGlvbiBhbmQvb3IKICAgIFlvdSBoYXZlIHN1ZmZpY2llbnQgcmlnaHRzIHRvIGdyYW50IHRoZSByaWdodHMgY29udmV5ZWQgYnkgdGhpcwogICAgTGljZW5zZS48L3A+CgogIDxwPjYuICBOb3RpY2Ugb2YgTGljZW5zZSBDb3B5cmlnaHQ6CiAgICBZb3UgbXVzdCB1cGRhdGUgdGhlIENPUFlSSUdIVCBOT1RJQ0UgcG9ydGlvbiBvZiB0aGlzIExpY2Vuc2UgdG8KICAgIGluY2x1ZGUgdGhlIGV4YWN0IHRleHQgb2YgdGhlIENPUFlSSUdIVCBOT1RJQ0Ugb2YgYW55IE9wZW4gR2FtZQogICAgQ29udGVudCBZb3UgYXJlIGNvcHlpbmcsIG1vZGlmeWluZyBvciBkaXN0cmlidXRpbmcsIGFuZCBZb3UgbXVzdAogICAgYWRkIHRoZSB0aXRsZSwgdGhlIGNvcHlyaWdodCBkYXRlLCBhbmQgdGhlIGNvcHlyaWdodCBob2xkZXIncyBuYW1lCiAgICB0byB0aGUgQ09QWVJJR0hUIE5PVElDRSBvZiBhbnkgb3JpZ2luYWwgT3BlbiBHYW1lIENvbnRlbnQgeW91CiAgICBEaXN0cmlidXRlLjwvcD4KCiAgPHA+Ny4gIFVzZSBvZiBQcm9kdWN0IElkZW50aXR5OgogICAgWW91IGFncmVlIG5vdCB0byBVc2UgYW55IFByb2R1Y3QgSWRlbnRpdHksIGluY2x1ZGluZyBhcyBhbgogICAgaW5kaWNhdGlvbiBhcyB0byBjb21wYXRpYmlsaXR5LCBleGNlcHQgYXMgZXhwcmVzc2x5IGxpY2Vuc2VkIGluCiAgICBhbm90aGVyLCBpbmRlcGVuZGVudCBBZ3JlZW1lbnQgd2l0aCB0aGUgb3duZXIgb2YgZWFjaCBlbGVtZW50IG9mCiAgICB0aGF0IFByb2R1Y3QgSWRlbnRpdHkuICBZb3UgYWdyZWUgbm90IHRvIGluZGljYXRlIGNvbXBhdGliaWxpdHkgb3IKICAgIGNvLWFkYXB0YWJpbGl0eSB3aXRoIGFueSBUcmFkZW1hcmsgb3IgUmVnaXN0ZXJlZCBUcmFkZW1hcmsgaW4KICAgIGNvbmp1bmN0aW9uIHdpdGggYSB3b3JrIGNvbnRhaW5pbmcgT3BlbiBHYW1lIENvbnRlbnQgZXhjZXB0IGFzCiAgICBleHByZXNzbHkgbGljZW5zZWQgaW4gYW5vdGhlciwgaW5kZXBlbmRlbnQgQWdyZWVtZW50IHdpdGggdGhlIG93bmVyCiAgICBvZiBzdWNoIFRyYWRlbWFyayBvciBSZWdpc3RlcmVkIFRyYWRlbWFyay4gIFRoZSB1c2Ugb2YgYW55IFByb2R1Y3QKICAgIElkZW50aXR5IGluIE9wZW4gR2FtZSBDb250ZW50IGRvZXMgbm90IGNvbnN0aXR1dGUgYSBjaGFsbGVuZ2UgdG8KICAgIHRoZSBvd25lcnNoaXAgb2YgdGhhdCBQcm9kdWN0IElkZW50aXR5LiAgVGhlIG93bmVyIG9mIGFueSBQcm9kdWN0CiAgICBJZGVudGl0eSB1c2VkIGluIE9wZW4gR2FtZSBDb250ZW50IHNoYWxsIHJldGFpbiBhbGwgcmlnaHRzLCB0aXRsZQogICAgYW5kIGludGVyZXN0IGluIGFuZCB0byB0aGF0IFByb2R1Y3QgSWRlbnRpdHkuPC9wPgoKICA8cD44LiAgSWRlbnRpZmljYXRpb246CiAgICBJZiB5b3UgZGlzdHJpYnV0ZSBPcGVuIEdhbWUgQ29udGVudCBZb3UgbXVzdCBjbGVhcmx5IGluZGljYXRlIHdoaWNoCiAgICBwb3J0aW9ucyBvZiB0aGUgd29yayB0aGF0IHlvdSBhcmUgZGlzdHJpYnV0aW5nIGFyZSBPcGVuIEdhbWUKICAgIENvbnRlbnQuPC9wPgoKICA8cD45LiAgVXBkYXRpbmcgdGhlIExpY2Vuc2U6CiAgICBXaXphcmRzIG9yIGl0cyBkZXNpZ25hdGVkIEFnZW50cyBtYXkgcHVibGlzaCB1cGRhdGVkIHZlcnNpb25zIG9mCiAgICB0aGlzIExpY2Vuc2UuICBZb3UgbWF5IHVzZSBhbnkgYXV0aG9yaXplZCB2ZXJzaW9uIG9mIHRoaXMgTGljZW5zZQogICAgdG8gY29weSwgbW9kaWZ5IGFuZCBkaXN0cmlidXRlIGFueSBPcGVuIEdhbWUgQ29udGVudCBvcmlnaW5hbGx5CiAgICBkaXN0cmlidXRlZCB1bmRlciBhbnkgdmVyc2lvbiBvZiB0aGlzIExpY2Vuc2UuPC9wPgoKICA8cD4xMC4gIENvcHkgb2YgdGhpcyBMaWNlbnNlOgogICAgWW91IE1VU1QgaW5jbHVkZSBhIGNvcHkgb2YgdGhpcyBMaWNlbnNlIHdpdGggZXZlcnkgY29weSBvZiB0aGUgT3BlbgogICAgR2FtZSBDb250ZW50IFlvdSBEaXN0cmlidXRlLjwvcD4KCiAgPHA+MTEuICBVc2Ugb2YgQ29udHJpYnV0b3IgQ3JlZGl0czoKICAgIFlvdSBtYXkgbm90IG1hcmtldCBvciBhZHZlcnRpc2UgdGhlIE9wZW4gR2FtZSBDb250ZW50IHVzaW5nIHRoZQogICAgbmFtZSBvZiBhbnkgQ29udHJpYnV0b3IgdW5sZXNzIFlvdSBoYXZlIHdyaXR0ZW4gcGVybWlzc2lvbiBmcm9tIHRoZQogICAgQ29udHJpYnV0b3IgdG8gZG8gc28uPC9wPgoKICA8cD4xMi4gIEluYWJpbGl0eSB0byBDb21wbHk6CiAgICBJZiBpdCBpcyBpbXBvc3NpYmxlIGZvciBZb3UgdG8gY29tcGx5IHdpdGggYW55IG9mIHRoZSB0ZXJtcyBvZiB0aGlzCiAgICBMaWNlbnNlIHdpdGggcmVzcGVjdCB0byBzb21lIG9yIGFsbCBvZiB0aGUgT3BlbiBHYW1lIENvbnRlbnQgZHVlIHRvCiAgICBzdGF0dXRlLCBqdWRpY2lhbCBvcmRlciwgb3IgZ292ZXJubWVudGFsIHJlZ3VsYXRpb24gdGhlbiBZb3UgbWF5CiAgICBub3QgVXNlIGFueSBPcGVuIEdhbWUgTWF0ZXJpYWwgc28gYWZmZWN0ZWQuPC9wPgoKICA8cD4xMy4gIFRlcm1pbmF0aW9uOgogICAgVGhpcyBMaWNlbnNlIHdpbGwgdGVybWluYXRlIGF1dG9tYXRpY2FsbHkgaWYgWW91IGZhaWwgdG8gY29tcGx5CiAgICB3aXRoIGFsbCB0ZXJtcyBoZXJlaW4gYW5kIGZhaWwgdG8gY3VyZSBzdWNoIGJyZWFjaCB3aXRoaW4gMzAgZGF5cwogICAgb2YgYmVjb21pbmcgYXdhcmUgb2YgdGhlIGJyZWFjaC4gIEFsbCBzdWJsaWNlbnNlcyBzaGFsbCBzdXJ2aXZlIHRoZQogICAgdGVybWluYXRpb24gb2YgdGhpcyBMaWNlbnNlLjwvcD4KCiAgPHA+MTQuICBSZWZvcm1hdGlvbjoKICAgIElmIGFueSBwcm92aXNpb24gb2YgdGhpcyBMaWNlbnNlIGlzIGhlbGQgdG8gYmUgdW5lbmZvcmNlYWJsZSwgc3VjaAogICAgcHJvdmlzaW9uIHNoYWxsIGJlIHJlZm9ybWVkIG9ubHkgdG8gdGhlIGV4dGVudCBuZWNlc3NhcnkgdG8gbWFrZSBpdAogICAgZW5mb3JjZWFibGUuPC9wPgoKICA8cD4xNS4gIENPUFlSSUdIVCBOT1RJQ0U8L3A+CgogIDxwPk9wZW4gR2FtZSBMaWNlbnNlIHYgMS4wYQogIENvcHlyaWdodCAyMDAwLCBXaXphcmRzIG9mIHRoZSBDb2FzdCwgSW5jLjwvcD4KCiAgPHA+U3lzdGVtIFJlZmVyZW5jZSBEb2N1bWVudAogIENvcHlyaWdodCAyMDAwLTIwMDMsIFdpemFyZHMgb2YgdGhlIENvYXN0LCBJbmMuOwogIEF1dGhvcnMgSm9uYXRoYW4gVHdlZXQsIE1vbnRlIENvb2ssIFNraXAgV2lsbGlhbXMsIFJpY2ggQmFrZXIsCiAgICBBbmR5IENvbGxpbnMsIERhdmlkIE5vb25hbiwgUmljaCBSZWRtYW4sIEJydWNlIFIuIENvcmRlbGwsCiAgICBKb2huIEQuIFJhdGVsaWZmLCBUaG9tYXMgUmVpZCwgSmFtZXMgV3lhdHQsCiAgYmFzZWQgb24gb3JpZ2luYWwgbWF0ZXJpYWwgYnkgRS4gR2FyeSBHeWdheCBhbmQgRGF2ZSBBcm5lc29uLjwvcD4KCiAgPHA+U3lzdGVtIFJlZmVyZW5jZSBEb2N1bWVudCA1LjAKICBDb3B5cmlnaHQgMjAxNiwgV2l6YXJkcyBvZiB0aGUgQ29hc3QsIEluYy47CiAgQXV0aG9ycyBNaWtlIE1lYXJscywgSmVyZW15IENyYXdmb3JkLCBDaHJpcyBQZXJraW5zLCBSb2RuZXkgVGhvbXBzb24sCiAgICBQZXRlciBMZWUsIEphbWVzIFd5YXR0LCBSb2JlcnQgSi4gU2Nod2FsYiwgQnJ1Y2UgUi4gQ29yZGVsbCwKICAgIENocmlzIFNpbXMsIGFuZCBTdGV2ZSBUb3duc2hlbmQsCiAgYmFzZWQgb24gb3JpZ2luYWwgbWF0ZXJpYWwgYnkgRS4gR2FyeSBHeWdheCBhbmQgRGF2ZSBBcm5lc29uLjwvcD4KCiAgPHA+U3lzdGVtIFJlZmVyZW5jZSBEb2N1bWVudCA1LjEKICBDb3B5cmlnaHQgMjAxNiwgV2l6YXJkcyBvZiB0aGUgQ29hc3QsIEluYy47CiAgQXV0aG9ycyBNaWtlIE1lYXJscywgSmVyZW15IENyYXdmb3JkLCBDaHJpcyBQZXJraW5zLCBSb2RuZXkgVGhvbXBzb24sCiAgICBQZXRlciBMZWUsIEphbWVzIFd5YXR0LCBSb2JlcnQgSi4gU2Nod2FsYiwgQnJ1Y2UgUi4gQ29yZGVsbCwKICAgIENocmlzIFNpbXMsIGFuZCBTdGV2ZSBUb3duc2hlbmQsCiAgYmFzZWQgb24gb3JpZ2luYWwgbWF0ZXJpYWwgYnkgRS4gR2FyeSBHeWdheCBhbmQgRGF2ZSBBcm5lc29uLjwvcD4KCiAgPHA+Q2hhb3NpdGVjaCwKICAmY29weTsgMjAwMywgTW9udGUgSi4gQ29vay4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L3A+CgogIDxwPk1pY3JvbGl0ZTIwCiAgJmNvcHk7IDIwMDYsIFJvYmluIFYuIFN0YWNleSAocm9iaW5AZ3JleXd1bGYubmV0KTwvcD4KCiAgPHA+UGF0aGZpbmRlciBSb2xlcGxheWluZyBHYW1lIFJlZmVyZW5jZSBEb2N1bWVudAogICZjb3B5OyAyMDExLCBQYWl6byBQdWJsaXNoaW5nLCBMTEM7CiAgQXV0aG9yOiBQYWl6byBQdWJsaXNoaW5nLCBMTEMuPC9wPgoKICA8cD5QYXRoZmluZGVyIFJvbGVwbGF5aW5nIEdhbWUgQ29yZSBSdWxlYm9vawogICZjb3B5OyAyMDA5LCBQYWl6byBQdWJsaXNoaW5nLCBMTEM7CiAgQXV0aG9yOiBKYXNvbiBCdWxtYWhuLAogIGJhc2VkIG9uIG1hdGVyaWFsIGJ5IEpvbmF0aGFuIFR3ZWV0LCBNb250ZSBDb29rLCBhbmQgU2tpcCBXaWxsaWFtcy48L3A+CgogIDxwPlBhdGhmaW5kZXIgUlBHIEJlc3RpYXJ5CiAgJmNvcHk7IDIwMDksIFBhaXpvIFB1Ymxpc2hpbmcsIExMQzsKICBBdXRob3I6IEphc29uIEJ1bG1haG4sCiAgYmFzZWQgb24gbWF0ZXJpYWwgYnkgSm9uYXRoYW4gVHdlZXQsIE1vbnRlIENvb2ssIGFuZCBTa2lwIFdpbGxpYW1zLjwvcD4KCiAgPHA+UGF0aGZpbmRlciBSb2xlcGxheWluZyBHYW1lIFVsdGltYXRlIEVxdWlwbWVudAogICZjb3B5OyAyMDEyLCBQYWl6byBQdWJsaXNoaW5nLCBMTEM7CiAgQXV0aG9ycyBEZW5uaXMgQmFrZXIsIEplc3NlIEJlbm5lciwgQmVuamFtaW4gQnJ1Y2ssIFJvc3MgQnllcnMsCiAgICBCcmlhbiBKLiBDb3J0aWpvLCBSeWFuIENvc3RlbGxvLCBNaWtlIEZlcmd1c29uLCBNYXR0IEdvZXR6LAogICAgSmltIEdyb3ZlcywgVHJhY3kgSHVybGV5LCBNYXR0IEphbWVzLCBKb25hdGhhbiBILiBLZWl0aCwKICAgIE1pY2hhZWwgS2Vud2F5LCBIYWwgTWFjTGVhbiwgSmFzb24gTmVsc29uLCBUb3JrIFNoYXcsCiAgICBPd2VuIEtDIFN0ZXBoZW5zLCBhbmQgUnVzcyBUYXlsb3IuPC9wPgoKPCEtLSNpbmNsdWRlIHZpcnR1YWw9Ii9za2luL2VuZC5odG1sIi0tPgo=">Open Gaming License</a></p>
  </div>
</body>
</html>
